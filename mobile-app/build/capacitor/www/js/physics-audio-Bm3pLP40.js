const en=(o,d,i)=>({endTime:d,insertTime:i,type:"exponentialRampToValue",value:o}),tn=(o,d,i)=>({endTime:d,insertTime:i,type:"linearRampToValue",value:o}),Tt=(o,d)=>({startTime:d,type:"setValue",value:o}),yn=(o,d,i)=>({duration:i,startTime:d,type:"setValueCurve",values:o}),Cn=(o,d,{startTime:i,target:m,timeConstant:a})=>m+(d-m)*Math.exp((i-o)/a),We=o=>o.type==="exponentialRampToValue",ut=o=>o.type==="linearRampToValue",Oe=o=>We(o)||ut(o),Lt=o=>o.type==="setValue",Ie=o=>o.type==="setValueCurve",ft=(o,d,i,m)=>{const a=o[d];return a===void 0?m:Oe(a)||Lt(a)?a.value:Ie(a)?a.values[a.values.length-1]:Cn(i,ft(o,d-1,a.startTime,m),a)},nn=(o,d,i,m,a)=>i===void 0?[m.insertTime,a]:Oe(i)?[i.endTime,i.value]:Lt(i)?[i.startTime,i.value]:Ie(i)?[i.startTime+i.duration,i.values[i.values.length-1]]:[i.startTime,ft(o,d-1,i.startTime,a)],Et=o=>o.type==="cancelAndHold",Ot=o=>o.type==="cancelScheduledValues",Ee=o=>Et(o)||Ot(o)?o.cancelTime:We(o)||ut(o)?o.endTime:o.startTime,rn=(o,d,i,{endTime:m,value:a})=>i===a?a:0<i&&0<a||i<0&&a<0?i*(a/i)**((o-d)/(m-d)):0,on=(o,d,i,{endTime:m,value:a})=>i+(o-d)/(m-d)*(a-i),fr=(o,d)=>{const i=Math.floor(d),m=Math.ceil(d);return i===m?o[i]:(1-(d-i))*o[i]+(1-(m-d))*o[m]},dr=(o,{duration:d,startTime:i,values:m})=>{const a=(o-i)/d*(m.length-1);return fr(m,a)},at=o=>o.type==="setTarget";class hr{constructor(d){this._automationEvents=[],this._currenTime=0,this._defaultValue=d}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(d){const i=Ee(d);if(Et(d)||Ot(d)){const m=this._automationEvents.findIndex(e=>Ot(d)&&Ie(e)?e.startTime+e.duration>=i:Ee(e)>=i),a=this._automationEvents[m];if(m!==-1&&(this._automationEvents=this._automationEvents.slice(0,m)),Et(d)){const e=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&Oe(a)){if(e!==void 0&&at(e))throw new Error("The internal list is malformed.");const l=e===void 0?a.insertTime:Ie(e)?e.startTime+e.duration:Ee(e),n=e===void 0?this._defaultValue:Ie(e)?e.values[e.values.length-1]:e.value,r=We(a)?rn(i,l,n,a):on(i,l,n,a),c=We(a)?en(r,i,this._currenTime):tn(r,i,this._currenTime);this._automationEvents.push(c)}if(e!==void 0&&at(e)&&this._automationEvents.push(Tt(this.getValue(i),i)),e!==void 0&&Ie(e)&&e.startTime+e.duration>i){const l=i-e.startTime,n=(e.values.length-1)/e.duration,r=Math.max(2,1+Math.ceil(l*n)),c=l/(r-1)*n,s=e.values.slice(0,r);if(c<1)for(let h=1;h<r;h+=1){const p=c*h%1;s[h]=e.values[h-1]*(1-p)+e.values[h]*p}this._automationEvents[this._automationEvents.length-1]=yn(s,e.startTime,l)}}}else{const m=this._automationEvents.findIndex(l=>Ee(l)>i),a=m===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[m-1];if(a!==void 0&&Ie(a)&&Ee(a)+a.duration>i)return!1;const e=We(d)?en(d.value,d.endTime,this._currenTime):ut(d)?tn(d.value,i,this._currenTime):d;if(m===-1)this._automationEvents.push(e);else{if(Ie(d)&&i+d.duration>Ee(this._automationEvents[m]))return!1;this._automationEvents.splice(m,0,e)}}return!0}flush(d){const i=this._automationEvents.findIndex(m=>Ee(m)>d);if(i>1){const m=this._automationEvents.slice(i-1),a=m[0];at(a)&&m.unshift(Tt(ft(this._automationEvents,i-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=m}}getValue(d){if(this._automationEvents.length===0)return this._defaultValue;const i=this._automationEvents.findIndex(l=>Ee(l)>d),m=this._automationEvents[i],a=(i===-1?this._automationEvents.length:i)-1,e=this._automationEvents[a];if(e!==void 0&&at(e)&&(m===void 0||!Oe(m)||m.insertTime>d))return Cn(d,ft(this._automationEvents,a-1,e.startTime,this._defaultValue),e);if(e!==void 0&&Lt(e)&&(m===void 0||!Oe(m)))return e.value;if(e!==void 0&&Ie(e)&&(m===void 0||!Oe(m)||e.startTime+e.duration>d))return d<e.startTime+e.duration?dr(d,e):e.values[e.values.length-1];if(e!==void 0&&Oe(e)&&(m===void 0||!Oe(m)))return e.value;if(m!==void 0&&We(m)){const[l,n]=nn(this._automationEvents,a,e,m,this._defaultValue);return rn(d,l,n,m)}if(m!==void 0&&ut(m)){const[l,n]=nn(this._automationEvents,a,e,m,this._defaultValue);return on(d,l,n,m)}return this._defaultValue}}const pr=o=>({cancelTime:o,type:"cancelAndHold"}),mr=o=>({cancelTime:o,type:"cancelScheduledValues"}),vr=(o,d)=>({endTime:d,type:"exponentialRampToValue",value:o}),gr=(o,d)=>({endTime:d,type:"linearRampToValue",value:o}),yr=(o,d,i)=>({startTime:d,target:o,timeConstant:i,type:"setTarget"}),Cr=()=>new DOMException("","AbortError"),xr=o=>(d,i,[m,a,e],l)=>{o(d[a],[i,m,e],n=>n[0]===i&&n[1]===m,l)},wr=o=>(d,i,m)=>{const a=[];for(let e=0;e<m.numberOfInputs;e+=1)a.push(new Set);o.set(d,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:i})},Sr=o=>(d,i)=>{o.set(d,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:i})},_e=new WeakSet,xn=new WeakMap,Bt=new WeakMap,wn=new WeakMap,Wt=new WeakMap,Ct=new WeakMap,Sn=new WeakMap,Dt=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,Nn={construct(){return Nn}},Nr=o=>{try{const d=new Proxy(o,Nn);new d}catch{return!1}return!0},sn=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,an=(o,d)=>{const i=[];let m=o.replace(/^[\s]+/,""),a=m.match(sn);for(;a!==null;){const e=a[1].slice(1,-1),l=a[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,d).toString());i.push(l),m=m.slice(a[0].length).replace(/^[\s]+/,""),a=m.match(sn)}return[i.join(";"),m]},cn=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},ln=o=>{if(!Nr(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Mr=(o,d,i,m,a,e,l,n,r,c,s,h,p)=>{let t=0;return(u,f,v={credentials:"omit"})=>{const y=s.get(u);if(y!==void 0&&y.has(f))return Promise.resolve();const S=c.get(u);if(S!==void 0){const g=S.get(f);if(g!==void 0)return g}const M=e(u),T=M.audioWorklet===void 0?a(f).then(([g,x])=>{const[w,C]=an(g,x),I=`${w};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return i(I)}).then(()=>{const g=p._AWGS.pop();if(g===void 0)throw new SyntaxError;m(M.currentTime,M.sampleRate,()=>g(class{},void 0,(x,w)=>{if(x.trim()==="")throw d();const C=Rt.get(M);if(C!==void 0){if(C.has(x))throw d();ln(w),cn(w.parameterDescriptors),C.set(x,w)}else ln(w),cn(w.parameterDescriptors),Rt.set(M,new Map([[x,w]]))},M.sampleRate,void 0,void 0))}):Promise.all([a(f),Promise.resolve(o(h,h))]).then(([[g,x],w])=>{const C=t+1;t=C;const[I,N]=an(g,x),O=`${I};((AudioWorkletProcessor,registerProcessor)=>{${N}
})(${w?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${w?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${w?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,D=new Blob([O],{type:"application/javascript; charset=utf-8"}),F=URL.createObjectURL(D);return M.audioWorklet.addModule(F,v).then(()=>{if(n(M))return M;const R=l(M);return R.audioWorklet.addModule(F,v).then(()=>R)}).then(R=>{if(r===null)throw new SyntaxError;try{new r(R,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(F))});return S===void 0?c.set(u,new Map([[f,T]])):S.set(f,T),T.then(()=>{const g=s.get(u);g===void 0?s.set(u,new Set([f])):g.add(f)}).finally(()=>{const g=c.get(u);g!==void 0&&g.delete(f)}),T}},ye=(o,d)=>{const i=o.get(d);if(i===void 0)throw new Error("A value with the given key could not be found.");return i},xt=(o,d)=>{const i=Array.from(o).filter(d);if(i.length>1)throw Error("More than one element was found.");if(i.length===0)throw Error("No element was found.");const[m]=i;return o.delete(m),m},Mn=(o,d,i,m)=>{const a=ye(o,d),e=xt(a,l=>l[0]===i&&l[1]===m);return a.size===0&&o.delete(d),e},je=o=>ye(Sn,o),Ve=o=>{if(_e.has(o))throw new Error("The AudioNode is already stored.");_e.add(o),je(o).forEach(d=>d(!0))},In=o=>"port"in o,qe=o=>{if(!_e.has(o))throw new Error("The AudioNode is not stored.");_e.delete(o),je(o).forEach(d=>d(!1))},kt=(o,d)=>{!In(o)&&d.every(i=>i.size===0)&&qe(o)},Ir=(o,d,i,m,a,e,l,n,r,c,s,h,p)=>{const t=new WeakMap;return(u,f,v,y,S)=>{const{activeInputs:M,passiveInputs:T}=e(f),{outputs:g}=e(u),x=n(u),w=C=>{const I=r(f),N=r(u);if(C){const A=Mn(T,u,v,y);o(M,u,A,!1),!S&&!h(u)&&i(N,I,v,y),p(f)&&Ve(f)}else{const A=m(M,u,v,y);d(T,y,A,!1),!S&&!h(u)&&a(N,I,v,y);const P=l(f);if(P===0)s(f)&&kt(f,M);else{const E=t.get(f);E!==void 0&&clearTimeout(E),t.set(f,setTimeout(()=>{s(f)&&kt(f,M)},P*1e3))}}};return c(g,[f,v,y],C=>C[0]===f&&C[1]===v&&C[2]===y,!0)?(x.add(w),s(u)?o(M,u,[v,y,w],!0):d(T,y,[u,v,w],!0),!0):!1}},Pr=o=>(d,i,[m,a,e],l)=>{const n=d.get(m);n===void 0?d.set(m,new Set([[a,i,e]])):o(n,[a,i,e],r=>r[0]===a&&r[1]===i,l)},Ar=o=>(d,i)=>{const m=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.connect(m).connect(d.destination);const a=()=>{i.removeEventListener("ended",a),i.disconnect(m),m.disconnect()};i.addEventListener("ended",a)},Tr=o=>(d,i)=>{o(d).add(i)},Er={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Or=(o,d,i,m,a,e)=>class extends o{constructor(n,r){const c=a(n),s={...Er,...r},h=m(c,s),p=e(c)?d():null;super(n,!1,h,p),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(n){this._nativeAnalyserNode.fftSize=n}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(n){const r=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=n,!(n>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=r,i()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(n){const r=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=n,!(this._nativeAnalyserNode.maxDecibels>n))throw this._nativeAnalyserNode.minDecibels=r,i()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(n){this._nativeAnalyserNode.smoothingTimeConstant=n}getByteFrequencyData(n){this._nativeAnalyserNode.getByteFrequencyData(n)}getByteTimeDomainData(n){this._nativeAnalyserNode.getByteTimeDomainData(n)}getFloatFrequencyData(n){this._nativeAnalyserNode.getFloatFrequencyData(n)}getFloatTimeDomainData(n){this._nativeAnalyserNode.getFloatTimeDomainData(n)}},ue=(o,d)=>o.context===d,Dr=(o,d,i)=>()=>{const m=new WeakMap,a=async(e,l)=>{let n=d(e);if(!ue(n,l)){const c={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,fftSize:n.fftSize,maxDecibels:n.maxDecibels,minDecibels:n.minDecibels,smoothingTimeConstant:n.smoothingTimeConstant};n=o(l,c)}return m.set(l,n),await i(e,l,n),n};return{render(e,l){const n=m.get(l);return n!==void 0?Promise.resolve(n):a(e,l)}}},dt=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Se=()=>new DOMException("","IndexSizeError"),_t=o=>{o.getChannelData=(d=>i=>{try{return d.call(o,i)}catch(m){throw m.code===12?Se():m}})(o.getChannelData)},Rr={numberOfChannels:1},Fr=(o,d,i,m,a,e,l,n)=>{let r=null;return class Pn{constructor(s){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:p,sampleRate:t}={...Rr,...s};r===null&&(r=new a(1,1,44100));const u=m!==null&&d(e,e)?new m({length:h,numberOfChannels:p,sampleRate:t}):r.createBuffer(p,h,t);if(u.numberOfChannels===0)throw i();return typeof u.copyFromChannel!="function"?(l(u),_t(u)):d(dt,()=>dt(u))||n(u),o.add(u),u}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===Pn.prototype||o.has(s)}}},pe=-34028234663852886e22,fe=-pe,Pe=o=>_e.has(o),kr={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},br=(o,d,i,m,a,e,l,n)=>class extends o{constructor(c,s){const h=e(c),p={...kr,...s},t=a(h,p),u=l(h),f=u?d():null;super(c,!1,t,f),this._audioBufferSourceNodeRenderer=f,this._isBufferNullified=!1,this._isBufferSet=p.buffer!==null,this._nativeAudioBufferSourceNode=t,this._onended=null,this._playbackRate=i(this,u,t.playbackRate,fe,pe)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw m();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const s=typeof c=="function"?n(this,c):null;this._nativeAudioBufferSourceNode.onended=s;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===s?c:h}get playbackRate(){return this._playbackRate}start(c=0,s=0,h){if(this._nativeAudioBufferSourceNode.start(c,s,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[c,s]:[c,s,h]),this.context.state!=="closed"){Ve(this);const p=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",p),Pe(this)&&qe(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",p)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},Lr=(o,d,i,m,a)=>()=>{const e=new WeakMap;let l=null,n=null;const r=async(c,s)=>{let h=i(c);const p=ue(h,s);if(!p){const t={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=d(s,t),l!==null&&h.start(...l),n!==null&&h.stop(n)}return e.set(s,h),p?await o(s,c.playbackRate,h.playbackRate):await m(s,c.playbackRate,h.playbackRate),await a(c,s,h),h};return{set start(c){l=c},set stop(c){n=c},render(c,s){const h=e.get(s);return h!==void 0?Promise.resolve(h):r(c,s)}}},Br=o=>"playbackRate"in o,Wr=o=>"frequency"in o&&"gain"in o,_r=o=>"offset"in o,Vr=o=>!("frequency"in o)&&"gain"in o,Ur=o=>"detune"in o&&"frequency"in o&&!("gain"in o),Gr=o=>"pan"in o,de=o=>ye(xn,o),Qe=o=>ye(wn,o),bt=(o,d)=>{const{activeInputs:i}=de(o);i.forEach(a=>a.forEach(([e])=>{d.includes(o)||bt(e,[...d,o])}));const m=Br(o)?[o.playbackRate]:In(o)?Array.from(o.parameters.values()):Wr(o)?[o.Q,o.detune,o.frequency,o.gain]:_r(o)?[o.offset]:Vr(o)?[o.gain]:Ur(o)?[o.detune,o.frequency]:Gr(o)?[o.pan]:[];for(const a of m){const e=Qe(a);e!==void 0&&e.activeInputs.forEach(([l])=>bt(l,d))}Pe(o)&&qe(o)},An=o=>{bt(o.destination,[])},Hr=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback"),Zr=(o,d,i,m,a,e,l,n,r)=>class extends o{constructor(s={}){if(r===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new r(s)}catch(u){throw u.code===12&&u.message==="sampleRate is not in range"?i():u}if(h===null)throw m();if(!Hr(s.latencyHint))throw new TypeError(`The provided value '${s.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(s.sampleRate!==void 0&&h.sampleRate!==s.sampleRate)throw i();super(h,2);const{latencyHint:p}=s,{sampleRate:t}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:p==="balanced"?512/t:p==="interactive"||p===void 0?256/t:p==="playback"?1024/t:Math.max(2,Math.min(128,Math.round(p*t/128)))*128/t,this._nativeAudioContext=h,r.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const u=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",u)};h.addEventListener("statechange",u)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw d()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),An(this)}))}createMediaElementSource(s){return new a(this,{mediaElement:s})}createMediaStreamDestination(){return new e(this)}createMediaStreamSource(s){return new l(this,{mediaStream:s})}createMediaStreamTrackSource(s){return new n(this,{mediaStreamTrack:s})}resume(){return this._state==="suspended"?new Promise((s,h)=>{const p=()=>{this._nativeAudioContext.removeEventListener("statechange",p),this._nativeAudioContext.state==="running"?s():this.resume().then(s,h)};this._nativeAudioContext.addEventListener("statechange",p)}):this._nativeAudioContext.resume().catch(s=>{throw s===void 0||s.code===15?d():s})}suspend(){return this._nativeAudioContext.suspend().catch(s=>{throw s===void 0?d():s})}},zr=(o,d,i,m,a,e,l,n)=>class extends o{constructor(c,s){const h=e(c),p=l(h),t=a(h,s,p),u=p?d(n):null;super(c,!1,t,u),this._isNodeOfNativeOfflineAudioContext=p,this._nativeAudioDestinationNode=t}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw m();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw i();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw m();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Xr=o=>{const d=new WeakMap,i=async(m,a)=>{const e=a.destination;return d.set(a,e),await o(m,a,e),e};return{render(m,a){const e=d.get(a);return e!==void 0?Promise.resolve(e):i(m,a)}}},Yr=(o,d,i,m,a,e,l,n)=>(r,c)=>{const s=c.listener,h=()=>{const g=new Float32Array(1),x=d(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),w=l(c);let C=!1,I=[0,0,-1,0,1,0],N=[0,0,0];const A=()=>{if(C)return;C=!0;const D=m(c,256,9,0);D.onaudioprocess=({inputBuffer:F})=>{const R=[e(F,g,0),e(F,g,1),e(F,g,2),e(F,g,3),e(F,g,4),e(F,g,5)];R.some((k,W)=>k!==I[W])&&(s.setOrientation(...R),I=R);const b=[e(F,g,6),e(F,g,7),e(F,g,8)];b.some((k,W)=>k!==N[W])&&(s.setPosition(...b),N=b)},x.connect(D)},P=D=>F=>{F!==I[D]&&(I[D]=F,s.setOrientation(...I))},E=D=>F=>{F!==N[D]&&(N[D]=F,s.setPosition(...N))},O=(D,F,R)=>{const b=i(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:F});b.connect(x,0,D),b.start(),Object.defineProperty(b.offset,"defaultValue",{get(){return F}});const k=o({context:r},w,b.offset,fe,pe);return n(k,"value",W=>()=>W.call(k),W=>_=>{try{W.call(k,_)}catch(H){if(H.code!==9)throw H}A(),w&&R(_)}),k.cancelAndHoldAtTime=(W=>w?()=>{throw a()}:(..._)=>{const H=W.apply(k,_);return A(),H})(k.cancelAndHoldAtTime),k.cancelScheduledValues=(W=>w?()=>{throw a()}:(..._)=>{const H=W.apply(k,_);return A(),H})(k.cancelScheduledValues),k.exponentialRampToValueAtTime=(W=>w?()=>{throw a()}:(..._)=>{const H=W.apply(k,_);return A(),H})(k.exponentialRampToValueAtTime),k.linearRampToValueAtTime=(W=>w?()=>{throw a()}:(..._)=>{const H=W.apply(k,_);return A(),H})(k.linearRampToValueAtTime),k.setTargetAtTime=(W=>w?()=>{throw a()}:(..._)=>{const H=W.apply(k,_);return A(),H})(k.setTargetAtTime),k.setValueAtTime=(W=>w?()=>{throw a()}:(..._)=>{const H=W.apply(k,_);return A(),H})(k.setValueAtTime),k.setValueCurveAtTime=(W=>w?()=>{throw a()}:(..._)=>{const H=W.apply(k,_);return A(),H})(k.setValueCurveAtTime),k};return{forwardX:O(0,0,P(0)),forwardY:O(1,0,P(1)),forwardZ:O(2,-1,P(2)),positionX:O(6,0,E(0)),positionY:O(7,0,E(1)),positionZ:O(8,0,E(2)),upX:O(3,0,P(3)),upY:O(4,1,P(4)),upZ:O(5,0,P(5))}},{forwardX:p,forwardY:t,forwardZ:u,positionX:f,positionY:v,positionZ:y,upX:S,upY:M,upZ:T}=s.forwardX===void 0?h():s;return{get forwardX(){return p},get forwardY(){return t},get forwardZ(){return u},get positionX(){return f},get positionY(){return v},get positionZ(){return y},get upX(){return S},get upY(){return M},get upZ(){return T}}},ht=o=>"context"in o,Ke=o=>ht(o[0]),ke=(o,d,i,m)=>{for(const a of o)if(i(a)){if(m)return!1;throw Error("The set contains at least one similar element.")}return o.add(d),!0},un=(o,d,[i,m],a)=>{ke(o,[d,i,m],e=>e[0]===d&&e[1]===i,a)},fn=(o,[d,i,m],a)=>{const e=o.get(d);e===void 0?o.set(d,new Set([[i,m]])):ke(e,[i,m],l=>l[0]===i,a)},Ue=o=>"inputs"in o,pt=(o,d,i,m)=>{if(Ue(d)){const a=d.inputs[m];return o.connect(a,i,0),[a,i,0]}return o.connect(d,i,m),[d,i,m]},Tn=(o,d,i)=>{for(const m of o)if(m[0]===d&&m[1]===i)return o.delete(m),m;return null},$r=(o,d,i)=>xt(o,m=>m[0]===d&&m[1]===i),En=(o,d)=>{if(!je(o).delete(d))throw new Error("Missing the expected event listener.")},On=(o,d,i)=>{const m=ye(o,d),a=xt(m,e=>e[0]===i);return m.size===0&&o.delete(d),a},mt=(o,d,i,m)=>{Ue(d)?o.disconnect(d.inputs[m],i,0):o.disconnect(d,i,m)},Q=o=>ye(Bt,o),Xe=o=>ye(Wt,o),Fe=o=>Dt.has(o),ct=o=>!_e.has(o),dn=(o,d)=>new Promise(i=>{if(d!==null)i(!0);else{const m=o.createScriptProcessor(256,1,1),a=o.createGain(),e=o.createBuffer(1,2,44100),l=e.getChannelData(0);l[0]=1,l[1]=1;const n=o.createBufferSource();n.buffer=e,n.loop=!0,n.connect(m).connect(o.destination),n.connect(a),n.disconnect(a),m.onaudioprocess=r=>{const c=r.inputBuffer.getChannelData(0);Array.prototype.some.call(c,s=>s===1)?i(!0):i(!1),n.stop(),m.onaudioprocess=null,n.disconnect(m),m.disconnect(o.destination)},n.start()}}),At=(o,d)=>{const i=new Map;for(const m of o)for(const a of m){const e=i.get(a);i.set(a,e===void 0?1:e+1)}i.forEach((m,a)=>d(a,m))},vt=o=>"context"in o,jr=o=>{const d=new Map;o.connect=(i=>(m,a=0,e=0)=>{const l=vt(m)?i(m,a,e):i(m,a),n=d.get(m);return n===void 0?d.set(m,[{input:e,output:a}]):n.every(r=>r.input!==e||r.output!==a)&&n.push({input:e,output:a}),l})(o.connect.bind(o)),o.disconnect=(i=>(m,a,e)=>{if(i.apply(o),m===void 0)d.clear();else if(typeof m=="number")for(const[l,n]of d){const r=n.filter(c=>c.output!==m);r.length===0?d.delete(l):d.set(l,r)}else if(d.has(m))if(a===void 0)d.delete(m);else{const l=d.get(m);if(l!==void 0){const n=l.filter(r=>r.output!==a&&(r.input!==e||e===void 0));n.length===0?d.delete(m):d.set(m,n)}}for(const[l,n]of d)n.forEach(r=>{vt(l)?o.connect(l,r.output,r.input):o.connect(l,r.output)})})(o.disconnect)},qr=(o,d,i,m)=>{const{activeInputs:a,passiveInputs:e}=Qe(d),{outputs:l}=de(o),n=je(o),r=c=>{const s=Q(o),h=Xe(d);if(c){const p=On(e,o,i);un(a,o,p,!1),!m&&!Fe(o)&&s.connect(h,i)}else{const p=$r(a,o,i);fn(e,p,!1),!m&&!Fe(o)&&s.disconnect(h,i)}};return ke(l,[d,i],c=>c[0]===d&&c[1]===i,!0)?(n.add(r),Pe(o)?un(a,o,[i,r],!0):fn(e,[o,i,r],!0),!0):!1},Qr=(o,d,i,m)=>{const{activeInputs:a,passiveInputs:e}=de(d),l=Tn(a[m],o,i);return l===null?[Mn(e,o,i,m)[2],!1]:[l[2],!0]},Kr=(o,d,i)=>{const{activeInputs:m,passiveInputs:a}=Qe(d),e=Tn(m,o,i);return e===null?[On(a,o,i)[1],!1]:[e[2],!0]},Vt=(o,d,i,m,a)=>{const[e,l]=Qr(o,i,m,a);if(e!==null&&(En(o,e),l&&!d&&!Fe(o)&&mt(Q(o),Q(i),m,a)),Pe(i)){const{activeInputs:n}=de(i);kt(i,n)}},Ut=(o,d,i,m)=>{const[a,e]=Kr(o,i,m);a!==null&&(En(o,a),e&&!d&&!Fe(o)&&Q(o).disconnect(Xe(i),m))},Jr=(o,d)=>{const i=de(o),m=[];for(const a of i.outputs)Ke(a)?Vt(o,d,...a):Ut(o,d,...a),m.push(a[0]);return i.outputs.clear(),m},eo=(o,d,i)=>{const m=de(o),a=[];for(const e of m.outputs)e[1]===i&&(Ke(e)?Vt(o,d,...e):Ut(o,d,...e),a.push(e[0]),m.outputs.delete(e));return a},to=(o,d,i,m,a)=>{const e=de(o);return Array.from(e.outputs).filter(l=>l[0]===i&&(m===void 0||l[1]===m)&&(a===void 0||l[2]===a)).map(l=>(Ke(l)?Vt(o,d,...l):Ut(o,d,...l),e.outputs.delete(l),l[0]))},no=(o,d,i,m,a,e,l,n,r,c,s,h,p,t,u,f)=>class extends c{constructor(y,S,M,T){super(M),this._context=y,this._nativeAudioNode=M;const g=s(y);h(g)&&i(dn,()=>dn(g,f))!==!0&&jr(M),Bt.set(this,M),Sn.set(this,new Set),y.state!=="closed"&&S&&Ve(this),o(this,T,M)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,S=0,M=0){if(S<0||S>=this._nativeAudioNode.numberOfOutputs)throw a();const T=s(this._context),g=u(T);if(p(y)||t(y))throw e();if(ht(y)){const C=Q(y);try{const N=pt(this._nativeAudioNode,C,S,M),A=ct(this);(g||A)&&this._nativeAudioNode.disconnect(...N),this.context.state!=="closed"&&!A&&ct(y)&&Ve(y)}catch(N){throw N.code===12?e():N}if(d(this,y,S,M,g)){const N=r([this],y);At(N,m(g))}return y}const x=Xe(y);if(x.name==="playbackRate"&&x.maxValue===1024)throw l();try{this._nativeAudioNode.connect(x,S),(g||ct(this))&&this._nativeAudioNode.disconnect(x,S)}catch(C){throw C.code===12?e():C}if(qr(this,y,S,g)){const C=r([this],y);At(C,m(g))}}disconnect(y,S,M){let T;const g=s(this._context),x=u(g);if(y===void 0)T=Jr(this,x);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw a();T=eo(this,x,y)}else{if(S!==void 0&&(S<0||S>=this.numberOfOutputs)||ht(y)&&M!==void 0&&(M<0||M>=y.numberOfInputs))throw a();if(T=to(this,x,y,S,M),T.length===0)throw e()}for(const w of T){const C=r([this],w);At(C,n)}}},ro=(o,d,i,m,a,e,l,n,r,c,s,h,p)=>(t,u,f,v=null,y=null)=>{const S=f.value,M=new hr(S),T=u?m(M):null,g={get defaultValue(){return S},get maxValue(){return v===null?f.maxValue:v},get minValue(){return y===null?f.minValue:y},get value(){return f.value},set value(x){f.value=x,g.setValueAtTime(x,t.context.currentTime)},cancelAndHoldAtTime(x){if(typeof f.cancelAndHoldAtTime=="function")T===null&&M.flush(t.context.currentTime),M.add(a(x)),f.cancelAndHoldAtTime(x);else{const w=Array.from(M).pop();T===null&&M.flush(t.context.currentTime),M.add(a(x));const C=Array.from(M).pop();f.cancelScheduledValues(x),w!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?f.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?f.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?f.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&f.setValueCurveAtTime(C.values,C.startTime,C.duration))}return g},cancelScheduledValues(x){return T===null&&M.flush(t.context.currentTime),M.add(e(x)),f.cancelScheduledValues(x),g},exponentialRampToValueAtTime(x,w){if(x===0)throw new RangeError;if(!Number.isFinite(w)||w<0)throw new RangeError;const C=t.context.currentTime;return T===null&&M.flush(C),Array.from(M).length===0&&(M.add(c(S,C)),f.setValueAtTime(S,C)),M.add(l(x,w)),f.exponentialRampToValueAtTime(x,w),g},linearRampToValueAtTime(x,w){const C=t.context.currentTime;return T===null&&M.flush(C),Array.from(M).length===0&&(M.add(c(S,C)),f.setValueAtTime(S,C)),M.add(n(x,w)),f.linearRampToValueAtTime(x,w),g},setTargetAtTime(x,w,C){return T===null&&M.flush(t.context.currentTime),M.add(r(x,w,C)),f.setTargetAtTime(x,w,C),g},setValueAtTime(x,w){return T===null&&M.flush(t.context.currentTime),M.add(c(x,w)),f.setValueAtTime(x,w),g},setValueCurveAtTime(x,w,C){const I=x instanceof Float32Array?x:new Float32Array(x);if(h!==null&&h.name==="webkitAudioContext"){const N=w+C,A=t.context.sampleRate,P=Math.ceil(w*A),E=Math.floor(N*A),O=E-P,D=new Float32Array(O);for(let R=0;R<O;R+=1){const b=(I.length-1)/C*((P+R)/A-w),k=Math.floor(b),W=Math.ceil(b);D[R]=k===W?I[k]:(1-(b-k))*I[k]+(1-(W-b))*I[W]}T===null&&M.flush(t.context.currentTime),M.add(s(D,w,C)),f.setValueCurveAtTime(D,w,C);const F=E/A;F<N&&p(g,D[D.length-1],F),p(g,I[I.length-1],N)}else T===null&&M.flush(t.context.currentTime),M.add(s(I,w,C)),f.setValueCurveAtTime(I,w,C);return g}};return i.set(g,f),d.set(g,t),o(g,T),g},oo=o=>({replay(d){for(const i of o)if(i.type==="exponentialRampToValue"){const{endTime:m,value:a}=i;d.exponentialRampToValueAtTime(a,m)}else if(i.type==="linearRampToValue"){const{endTime:m,value:a}=i;d.linearRampToValueAtTime(a,m)}else if(i.type==="setTarget"){const{startTime:m,target:a,timeConstant:e}=i;d.setTargetAtTime(a,m,e)}else if(i.type==="setValue"){const{startTime:m,value:a}=i;d.setValueAtTime(a,m)}else if(i.type==="setValueCurve"){const{duration:m,startTime:a,values:e}=i;d.setValueCurveAtTime(e,a,m)}else throw new Error("Can't apply an unknown automation.")}});class Dn{constructor(d){this._map=new Map(d)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(d,i=null){return this._map.forEach((m,a)=>d.call(i,m,a,this))}get(d){return this._map.get(d)}has(d){return this._map.has(d)}keys(){return this._map.keys()}values(){return this._map.values()}}const so={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},ao=(o,d,i,m,a,e,l,n,r,c,s,h,p,t)=>class extends d{constructor(f,v,y){var S;const M=n(f),T=r(M),g=s({...so,...y});p(g);const x=Rt.get(M),w=x?.get(v),C=T||M.state!=="closed"?M:(S=l(M))!==null&&S!==void 0?S:M,I=a(C,T?null:f.baseLatency,c,v,w,g),N=T?m(v,g,w):null;super(f,!0,I,N);const A=[];I.parameters.forEach((E,O)=>{const D=i(this,T,E);A.push([O,D])}),this._nativeAudioWorkletNode=I,this._onprocessorerror=null,this._parameters=new Dn(A),T&&o(M,this);const{activeInputs:P}=e(this);h(I,P)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(f){const v=typeof f=="function"?t(this,f):null;this._nativeAudioWorkletNode.onprocessorerror=v;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===v?f:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function gt(o,d,i,m,a){if(typeof o.copyFromChannel=="function")d[i].byteLength===0&&(d[i]=new Float32Array(128)),o.copyFromChannel(d[i],m,a);else{const e=o.getChannelData(m);if(d[i].byteLength===0)d[i]=e.slice(a,a+128);else{const l=new Float32Array(e.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);d[i].set(l)}}}const Rn=(o,d,i,m,a)=>{typeof o.copyToChannel=="function"?d[i].byteLength!==0&&o.copyToChannel(d[i],m,a):d[i].byteLength!==0&&o.getChannelData(m).set(d[i],a)},yt=(o,d)=>{const i=[];for(let m=0;m<o;m+=1){const a=[],e=typeof d=="number"?d:d[m];for(let l=0;l<e;l+=1)a.push(new Float32Array(128));i.push(a)}return i},io=(o,d)=>{const i=ye(Ft,o),m=Q(d);return ye(i,m)},co=async(o,d,i,m,a,e,l)=>{const n=d===null?Math.ceil(o.context.length/128)*128:d.length,r=m.channelCount*m.numberOfInputs,c=a.reduce((v,y)=>v+y,0),s=c===0?null:i.createBuffer(c,n,i.sampleRate);if(e===void 0)throw new Error("Missing the processor constructor.");const h=de(o),p=await io(i,o),t=yt(m.numberOfInputs,m.channelCount),u=yt(m.numberOfOutputs,a),f=Array.from(o.parameters.keys()).reduce((v,y)=>({...v,[y]:new Float32Array(128)}),{});for(let v=0;v<n;v+=128){if(m.numberOfInputs>0&&d!==null)for(let y=0;y<m.numberOfInputs;y+=1)for(let S=0;S<m.channelCount;S+=1)gt(d,t[y],S,S,v);e.parameterDescriptors!==void 0&&d!==null&&e.parameterDescriptors.forEach(({name:y},S)=>{gt(d,f,y,r+S,v)});for(let y=0;y<m.numberOfInputs;y+=1)for(let S=0;S<a[y];S+=1)u[y][S].byteLength===0&&(u[y][S]=new Float32Array(128));try{const y=t.map((M,T)=>h.activeInputs[T].size===0?[]:M),S=l(v/i.sampleRate,i.sampleRate,()=>p.process(y,u,f));if(s!==null)for(let M=0,T=0;M<m.numberOfOutputs;M+=1){for(let g=0;g<a[M];g+=1)Rn(s,u[M],g,T+g,v);T+=a[M]}if(!S)break}catch(y){o.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return s},lo=(o,d,i,m,a,e,l,n,r,c,s,h,p,t,u,f)=>(v,y,S)=>{const M=new WeakMap;let T=null;const g=async(x,w)=>{let C=s(x),I=null;const N=ue(C,w),A=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(h===null){const P=A.reduce((F,R)=>F+R,0),E=a(w,{channelCount:Math.max(1,P),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,P)}),O=[];for(let F=0;F<x.numberOfOutputs;F+=1)O.push(m(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[F]}));const D=l(w,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});D.connect=d.bind(null,O),D.disconnect=r.bind(null,O),I=[E,O,D]}else N||(C=new h(w,v));if(M.set(w,I===null?C:I[2]),I!==null){if(T===null){if(S===void 0)throw new Error("Missing the processor constructor.");if(p===null)throw new Error("Missing the native OfflineAudioContext constructor.");const R=x.channelCount*x.numberOfInputs,b=S.parameterDescriptors===void 0?0:S.parameterDescriptors.length,k=R+b;T=co(x,k===0?null:await(async()=>{const _=new p(k,Math.ceil(x.context.length/128)*128,w.sampleRate),H=[],z=[];for(let V=0;V<y.numberOfInputs;V+=1)H.push(l(_,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),z.push(a(_,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const J=await Promise.all(Array.from(x.parameters.values()).map(async V=>{const Y=e(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:V.value});return await t(_,V,Y.offset),Y})),G=m(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+b)});for(let V=0;V<y.numberOfInputs;V+=1){H[V].connect(z[V]);for(let Y=0;Y<y.channelCount;Y+=1)z[V].connect(G,Y,V*y.channelCount+Y)}for(const[V,Y]of J.entries())Y.connect(G,0,R+V),Y.start(0);return G.connect(_.destination),await Promise.all(H.map(V=>u(x,_,V))),f(_)})(),w,y,A,S,c)}const P=await T,E=i(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[O,D,F]=I;P!==null&&(E.buffer=P,E.start(0)),E.connect(O);for(let R=0,b=0;R<x.numberOfOutputs;R+=1){const k=D[R];for(let W=0;W<A[R];W+=1)O.connect(k,b+W,W);b+=A[R]}return F}if(N)for(const[P,E]of x.parameters.entries())await o(w,E,C.parameters.get(P));else for(const[P,E]of x.parameters.entries())await t(w,E,C.parameters.get(P));return await u(x,w,C),C};return{render(x,w){n(w,x);const C=M.get(w);return C!==void 0?Promise.resolve(C):g(x,w)}}},uo=(o,d,i,m,a,e,l,n,r,c,s,h,p,t,u,f,v,y,S,M)=>class extends u{constructor(g,x){super(g,x),this._nativeContext=g,this._audioWorklet=o===void 0?void 0:{addModule:(w,C)=>o(this,w,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new d(this)}createBiquadFilter(){return new a(this)}createBuffer(g,x,w){return new i({length:x,numberOfChannels:g,sampleRate:w})}createBufferSource(){return new m(this)}createChannelMerger(g=6){return new e(this,{numberOfInputs:g})}createChannelSplitter(g=6){return new l(this,{numberOfOutputs:g})}createConstantSource(){return new n(this)}createConvolver(){return new r(this)}createDelay(g=1){return new s(this,{maxDelayTime:g})}createDynamicsCompressor(){return new h(this)}createGain(){return new p(this)}createIIRFilter(g,x){return new t(this,{feedback:x,feedforward:g})}createOscillator(){return new f(this)}createPanner(){return new v(this)}createPeriodicWave(g,x,w={disableNormalization:!1}){return new y(this,{...w,imag:x,real:g})}createStereoPanner(){return new S(this)}createWaveShaper(){return new M(this)}decodeAudioData(g,x,w){return c(this._nativeContext,g).then(C=>(typeof x=="function"&&x(C),C),C=>{throw typeof w=="function"&&w(C),C})}},fo={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},ho=(o,d,i,m,a,e,l,n)=>class extends o{constructor(c,s){const h=e(c),p={...fo,...s},t=a(h,p),u=l(h),f=u?i():null;super(c,!1,t,f),this._Q=d(this,u,t.Q,fe,pe),this._detune=d(this,u,t.detune,1200*Math.log2(fe),-1200*Math.log2(fe)),this._frequency=d(this,u,t.frequency,c.sampleRate/2,0),this._gain=d(this,u,t.gain,40*Math.log10(fe),pe),this._nativeBiquadFilterNode=t,n(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,s,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,s,h)}catch(p){throw p.code===11?m():p}if(c.length!==s.length||s.length!==h.length)throw m()}},po=(o,d,i,m,a)=>()=>{const e=new WeakMap,l=async(n,r)=>{let c=i(n);const s=ue(c,r);if(!s){const h={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=d(r,h)}return e.set(r,c),s?(await o(r,n.Q,c.Q),await o(r,n.detune,c.detune),await o(r,n.frequency,c.frequency),await o(r,n.gain,c.gain)):(await m(r,n.Q,c.Q),await m(r,n.detune,c.detune),await m(r,n.frequency,c.frequency),await m(r,n.gain,c.gain)),await a(n,r,c),c};return{render(n,r){const c=e.get(r);return c!==void 0?Promise.resolve(c):l(n,r)}}},mo=(o,d)=>(i,m)=>{const a=d.get(i);if(a!==void 0)return a;const e=o.get(i);if(e!==void 0)return e;try{const l=m();return l instanceof Promise?(o.set(i,l),l.catch(()=>!1).then(n=>(o.delete(i),d.set(i,n),n))):(d.set(i,l),l)}catch{return d.set(i,!1),!1}},vo={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},go=(o,d,i,m,a)=>class extends o{constructor(l,n){const r=m(l),c={...vo,...n},s=i(r,c),h=a(r)?d():null;super(l,!1,s,h)}},yo=(o,d,i)=>()=>{const m=new WeakMap,a=async(e,l)=>{let n=d(e);if(!ue(n,l)){const c={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,numberOfInputs:n.numberOfInputs};n=o(l,c)}return m.set(l,n),await i(e,l,n),n};return{render(e,l){const n=m.get(l);return n!==void 0?Promise.resolve(n):a(e,l)}}},Co={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},xo=(o,d,i,m,a,e)=>class extends o{constructor(n,r){const c=m(n),s=e({...Co,...r}),h=i(c,s),p=a(c)?d():null;super(n,!1,h,p)}},wo=(o,d,i)=>()=>{const m=new WeakMap,a=async(e,l)=>{let n=d(e);if(!ue(n,l)){const c={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,numberOfOutputs:n.numberOfOutputs};n=o(l,c)}return m.set(l,n),await i(e,l,n),n};return{render(e,l){const n=m.get(l);return n!==void 0?Promise.resolve(n):a(e,l)}}},So=o=>(d,i,m)=>o(i,d,m),No=o=>(d,i,m=0,a=0)=>{const e=d[m];if(e===void 0)throw o();return vt(i)?e.connect(i,0,a):e.connect(i,0)},Mo=o=>(d,i)=>{const m=o(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=d.createBuffer(1,2,44100);return m.buffer=a,m.loop=!0,m.connect(i),m.start(),()=>{m.stop(),m.disconnect(i)}},Io={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Po=(o,d,i,m,a,e,l)=>class extends o{constructor(r,c){const s=a(r),h={...Io,...c},p=m(s,h),t=e(s),u=t?i():null;super(r,!1,p,u),this._constantSourceNodeRenderer=u,this._nativeConstantSourceNode=p,this._offset=d(this,t,p.offset,fe,pe),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(r){const c=typeof r=="function"?l(this,r):null;this._nativeConstantSourceNode.onended=c;const s=this._nativeConstantSourceNode.onended;this._onended=s!==null&&s===c?r:s}start(r=0){if(this._nativeConstantSourceNode.start(r),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=r),this.context.state!=="closed"){Ve(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Pe(this)&&qe(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(r=0){this._nativeConstantSourceNode.stop(r),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=r)}},Ao=(o,d,i,m,a)=>()=>{const e=new WeakMap;let l=null,n=null;const r=async(c,s)=>{let h=i(c);const p=ue(h,s);if(!p){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=d(s,t),l!==null&&h.start(l),n!==null&&h.stop(n)}return e.set(s,h),p?await o(s,c.offset,h.offset):await m(s,c.offset,h.offset),await a(c,s,h),h};return{set start(c){l=c},set stop(c){n=c},render(c,s){const h=e.get(s);return h!==void 0?Promise.resolve(h):r(c,s)}}},To=o=>d=>(o[0]=d,o[0]),Eo={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Oo=(o,d,i,m,a,e)=>class extends o{constructor(n,r){const c=m(n),s={...Eo,...r},h=i(c,s),t=a(c)?d():null;super(n,!1,h,t),this._isBufferNullified=!1,this._nativeConvolverNode=h,s.buffer!==null&&e(this,s.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(n){if(this._nativeConvolverNode.buffer=n,n===null&&this._nativeConvolverNode.buffer!==null){const r=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=r.createBuffer(1,1,r.sampleRate),this._isBufferNullified=!0,e(this,0)}else this._isBufferNullified=!1,e(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(n){this._nativeConvolverNode.normalize=n}},Do=(o,d,i)=>()=>{const m=new WeakMap,a=async(e,l)=>{let n=d(e);if(!ue(n,l)){const c={buffer:n.buffer,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,disableNormalization:!n.normalize};n=o(l,c)}return m.set(l,n),Ue(n)?await i(e,l,n.inputs[0]):await i(e,l,n),n};return{render(e,l){const n=m.get(l);return n!==void 0?Promise.resolve(n):a(e,l)}}},Ro=(o,d)=>(i,m,a)=>{if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new d(i,m,a)}catch(e){throw e.name==="SyntaxError"?o():e}},Fo=()=>new DOMException("","DataCloneError"),hn=o=>{const{port1:d,port2:i}=new MessageChannel;return new Promise(m=>{const a=()=>{i.onmessage=null,d.close(),i.close(),m()};i.onmessage=()=>a();try{d.postMessage(o,[o])}catch{}finally{a()}})},ko=(o,d,i,m,a,e,l,n,r,c,s)=>(h,p)=>{const t=l(h)?h:e(h);if(a.has(p)){const u=i();return Promise.reject(u)}try{a.add(p)}catch{}return d(r,()=>r(t))?t.decodeAudioData(p).then(u=>(hn(p).catch(()=>{}),d(n,()=>n(u))||s(u),o.add(u),u)):new Promise((u,f)=>{const v=async()=>{try{await hn(p)}catch{}},y=S=>{f(S),v()};try{t.decodeAudioData(p,S=>{typeof S.copyFromChannel!="function"&&(c(S),_t(S)),o.add(S),v().then(()=>u(S))},S=>{y(S===null?m():S)})}catch(S){y(S)}})},bo=(o,d,i,m,a,e,l,n)=>(r,c)=>{const s=d.get(r);if(s===void 0)throw new Error("Missing the expected cycle count.");const h=e(r.context),p=n(h);if(s===c){if(d.delete(r),!p&&l(r)){const t=m(r),{outputs:u}=i(r);for(const f of u)if(Ke(f)){const v=m(f[0]);o(t,v,f[1],f[2])}else{const v=a(f[0]);t.connect(v,f[1])}}}else d.set(r,s-c)},Lo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Bo=(o,d,i,m,a,e,l)=>class extends o{constructor(r,c){const s=a(r),h={...Lo,...c},p=m(s,h),t=e(s),u=t?i(h.maxDelayTime):null;super(r,!1,p,u),this._delayTime=d(this,t,p.delayTime),l(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},Wo=(o,d,i,m,a)=>e=>{const l=new WeakMap,n=async(r,c)=>{let s=i(r);const h=ue(s,c);if(!h){const p={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,delayTime:s.delayTime.value,maxDelayTime:e};s=d(c,p)}return l.set(c,s),h?await o(c,r.delayTime,s.delayTime):await m(c,r.delayTime,s.delayTime),await a(r,c,s),s};return{render(r,c){const s=l.get(c);return s!==void 0?Promise.resolve(s):n(r,c)}}},_o=o=>(d,i,m,a)=>o(d[a],e=>e[0]===i&&e[1]===m),Vo=o=>(d,i)=>{o(d).delete(i)},Uo=o=>"delayTime"in o,Go=(o,d,i)=>function m(a,e){const l=ht(e)?e:i(o,e);if(Uo(l))return[];if(a[0]===l)return[a];if(a.includes(l))return[];const{outputs:n}=d(l);return Array.from(n).map(r=>m([...a,l],r[0])).reduce((r,c)=>r.concat(c),[])},it=(o,d,i)=>{const m=d[i];if(m===void 0)throw o();return m},Ho=o=>(d,i=void 0,m=void 0,a=0)=>i===void 0?d.forEach(e=>e.disconnect()):typeof i=="number"?it(o,d,i).disconnect():vt(i)?m===void 0?d.forEach(e=>e.disconnect(i)):a===void 0?it(o,d,m).disconnect(i,0):it(o,d,m).disconnect(i,0,a):m===void 0?d.forEach(e=>e.disconnect(i)):it(o,d,m).disconnect(i,0),Zo={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},zo=(o,d,i,m,a,e,l,n)=>class extends o{constructor(c,s){const h=e(c),p={...Zo,...s},t=m(h,p),u=l(h),f=u?i():null;super(c,!1,t,f),this._attack=d(this,u,t.attack),this._knee=d(this,u,t.knee),this._nativeDynamicsCompressorNode=t,this._ratio=d(this,u,t.ratio),this._release=d(this,u,t.release),this._threshold=d(this,u,t.threshold),n(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const s=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=s,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const s=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=s,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Xo=(o,d,i,m,a)=>()=>{const e=new WeakMap,l=async(n,r)=>{let c=i(n);const s=ue(c,r);if(!s){const h={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=d(r,h)}return e.set(r,c),s?(await o(r,n.attack,c.attack),await o(r,n.knee,c.knee),await o(r,n.ratio,c.ratio),await o(r,n.release,c.release),await o(r,n.threshold,c.threshold)):(await m(r,n.attack,c.attack),await m(r,n.knee,c.knee),await m(r,n.ratio,c.ratio),await m(r,n.release,c.release),await m(r,n.threshold,c.threshold)),await a(n,r,c),c};return{render(n,r){const c=e.get(r);return c!==void 0?Promise.resolve(c):l(n,r)}}},Yo=()=>new DOMException("","EncodingError"),$o=o=>d=>new Promise((i,m)=>{if(o===null){m(new SyntaxError);return}const a=o.document.head;if(a===null)m(new SyntaxError);else{const e=o.document.createElement("script"),l=new Blob([d],{type:"application/javascript"}),n=URL.createObjectURL(l),r=o.onerror,c=()=>{o.onerror=r,URL.revokeObjectURL(n)};o.onerror=(s,h,p,t,u)=>{if(h===n||h===o.location.href&&p===1&&t===1)return c(),m(u),!1;if(r!==null)return r(s,h,p,t,u)},e.onerror=()=>{c(),m(new SyntaxError)},e.onload=()=>{c(),i()},e.src=n,e.type="module",a.appendChild(e)}}),jo=o=>class{constructor(i){this._nativeEventTarget=i,this._listeners=new WeakMap}addEventListener(i,m,a){if(m!==null){let e=this._listeners.get(m);e===void 0&&(e=o(this,m),typeof m=="function"&&this._listeners.set(m,e)),this._nativeEventTarget.addEventListener(i,e,a)}}dispatchEvent(i){return this._nativeEventTarget.dispatchEvent(i)}removeEventListener(i,m,a){const e=m===null?void 0:this._listeners.get(m);this._nativeEventTarget.removeEventListener(i,e===void 0?null:e,a)}},qo=o=>(d,i,m)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(d*i)}},currentTime:{configurable:!0,get(){return d}}});try{return m()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}},Qo=o=>async d=>{try{const i=await fetch(d);if(i.ok)return[await i.text(),i.url]}catch{}throw o()},Ko={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Jo=(o,d,i,m,a,e)=>class extends o{constructor(n,r){const c=a(n),s={...Ko,...r},h=m(c,s),p=e(c),t=p?i():null;super(n,!1,h,t),this._gain=d(this,p,h.gain,fe,pe)}get gain(){return this._gain}},es=(o,d,i,m,a)=>()=>{const e=new WeakMap,l=async(n,r)=>{let c=i(n);const s=ue(c,r);if(!s){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=d(r,h)}return e.set(r,c),s?await o(r,n.gain,c.gain):await m(r,n.gain,c.gain),await a(n,r,c),c};return{render(n,r){const c=e.get(r);return c!==void 0?Promise.resolve(c):l(n,r)}}},ts=(o,d)=>i=>d(o,i),ns=o=>d=>{const i=o(d);if(i.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return i.renderer},rs=o=>d=>{var i;return(i=o.get(d))!==null&&i!==void 0?i:0},os=o=>d=>{const i=o(d);if(i.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return i.renderer},ss=o=>d=>o.get(d),ae=()=>new DOMException("","InvalidStateError"),as=o=>d=>{const i=o.get(d);if(i===void 0)throw ae();return i},is=(o,d)=>i=>{let m=o.get(i);if(m!==void 0)return m;if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");return m=new d(1,1,44100),o.set(i,m),m},cs=o=>d=>{const i=o.get(d);if(i===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return i},wt=()=>new DOMException("","InvalidAccessError"),ls=o=>{o.getFrequencyResponse=(d=>(i,m,a)=>{if(i.length!==m.length||m.length!==a.length)throw wt();return d.call(o,i,m,a)})(o.getFrequencyResponse)},us={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},fs=(o,d,i,m,a,e)=>class extends o{constructor(n,r){const c=m(n),s=a(c),h={...us,...r},p=d(c,s?null:n.baseLatency,h),t=s?i(h.feedback,h.feedforward):null;super(n,!1,p,t),ls(p),this._nativeIIRFilterNode=p,e(this,1)}getFrequencyResponse(n,r,c){return this._nativeIIRFilterNode.getFrequencyResponse(n,r,c)}},Fn=(o,d,i,m,a,e,l,n,r,c,s)=>{const h=c.length;let p=n;for(let t=0;t<h;t+=1){let u=i[0]*c[t];for(let f=1;f<a;f+=1){const v=p-f&r-1;u+=i[f]*e[v],u-=o[f]*l[v]}for(let f=a;f<m;f+=1)u+=i[f]*e[p-f&r-1];for(let f=a;f<d;f+=1)u-=o[f]*l[p-f&r-1];e[p]=c[t],l[p]=u,p=p+1&r-1,s[t]=u}return p},ds=(o,d,i,m)=>{const a=i instanceof Float64Array?i:new Float64Array(i),e=m instanceof Float64Array?m:new Float64Array(m),l=a.length,n=e.length,r=Math.min(l,n);if(a[0]!==1){for(let u=0;u<l;u+=1)e[u]/=a[0];for(let u=1;u<n;u+=1)a[u]/=a[0]}const c=32,s=new Float32Array(c),h=new Float32Array(c),p=d.createBuffer(o.numberOfChannels,o.length,o.sampleRate),t=o.numberOfChannels;for(let u=0;u<t;u+=1){const f=o.getChannelData(u),v=p.getChannelData(u);s.fill(0),h.fill(0),Fn(a,l,e,n,r,s,h,0,c,f,v)}return p},hs=(o,d,i,m,a)=>(e,l)=>{const n=new WeakMap;let r=null;const c=async(s,h)=>{let p=null,t=d(s);const u=ue(t,h);if(h.createIIRFilter===void 0?p=o(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):u||(t=h.createIIRFilter(l,e)),n.set(h,p===null?t:p),p!==null){if(r===null){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const v=new i(s.context.destination.channelCount,s.context.length,h.sampleRate);r=(async()=>{await m(s,v,v.destination);const y=await a(v);return ds(y,h,e,l)})()}const f=await r;return p.buffer=f,p.start(0),p}return await m(s,h,t),t};return{render(s,h){const p=n.get(h);return p!==void 0?Promise.resolve(p):c(s,h)}}},ps=(o,d,i,m,a,e)=>l=>(n,r)=>{const c=o.get(n);if(c===void 0){if(!l&&e(n)){const s=m(n),{outputs:h}=i(n);for(const p of h)if(Ke(p)){const t=m(p[0]);d(s,t,p[1],p[2])}else{const t=a(p[0]);s.disconnect(t,p[1])}}o.set(n,r)}else o.set(n,c+r)},ms=(o,d)=>i=>{const m=o.get(i);return d(m)||d(i)},vs=(o,d)=>i=>o.has(i)||d(i),gs=(o,d)=>i=>o.has(i)||d(i),ys=(o,d)=>i=>{const m=o.get(i);return d(m)||d(i)},Cs=o=>d=>o!==null&&d instanceof o,xs=o=>d=>o!==null&&typeof o.AudioNode=="function"&&d instanceof o.AudioNode,ws=o=>d=>o!==null&&typeof o.AudioParam=="function"&&d instanceof o.AudioParam,Ss=(o,d)=>i=>o(i)||d(i),Ns=o=>d=>o!==null&&d instanceof o,Ms=o=>o!==null&&o.isSecureContext,Is=(o,d,i,m)=>class extends o{constructor(e,l){const n=i(e),r=d(n,l);if(m(n))throw TypeError();super(e,!0,r,null),this._nativeMediaElementAudioSourceNode=r}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Ps={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},As=(o,d,i,m)=>class extends o{constructor(e,l){const n=i(e);if(m(n))throw new TypeError;const r={...Ps,...l},c=d(n,r);super(e,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Ts=(o,d,i,m)=>class extends o{constructor(e,l){const n=i(e),r=d(n,l);if(m(n))throw new TypeError;super(e,!0,r,null),this._nativeMediaStreamAudioSourceNode=r}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Es=(o,d,i)=>class extends o{constructor(a,e){const l=i(a),n=d(l,e);super(a,!0,n,null)}},Os=(o,d,i,m,a,e)=>class extends i{constructor(n,r){super(n),this._nativeContext=n,Ct.set(this,n),m(n)&&a.set(n,new Set),this._destination=new o(this,r),this._listener=d(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(n){const r=typeof n=="function"?e(this,n):null;this._nativeContext.onstatechange=r;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===r?n:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Ye=o=>{const d=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const i=o.decodeAudioData(d.buffer,()=>{});return i===void 0?!1:(i.catch(()=>{}),!0)}catch{}return!1},Ds=(o,d)=>(i,m,a)=>{const e=new Set;return i.connect=(l=>(n,r=0,c=0)=>{const s=e.size===0;if(d(n))return l.call(i,n,r,c),o(e,[n,r,c],h=>h[0]===n&&h[1]===r&&h[2]===c,!0),s&&m(),n;l.call(i,n,r),o(e,[n,r],h=>h[0]===n&&h[1]===r,!0),s&&m()})(i.connect),i.disconnect=(l=>(n,r,c)=>{const s=e.size>0;if(n===void 0)l.apply(i),e.clear();else if(typeof n=="number"){l.call(i,n);for(const p of e)p[1]===n&&e.delete(p)}else{d(n)?l.call(i,n,r,c):l.call(i,n,r);for(const p of e)p[0]===n&&(r===void 0||p[1]===r)&&(c===void 0||p[2]===c)&&e.delete(p)}const h=e.size===0;s&&h&&a()})(i.disconnect),i},K=(o,d,i)=>{const m=d[i];m!==void 0&&m!==o[i]&&(o[i]=m)},oe=(o,d)=>{K(o,d,"channelCount"),K(o,d,"channelCountMode"),K(o,d,"channelInterpretation")},pn=o=>typeof o.getFloatTimeDomainData=="function",Rs=o=>{o.getFloatTimeDomainData=d=>{const i=new Uint8Array(d.length);o.getByteTimeDomainData(i);const m=Math.max(i.length,o.fftSize);for(let a=0;a<m;a+=1)d[a]=(i[a]-128)*.0078125;return d}},Fs=(o,d)=>(i,m)=>{const a=i.createAnalyser();if(oe(a,m),!(m.maxDecibels>m.minDecibels))throw d();return K(a,m,"fftSize"),K(a,m,"maxDecibels"),K(a,m,"minDecibels"),K(a,m,"smoothingTimeConstant"),o(pn,()=>pn(a))||Rs(a),a},ks=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null,te=(o,d,i)=>{const m=d[i];m!==void 0&&m!==o[i].value&&(o[i].value=m)},bs=o=>{o.start=(d=>{let i=!1;return(m=0,a=0,e)=>{if(i)throw ae();d.call(o,m,a,e),i=!0}})(o.start)},Gt=o=>{o.start=(d=>(i=0,m=0,a)=>{if(typeof a=="number"&&a<0||m<0||i<0)throw new RangeError("The parameters can't be negative.");d.call(o,i,m,a)})(o.start)},Ht=o=>{o.stop=(d=>(i=0)=>{if(i<0)throw new RangeError("The parameter can't be negative.");d.call(o,i)})(o.stop)},Ls=(o,d,i,m,a,e,l,n,r,c,s)=>(h,p)=>{const t=h.createBufferSource();return oe(t,p),te(t,p,"playbackRate"),K(t,p,"buffer"),K(t,p,"loop"),K(t,p,"loopEnd"),K(t,p,"loopStart"),d(i,()=>i(h))||bs(t),d(m,()=>m(h))||r(t),d(a,()=>a(h))||c(t,h),d(e,()=>e(h))||Gt(t),d(l,()=>l(h))||s(t,h),d(n,()=>n(h))||Ht(t),o(h,t),t},Bs=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null,Ws=(o,d)=>(i,m,a)=>{const e=i.destination;if(e.channelCount!==m)try{e.channelCount=m}catch{}a&&e.channelCountMode!=="explicit"&&(e.channelCountMode="explicit"),e.maxChannelCount===0&&Object.defineProperty(e,"maxChannelCount",{value:m});const l=o(i,{channelCount:m,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation,gain:1});return d(l,"channelCount",n=>()=>n.call(l),n=>r=>{n.call(l,r);try{e.channelCount=r}catch(c){if(r>e.maxChannelCount)throw c}}),d(l,"channelCountMode",n=>()=>n.call(l),n=>r=>{n.call(l,r),e.channelCountMode=r}),d(l,"channelInterpretation",n=>()=>n.call(l),n=>r=>{n.call(l,r),e.channelInterpretation=r}),Object.defineProperty(l,"maxChannelCount",{get:()=>e.maxChannelCount}),l.connect(e),l},_s=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null,Vs=o=>{const{port1:d}=new MessageChannel;try{d.postMessage(o)}finally{d.close()}},Us=(o,d,i,m,a)=>(e,l,n,r,c,s)=>{if(n!==null)try{const h=new n(e,r,s),p=new Map;let t=null;if(Object.defineProperties(h,{channelCount:{get:()=>s.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>t,set:u=>{typeof t=="function"&&h.removeEventListener("processorerror",t),t=typeof u=="function"?u:null,typeof t=="function"&&h.addEventListener("processorerror",t)}}}),h.addEventListener=(u=>(...f)=>{if(f[0]==="processorerror"){const v=typeof f[1]=="function"?f[1]:typeof f[1]=="object"&&f[1]!==null&&typeof f[1].handleEvent=="function"?f[1].handleEvent:null;if(v!==null){const y=p.get(f[1]);y!==void 0?f[1]=y:(f[1]=S=>{S.type==="error"?(Object.defineProperties(S,{type:{value:"processorerror"}}),v(S)):v(new ErrorEvent(f[0],{...S}))},p.set(v,f[1]))}}return u.call(h,"error",f[1],f[2]),u.call(h,...f)})(h.addEventListener),h.removeEventListener=(u=>(...f)=>{if(f[0]==="processorerror"){const v=p.get(f[1]);v!==void 0&&(p.delete(f[1]),f[1]=v)}return u.call(h,"error",f[1],f[2]),u.call(h,f[0],f[1],f[2])})(h.removeEventListener),s.numberOfOutputs!==0){const u=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(u).connect(e.destination),a(h,()=>u.disconnect(),()=>u.connect(e.destination))}return h}catch(h){throw h.code===11?m():h}if(c===void 0)throw m();return Vs(s),d(e,l,c,s)},kn=(o,d)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*d))))),Gs=o=>new Promise((d,i)=>{const{port1:m,port2:a}=new MessageChannel;m.onmessage=({data:e})=>{m.close(),a.close(),d(e)},m.onmessageerror=({data:e})=>{m.close(),a.close(),i(e)},a.postMessage(o)}),Hs=async(o,d)=>{const i=await Gs(d);return new o(i)},Zs=(o,d,i,m)=>{let a=Ft.get(o);a===void 0&&(a=new WeakMap,Ft.set(o,a));const e=Hs(i,m);return a.set(d,e),e},zs=(o,d,i,m,a,e,l,n,r,c,s,h,p)=>(t,u,f,v)=>{if(v.numberOfInputs===0&&v.numberOfOutputs===0)throw r();const y=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(y.some(B=>B<1))throw r();if(y.length!==v.numberOfOutputs)throw d();if(v.channelCountMode!=="explicit")throw r();const S=v.channelCount*v.numberOfInputs,M=y.reduce((B,U)=>B+U,0),T=f.parameterDescriptors===void 0?0:f.parameterDescriptors.length;if(S+T>6||M>6)throw r();const g=new MessageChannel,x=[],w=[];for(let B=0;B<v.numberOfInputs;B+=1)x.push(l(t,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),w.push(a(t,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const C=[];if(f.parameterDescriptors!==void 0)for(const{defaultValue:B,maxValue:U,minValue:ee,name:$}of f.parameterDescriptors){const Z=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:v.parameterData[$]!==void 0?v.parameterData[$]:B===void 0?0:B});Object.defineProperties(Z.offset,{defaultValue:{get:()=>B===void 0?0:B},maxValue:{get:()=>U===void 0?fe:U},minValue:{get:()=>ee===void 0?pe:ee}}),C.push(Z)}const I=m(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,S+T)}),N=kn(u,t.sampleRate),A=n(t,N,S+T,Math.max(1,M)),P=a(t,{channelCount:Math.max(1,M),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,M)}),E=[];for(let B=0;B<v.numberOfOutputs;B+=1)E.push(m(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[B]}));for(let B=0;B<v.numberOfInputs;B+=1){x[B].connect(w[B]);for(let U=0;U<v.channelCount;U+=1)w[B].connect(I,U,B*v.channelCount+U)}const O=new Dn(f.parameterDescriptors===void 0?[]:f.parameterDescriptors.map(({name:B},U)=>{const ee=C[U];return ee.connect(I,0,S+U),ee.start(0),[B,ee.offset]}));I.connect(A);let D=v.channelInterpretation,F=null;const R=v.numberOfOutputs===0?[A]:E,b={get bufferSize(){return N},get channelCount(){return v.channelCount},set channelCount(B){throw i()},get channelCountMode(){return v.channelCountMode},set channelCountMode(B){throw i()},get channelInterpretation(){return D},set channelInterpretation(B){for(const U of x)U.channelInterpretation=B;D=B},get context(){return A.context},get inputs(){return x},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return F},set onprocessorerror(B){typeof F=="function"&&b.removeEventListener("processorerror",F),F=typeof B=="function"?B:null,typeof F=="function"&&b.addEventListener("processorerror",F)},get parameters(){return O},get port(){return g.port2},addEventListener(...B){return A.addEventListener(B[0],B[1],B[2])},connect:o.bind(null,R),disconnect:c.bind(null,R),dispatchEvent(...B){return A.dispatchEvent(B[0])},removeEventListener(...B){return A.removeEventListener(B[0],B[1],B[2])}},k=new Map;g.port1.addEventListener=(B=>(...U)=>{if(U[0]==="message"){const ee=typeof U[1]=="function"?U[1]:typeof U[1]=="object"&&U[1]!==null&&typeof U[1].handleEvent=="function"?U[1].handleEvent:null;if(ee!==null){const $=k.get(U[1]);$!==void 0?U[1]=$:(U[1]=Z=>{s(t.currentTime,t.sampleRate,()=>ee(Z))},k.set(ee,U[1]))}}return B.call(g.port1,U[0],U[1],U[2])})(g.port1.addEventListener),g.port1.removeEventListener=(B=>(...U)=>{if(U[0]==="message"){const ee=k.get(U[1]);ee!==void 0&&(k.delete(U[1]),U[1]=ee)}return B.call(g.port1,U[0],U[1],U[2])})(g.port1.removeEventListener);let W=null;Object.defineProperty(g.port1,"onmessage",{get:()=>W,set:B=>{typeof W=="function"&&g.port1.removeEventListener("message",W),W=typeof B=="function"?B:null,typeof W=="function"&&(g.port1.addEventListener("message",W),g.port1.start())}}),f.prototype.port=g.port1;let _=null;Zs(t,b,f,v).then(B=>_=B);const z=yt(v.numberOfInputs,v.channelCount),J=yt(v.numberOfOutputs,y),G=f.parameterDescriptors===void 0?[]:f.parameterDescriptors.reduce((B,{name:U})=>({...B,[U]:new Float32Array(128)}),{});let V=!0;const Y=()=>{v.numberOfOutputs>0&&A.disconnect(P);for(let B=0,U=0;B<v.numberOfOutputs;B+=1){const ee=E[B];for(let $=0;$<y[B];$+=1)P.disconnect(ee,U+$,$);U+=y[B]}},L=new Map;A.onaudioprocess=({inputBuffer:B,outputBuffer:U})=>{if(_!==null){const ee=h(b);for(let $=0;$<N;$+=128){for(let Z=0;Z<v.numberOfInputs;Z+=1)for(let q=0;q<v.channelCount;q+=1)gt(B,z[Z],q,q,$);f.parameterDescriptors!==void 0&&f.parameterDescriptors.forEach(({name:Z},q)=>{gt(B,G,Z,S+q,$)});for(let Z=0;Z<v.numberOfInputs;Z+=1)for(let q=0;q<y[Z];q+=1)J[Z][q].byteLength===0&&(J[Z][q]=new Float32Array(128));try{const Z=z.map((le,ge)=>{if(ee[ge].size>0)return L.set(ge,N/128),le;const Le=L.get(ge);return Le===void 0?[]:(le.every(rt=>rt.every(Be=>Be===0))&&(Le===1?L.delete(ge):L.set(ge,Le-1)),le)});V=s(t.currentTime+$/t.sampleRate,t.sampleRate,()=>_.process(Z,J,G));for(let le=0,ge=0;le<v.numberOfOutputs;le+=1){for(let Te=0;Te<y[le];Te+=1)Rn(U,J[le],Te,ge+Te,$);ge+=y[le]}}catch(Z){V=!1,b.dispatchEvent(new ErrorEvent("processorerror",{colno:Z.colno,filename:Z.filename,lineno:Z.lineno,message:Z.message}))}if(!V){for(let Z=0;Z<v.numberOfInputs;Z+=1){x[Z].disconnect(w[Z]);for(let q=0;q<v.channelCount;q+=1)w[$].disconnect(I,q,Z*v.channelCount+q)}if(f.parameterDescriptors!==void 0){const Z=f.parameterDescriptors.length;for(let q=0;q<Z;q+=1){const le=C[q];le.disconnect(I,0,S+q),le.stop()}}I.disconnect(A),A.onaudioprocess=null,ve?Y():ne();break}}}};let ve=!1;const se=l(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ie=()=>A.connect(se).connect(t.destination),ne=()=>{A.disconnect(se),se.disconnect()},It=()=>{if(V){ne(),v.numberOfOutputs>0&&A.connect(P);for(let B=0,U=0;B<v.numberOfOutputs;B+=1){const ee=E[B];for(let $=0;$<y[B];$+=1)P.connect(ee,U+$,$);U+=y[B]}}ve=!0},Pt=()=>{V&&(ie(),Y()),ve=!1};return ie(),p(b,It,Pt)},bn=(o,d)=>{const i=o.createBiquadFilter();return oe(i,d),te(i,d,"Q"),te(i,d,"detune"),te(i,d,"frequency"),te(i,d,"gain"),K(i,d,"type"),i},Xs=(o,d)=>(i,m)=>{const a=i.createChannelMerger(m.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&d(i,a),oe(a,m),a},Ys=o=>{const d=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>d,set:i=>{if(i!==d)throw ae()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:i=>{if(i!=="explicit")throw ae()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:i=>{if(i!=="discrete")throw ae()}})},Je=(o,d)=>{const i=o.createChannelSplitter(d.numberOfOutputs);return oe(i,d),Ys(i),i},$s=(o,d,i,m,a)=>(e,l)=>{if(e.createConstantSource===void 0)return i(e,l);const n=e.createConstantSource();return oe(n,l),te(n,l,"offset"),d(m,()=>m(e))||Gt(n),d(a,()=>a(e))||Ht(n),o(e,n),n},Ge=(o,d)=>(o.connect=d.connect.bind(d),o.disconnect=d.disconnect.bind(d),o),js=(o,d,i,m)=>(a,{offset:e,...l})=>{const n=a.createBuffer(1,2,44100),r=d(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=i(a,{...l,gain:e}),s=n.getChannelData(0);s[0]=1,s[1]=1,r.buffer=n,r.loop=!0;const h={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(u){c.channelCount=u},get channelCountMode(){return c.channelCountMode},set channelCountMode(u){c.channelCountMode=u},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(u){c.channelInterpretation=u},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return r.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return r.onended},set onended(u){r.onended=u},addEventListener(...u){return r.addEventListener(u[0],u[1],u[2])},dispatchEvent(...u){return r.dispatchEvent(u[0])},removeEventListener(...u){return r.removeEventListener(u[0],u[1],u[2])},start(u=0){r.start.call(r,u)},stop(u=0){r.stop.call(r,u)}},p=()=>r.connect(c),t=()=>r.disconnect(c);return o(a,r),m(Ge(h,c),p,t)},qs=(o,d)=>(i,m)=>{const a=i.createConvolver();if(oe(a,m),m.disableNormalization===a.normalize&&(a.normalize=!m.disableNormalization),K(a,m,"buffer"),m.channelCount>2||(d(a,"channelCount",e=>()=>e.call(a),e=>l=>{if(l>2)throw o();return e.call(a,l)}),m.channelCountMode==="max"))throw o();return d(a,"channelCountMode",e=>()=>e.call(a),e=>l=>{if(l==="max")throw o();return e.call(a,l)}),a},Ln=(o,d)=>{const i=o.createDelay(d.maxDelayTime);return oe(i,d),te(i,d,"delayTime"),i},Qs=o=>(d,i)=>{const m=d.createDynamicsCompressor();if(oe(m,i),i.channelCount>2||i.channelCountMode==="max")throw o();return te(m,i,"attack"),te(m,i,"knee"),te(m,i,"ratio"),te(m,i,"release"),te(m,i,"threshold"),m},me=(o,d)=>{const i=o.createGain();return oe(i,d),te(i,d,"gain"),i},Ks=o=>(d,i,m)=>{if(d.createIIRFilter===void 0)return o(d,i,m);const a=d.createIIRFilter(m.feedforward,m.feedback);return oe(a,m),a};function Js(o,d){const i=d[0]*d[0]+d[1]*d[1];return[(o[0]*d[0]+o[1]*d[1])/i,(o[1]*d[0]-o[0]*d[1])/i]}function ea(o,d){return[o[0]*d[0]-o[1]*d[1],o[0]*d[1]+o[1]*d[0]]}function mn(o,d){let i=[0,0];for(let m=o.length-1;m>=0;m-=1)i=ea(i,d),i[0]+=o[m];return i}const ta=(o,d,i,m)=>(a,e,{channelCount:l,channelCountMode:n,channelInterpretation:r,feedback:c,feedforward:s})=>{const h=kn(e,a.sampleRate),p=c instanceof Float64Array?c:new Float64Array(c),t=s instanceof Float64Array?s:new Float64Array(s),u=p.length,f=t.length,v=Math.min(u,f);if(u===0||u>20)throw m();if(p[0]===0)throw d();if(f===0||f>20)throw m();if(t[0]===0)throw d();if(p[0]!==1){for(let C=0;C<f;C+=1)t[C]/=p[0];for(let C=1;C<u;C+=1)p[C]/=p[0]}const y=i(a,h,l,l);y.channelCount=l,y.channelCountMode=n,y.channelInterpretation=r;const S=32,M=[],T=[],g=[];for(let C=0;C<l;C+=1){M.push(0);const I=new Float32Array(S),N=new Float32Array(S);I.fill(0),N.fill(0),T.push(I),g.push(N)}y.onaudioprocess=C=>{const I=C.inputBuffer,N=C.outputBuffer,A=I.numberOfChannels;for(let P=0;P<A;P+=1){const E=I.getChannelData(P),O=N.getChannelData(P);M[P]=Fn(p,u,t,f,v,T[P],g[P],M[P],S,E,O)}};const x=a.sampleRate/2;return Ge({get bufferSize(){return h},get channelCount(){return y.channelCount},set channelCount(C){y.channelCount=C},get channelCountMode(){return y.channelCountMode},set channelCountMode(C){y.channelCountMode=C},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(C){y.channelInterpretation=C},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...C){return y.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return y.dispatchEvent(C[0])},getFrequencyResponse(C,I,N){if(C.length!==I.length||I.length!==N.length)throw o();const A=C.length;for(let P=0;P<A;P+=1){const E=-Math.PI*(C[P]/x),O=[Math.cos(E),Math.sin(E)],D=mn(t,O),F=mn(p,O),R=Js(D,F);I[P]=Math.sqrt(R[0]*R[0]+R[1]*R[1]),N[P]=Math.atan2(R[1],R[0])}},removeEventListener(...C){return y.removeEventListener(C[0],C[1],C[2])}},y)},na=(o,d)=>o.createMediaElementSource(d.mediaElement),ra=(o,d)=>{const i=o.createMediaStreamDestination();return oe(i,d),i.numberOfOutputs===1&&Object.defineProperty(i,"numberOfOutputs",{get:()=>0}),i},oa=(o,{mediaStream:d})=>{const i=d.getAudioTracks();i.sort((e,l)=>e.id<l.id?-1:e.id>l.id?1:0);const m=i.slice(0,1),a=o.createMediaStreamSource(new MediaStream(m));return Object.defineProperty(a,"mediaStream",{value:d}),a},sa=(o,d)=>(i,{mediaStreamTrack:m})=>{if(typeof i.createMediaStreamTrackSource=="function")return i.createMediaStreamTrackSource(m);const a=new MediaStream([m]),e=i.createMediaStreamSource(a);if(m.kind!=="audio")throw o();if(d(i))throw new TypeError;return e},aa=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null,ia=(o,d,i,m,a,e)=>(l,n)=>{const r=l.createOscillator();return oe(r,n),te(r,n,"detune"),te(r,n,"frequency"),n.periodicWave!==void 0?r.setPeriodicWave(n.periodicWave):K(r,n,"type"),d(i,()=>i(l))||Gt(r),d(m,()=>m(l))||e(r,l),d(a,()=>a(l))||Ht(r),o(l,r),r},ca=o=>(d,i)=>{const m=d.createPanner();return m.orientationX===void 0?o(d,i):(oe(m,i),te(m,i,"orientationX"),te(m,i,"orientationY"),te(m,i,"orientationZ"),te(m,i,"positionX"),te(m,i,"positionY"),te(m,i,"positionZ"),K(m,i,"coneInnerAngle"),K(m,i,"coneOuterAngle"),K(m,i,"coneOuterGain"),K(m,i,"distanceModel"),K(m,i,"maxDistance"),K(m,i,"panningModel"),K(m,i,"refDistance"),K(m,i,"rolloffFactor"),m)},la=(o,d,i,m,a,e,l,n,r,c)=>(s,{coneInnerAngle:h,coneOuterAngle:p,coneOuterGain:t,distanceModel:u,maxDistance:f,orientationX:v,orientationY:y,orientationZ:S,panningModel:M,positionX:T,positionY:g,positionZ:x,refDistance:w,rolloffFactor:C,...I})=>{const N=s.createPanner();if(I.channelCount>2||I.channelCountMode==="max")throw l();oe(N,I);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},P=i(s,{...A,channelInterpretation:"speakers",numberOfInputs:6}),E=m(s,{...I,gain:1}),O=m(s,{...A,gain:1}),D=m(s,{...A,gain:0}),F=m(s,{...A,gain:0}),R=m(s,{...A,gain:0}),b=m(s,{...A,gain:0}),k=m(s,{...A,gain:0}),W=a(s,256,6,1),_=e(s,{...A,curve:new Float32Array([1,1]),oversample:"none"});let H=[v,y,S],z=[T,g,x];const J=new Float32Array(1);W.onaudioprocess=({inputBuffer:L})=>{const ve=[r(L,J,0),r(L,J,1),r(L,J,2)];ve.some((ie,ne)=>ie!==H[ne])&&(N.setOrientation(...ve),H=ve);const se=[r(L,J,3),r(L,J,4),r(L,J,5)];se.some((ie,ne)=>ie!==z[ne])&&(N.setPosition(...se),z=se)},Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0});const G={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(L){if(L>2)throw l();E.channelCount=L,N.channelCount=L},get channelCountMode(){return N.channelCountMode},set channelCountMode(L){if(L==="max")throw l();E.channelCountMode=L,N.channelCountMode=L},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(L){E.channelInterpretation=L,N.channelInterpretation=L},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle(L){N.coneInnerAngle=L},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle(L){N.coneOuterAngle=L},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain(L){if(L<0||L>1)throw d();N.coneOuterGain=L},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel(L){N.distanceModel=L},get inputs(){return[E]},get maxDistance(){return N.maxDistance},set maxDistance(L){if(L<0)throw new RangeError;N.maxDistance=L},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return O.gain},get orientationY(){return D.gain},get orientationZ(){return F.gain},get panningModel(){return N.panningModel},set panningModel(L){N.panningModel=L},get positionX(){return R.gain},get positionY(){return b.gain},get positionZ(){return k.gain},get refDistance(){return N.refDistance},set refDistance(L){if(L<0)throw new RangeError;N.refDistance=L},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor(L){if(L<0)throw new RangeError;N.rolloffFactor=L},addEventListener(...L){return E.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return E.dispatchEvent(L[0])},removeEventListener(...L){return E.removeEventListener(L[0],L[1],L[2])}};h!==G.coneInnerAngle&&(G.coneInnerAngle=h),p!==G.coneOuterAngle&&(G.coneOuterAngle=p),t!==G.coneOuterGain&&(G.coneOuterGain=t),u!==G.distanceModel&&(G.distanceModel=u),f!==G.maxDistance&&(G.maxDistance=f),v!==G.orientationX.value&&(G.orientationX.value=v),y!==G.orientationY.value&&(G.orientationY.value=y),S!==G.orientationZ.value&&(G.orientationZ.value=S),M!==G.panningModel&&(G.panningModel=M),T!==G.positionX.value&&(G.positionX.value=T),g!==G.positionY.value&&(G.positionY.value=g),x!==G.positionZ.value&&(G.positionZ.value=x),w!==G.refDistance&&(G.refDistance=w),C!==G.rolloffFactor&&(G.rolloffFactor=C),(H[0]!==1||H[1]!==0||H[2]!==0)&&N.setOrientation(...H),(z[0]!==0||z[1]!==0||z[2]!==0)&&N.setPosition(...z);const V=()=>{E.connect(N),o(E,_,0,0),_.connect(O).connect(P,0,0),_.connect(D).connect(P,0,1),_.connect(F).connect(P,0,2),_.connect(R).connect(P,0,3),_.connect(b).connect(P,0,4),_.connect(k).connect(P,0,5),P.connect(W).connect(s.destination)},Y=()=>{E.disconnect(N),n(E,_,0,0),_.disconnect(O),O.disconnect(P),_.disconnect(D),D.disconnect(P),_.disconnect(F),F.disconnect(P),_.disconnect(R),R.disconnect(P),_.disconnect(b),b.disconnect(P),_.disconnect(k),k.disconnect(P),P.disconnect(W),W.disconnect(s.destination)};return c(Ge(G,N),V,Y)},ua=o=>(d,{disableNormalization:i,imag:m,real:a})=>{const e=m instanceof Float32Array?m:new Float32Array(m),l=a instanceof Float32Array?a:new Float32Array(a),n=d.createPeriodicWave(l,e,{disableNormalization:i});if(Array.from(m).length<2)throw o();return n},et=(o,d,i,m)=>o.createScriptProcessor(d,i,m),fa=(o,d)=>(i,m)=>{const a=m.channelCountMode;if(a==="clamped-max")throw d();if(i.createStereoPanner===void 0)return o(i,m);const e=i.createStereoPanner();return oe(e,m),te(e,m,"pan"),Object.defineProperty(e,"channelCountMode",{get:()=>a,set:l=>{if(l!==a)throw d()}}),e},da=(o,d,i,m,a,e)=>{const n=new Float32Array([1,1]),r=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},s={...c,oversample:"none"},h=(u,f,v,y)=>{const S=new Float32Array(16385),M=new Float32Array(16385);for(let I=0;I<16385;I+=1){const N=I/16384*r;S[I]=Math.cos(N),M[I]=Math.sin(N)}const T=i(u,{...c,gain:0}),g=m(u,{...s,curve:S}),x=m(u,{...s,curve:n}),w=i(u,{...c,gain:0}),C=m(u,{...s,curve:M});return{connectGraph(){f.connect(T),f.connect(x.inputs===void 0?x:x.inputs[0]),f.connect(w),x.connect(v),v.connect(g.inputs===void 0?g:g.inputs[0]),v.connect(C.inputs===void 0?C:C.inputs[0]),g.connect(T.gain),C.connect(w.gain),T.connect(y,0,0),w.connect(y,0,1)},disconnectGraph(){f.disconnect(T),f.disconnect(x.inputs===void 0?x:x.inputs[0]),f.disconnect(w),x.disconnect(v),v.disconnect(g.inputs===void 0?g:g.inputs[0]),v.disconnect(C.inputs===void 0?C:C.inputs[0]),g.disconnect(T.gain),C.disconnect(w.gain),T.disconnect(y,0,0),w.disconnect(y,0,1)}}},p=(u,f,v,y)=>{const S=new Float32Array(16385),M=new Float32Array(16385),T=new Float32Array(16385),g=new Float32Array(16385),x=Math.floor(16385/2);for(let R=0;R<16385;R+=1)if(R>x){const b=(R-x)/(16384-x)*r;S[R]=Math.cos(b),M[R]=Math.sin(b),T[R]=0,g[R]=1}else{const b=R/(16384-x)*r;S[R]=1,M[R]=0,T[R]=Math.cos(b),g[R]=Math.sin(b)}const w=d(u,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=i(u,{...c,gain:0}),I=m(u,{...s,curve:S}),N=i(u,{...c,gain:0}),A=m(u,{...s,curve:M}),P=m(u,{...s,curve:n}),E=i(u,{...c,gain:0}),O=m(u,{...s,curve:T}),D=i(u,{...c,gain:0}),F=m(u,{...s,curve:g});return{connectGraph(){f.connect(w),f.connect(P.inputs===void 0?P:P.inputs[0]),w.connect(C,0),w.connect(N,0),w.connect(E,1),w.connect(D,1),P.connect(v),v.connect(I.inputs===void 0?I:I.inputs[0]),v.connect(A.inputs===void 0?A:A.inputs[0]),v.connect(O.inputs===void 0?O:O.inputs[0]),v.connect(F.inputs===void 0?F:F.inputs[0]),I.connect(C.gain),A.connect(N.gain),O.connect(E.gain),F.connect(D.gain),C.connect(y,0,0),E.connect(y,0,0),N.connect(y,0,1),D.connect(y,0,1)},disconnectGraph(){f.disconnect(w),f.disconnect(P.inputs===void 0?P:P.inputs[0]),w.disconnect(C,0),w.disconnect(N,0),w.disconnect(E,1),w.disconnect(D,1),P.disconnect(v),v.disconnect(I.inputs===void 0?I:I.inputs[0]),v.disconnect(A.inputs===void 0?A:A.inputs[0]),v.disconnect(O.inputs===void 0?O:O.inputs[0]),v.disconnect(F.inputs===void 0?F:F.inputs[0]),I.disconnect(C.gain),A.disconnect(N.gain),O.disconnect(E.gain),F.disconnect(D.gain),C.disconnect(y,0,0),E.disconnect(y,0,0),N.disconnect(y,0,1),D.disconnect(y,0,1)}}},t=(u,f,v,y,S)=>{if(f===1)return h(u,v,y,S);if(f===2)return p(u,v,y,S);throw a()};return(u,{channelCount:f,channelCountMode:v,pan:y,...S})=>{if(v==="max")throw a();const M=o(u,{...S,channelCount:1,channelCountMode:v,numberOfInputs:2}),T=i(u,{...S,channelCount:f,channelCountMode:v,gain:1}),g=i(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:x,disconnectGraph:w}=t(u,f,T,g,M);Object.defineProperty(g.gain,"defaultValue",{get:()=>0}),Object.defineProperty(g.gain,"maxValue",{get:()=>1}),Object.defineProperty(g.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(P){T.channelCount!==P&&(I&&w(),{connectGraph:x,disconnectGraph:w}=t(u,P,T,g,M),I&&x()),T.channelCount=P},get channelCountMode(){return T.channelCountMode},set channelCountMode(P){if(P==="clamped-max"||P==="max")throw a();T.channelCountMode=P},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(P){T.channelInterpretation=P},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get pan(){return g.gain},addEventListener(...P){return T.addEventListener(P[0],P[1],P[2])},dispatchEvent(...P){return T.dispatchEvent(P[0])},removeEventListener(...P){return T.removeEventListener(P[0],P[1],P[2])}};let I=!1;const N=()=>{x(),I=!0},A=()=>{w(),I=!1};return e(Ge(C,M),N,A)}},ha=(o,d,i,m,a,e,l)=>(n,r)=>{const c=n.createWaveShaper();if(e!==null&&e.name==="webkitAudioContext"&&n.createGain().gain.automationRate===void 0)return i(n,r);oe(c,r);const s=r.curve===null||r.curve instanceof Float32Array?r.curve:new Float32Array(r.curve);if(s!==null&&s.length<2)throw d();K(c,{curve:s},"curve"),K(c,r,"oversample");let h=null,p=!1;return l(c,"curve",f=>()=>f.call(c),f=>v=>(f.call(c,v),p&&(m(v)&&h===null?h=o(n,c):!m(v)&&h!==null&&(h(),h=null)),v)),a(c,()=>{p=!0,m(c.curve)&&(h=o(n,c))},()=>{p=!1,h!==null&&(h(),h=null)})},pa=(o,d,i,m,a)=>(e,{curve:l,oversample:n,...r})=>{const c=e.createWaveShaper(),s=e.createWaveShaper();oe(c,r),oe(s,r);const h=i(e,{...r,gain:1}),p=i(e,{...r,gain:-1}),t=i(e,{...r,gain:1}),u=i(e,{...r,gain:-1});let f=null,v=!1,y=null;const S={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(g){h.channelCount=g,p.channelCount=g,c.channelCount=g,t.channelCount=g,s.channelCount=g,u.channelCount=g},get channelCountMode(){return c.channelCountMode},set channelCountMode(g){h.channelCountMode=g,p.channelCountMode=g,c.channelCountMode=g,t.channelCountMode=g,s.channelCountMode=g,u.channelCountMode=g},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(g){h.channelInterpretation=g,p.channelInterpretation=g,c.channelInterpretation=g,t.channelInterpretation=g,s.channelInterpretation=g,u.channelInterpretation=g},get context(){return c.context},get curve(){return y},set curve(g){if(g!==null&&g.length<2)throw d();if(g===null)c.curve=g,s.curve=g;else{const x=g.length,w=new Float32Array(x+2-x%2),C=new Float32Array(x+2-x%2);w[0]=g[0],C[0]=-g[x-1];const I=Math.ceil((x+1)/2),N=(x+1)/2-1;for(let A=1;A<I;A+=1){const P=A/I*N,E=Math.floor(P),O=Math.ceil(P);w[A]=E===O?g[E]:(1-(P-E))*g[E]+(1-(O-P))*g[O],C[A]=E===O?-g[x-1-E]:-((1-(P-E))*g[x-1-E])-(1-(O-P))*g[x-1-O]}w[I]=x%2===1?g[I-1]:(g[I-2]+g[I-1])/2,c.curve=w,s.curve=C}y=g,v&&(m(y)&&f===null?f=o(e,h):f!==null&&(f(),f=null))},get inputs(){return[h]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(g){c.oversample=g,s.oversample=g},addEventListener(...g){return h.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return h.dispatchEvent(g[0])},removeEventListener(...g){return h.removeEventListener(g[0],g[1],g[2])}};l!==null&&(S.curve=l instanceof Float32Array?l:new Float32Array(l)),n!==S.oversample&&(S.oversample=n);const M=()=>{h.connect(c).connect(t),h.connect(p).connect(s).connect(u).connect(t),v=!0,m(y)&&(f=o(e,h))},T=()=>{h.disconnect(c),c.disconnect(t),h.disconnect(p),p.disconnect(s),s.disconnect(u),u.disconnect(t),v=!1,f!==null&&(f(),f=null)};return a(Ge(S,t),M,T)},he=()=>new DOMException("","NotSupportedError"),ma={numberOfChannels:1},va=(o,d,i,m,a)=>class extends o{constructor(l,n,r){let c;if(typeof l=="number"&&n!==void 0&&r!==void 0)c={length:n,numberOfChannels:l,sampleRate:r};else if(typeof l=="object")c=l;else throw new Error("The given parameters are not valid.");const{length:s,numberOfChannels:h,sampleRate:p}={...ma,...c},t=m(h,s,p);d(Ye,()=>Ye(t))||t.addEventListener("statechange",(()=>{let u=0;const f=v=>{this._state==="running"&&(u>0?(t.removeEventListener("statechange",f),v.stopImmediatePropagation(),this._waitForThePromiseToSettle(v)):u+=1)};return f})()),super(t,h),this._length=s,this._nativeOfflineAudioContext=t,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(i()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,An(this)}))}_waitForThePromiseToSettle(l){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(l):setTimeout(()=>this._waitForThePromiseToSettle(l))}},ga={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ya=(o,d,i,m,a,e,l)=>class extends o{constructor(r,c){const s=a(r),h={...ga,...c},p=i(s,h),t=e(s),u=t?m():null,f=r.sampleRate/2;super(r,!1,p,u),this._detune=d(this,t,p.detune,153600,-153600),this._frequency=d(this,t,p.frequency,f,-f),this._nativeOscillatorNode=p,this._onended=null,this._oscillatorNodeRenderer=u,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(r){const c=typeof r=="function"?l(this,r):null;this._nativeOscillatorNode.onended=c;const s=this._nativeOscillatorNode.onended;this._onended=s!==null&&s===c?r:s}get type(){return this._nativeOscillatorNode.type}set type(r){this._nativeOscillatorNode.type=r,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(r){this._nativeOscillatorNode.setPeriodicWave(r),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=r)}start(r=0){if(this._nativeOscillatorNode.start(r),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=r),this.context.state!=="closed"){Ve(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Pe(this)&&qe(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(r=0){this._nativeOscillatorNode.stop(r),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=r)}},Ca=(o,d,i,m,a)=>()=>{const e=new WeakMap;let l=null,n=null,r=null;const c=async(s,h)=>{let p=i(s);const t=ue(p,h);if(!t){const u={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:l===null?void 0:l,type:p.type};p=d(h,u),n!==null&&p.start(n),r!==null&&p.stop(r)}return e.set(h,p),t?(await o(h,s.detune,p.detune),await o(h,s.frequency,p.frequency)):(await m(h,s.detune,p.detune),await m(h,s.frequency,p.frequency)),await a(s,h,p),p};return{set periodicWave(s){l=s},set start(s){n=s},set stop(s){r=s},render(s,h){const p=e.get(h);return p!==void 0?Promise.resolve(p):c(s,h)}}},xa={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},wa=(o,d,i,m,a,e,l)=>class extends o{constructor(r,c){const s=a(r),h={...xa,...c},p=i(s,h),t=e(s),u=t?m():null;super(r,!1,p,u),this._nativePannerNode=p,this._orientationX=d(this,t,p.orientationX,fe,pe),this._orientationY=d(this,t,p.orientationY,fe,pe),this._orientationZ=d(this,t,p.orientationZ,fe,pe),this._positionX=d(this,t,p.positionX,fe,pe),this._positionY=d(this,t,p.positionY,fe,pe),this._positionZ=d(this,t,p.positionZ,fe,pe),l(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(r){this._nativePannerNode.coneInnerAngle=r}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(r){this._nativePannerNode.coneOuterAngle=r}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(r){this._nativePannerNode.coneOuterGain=r}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(r){this._nativePannerNode.distanceModel=r}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(r){this._nativePannerNode.maxDistance=r}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(r){this._nativePannerNode.panningModel=r}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(r){this._nativePannerNode.refDistance=r}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(r){this._nativePannerNode.rolloffFactor=r}},Sa=(o,d,i,m,a,e,l,n,r,c)=>()=>{const s=new WeakMap;let h=null;const p=async(t,u)=>{let f=null,v=e(t);const y={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},S={...y,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},M=ue(v,u);if("bufferSize"in v)f=m(u,{...y,gain:1});else if(!M){const T={...S,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=a(u,T)}if(s.set(u,f===null?v:f),f!==null){if(h===null){if(l===null)throw new Error("Missing the native OfflineAudioContext constructor.");const A=new l(6,t.context.length,u.sampleRate),P=d(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});P.connect(A.destination),h=(async()=>{const E=await Promise.all([t.orientationX,t.orientationY,t.orientationZ,t.positionX,t.positionY,t.positionZ].map(async(O,D)=>{const F=i(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D===0?1:0});return await n(A,O,F.offset),F}));for(let O=0;O<6;O+=1)E[O].connect(P,0,O),E[O].start(0);return c(A)})()}const T=await h,g=m(u,{...y,gain:1});await r(t,u,g);const x=[];for(let A=0;A<T.numberOfChannels;A+=1)x.push(T.getChannelData(A));let w=[x[0][0],x[1][0],x[2][0]],C=[x[3][0],x[4][0],x[5][0]],I=m(u,{...y,gain:1}),N=a(u,{...S,orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:C[0],positionY:C[1],positionZ:C[2]});g.connect(I).connect(N.inputs[0]),N.connect(f);for(let A=128;A<T.length;A+=128){const P=[x[0][A],x[1][A],x[2][A]],E=[x[3][A],x[4][A],x[5][A]];if(P.some((O,D)=>O!==w[D])||E.some((O,D)=>O!==C[D])){w=P,C=E;const O=A/u.sampleRate;I.gain.setValueAtTime(0,O),I=m(u,{...y,gain:0}),N=a(u,{...S,orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),I.gain.setValueAtTime(1,O),g.connect(I).connect(N.inputs[0]),N.connect(f)}}return f}return M?(await o(u,t.orientationX,v.orientationX),await o(u,t.orientationY,v.orientationY),await o(u,t.orientationZ,v.orientationZ),await o(u,t.positionX,v.positionX),await o(u,t.positionY,v.positionY),await o(u,t.positionZ,v.positionZ)):(await n(u,t.orientationX,v.orientationX),await n(u,t.orientationY,v.orientationY),await n(u,t.orientationZ,v.orientationZ),await n(u,t.positionX,v.positionX),await n(u,t.positionY,v.positionY),await n(u,t.positionZ,v.positionZ)),Ue(v)?await r(t,u,v.inputs[0]):await r(t,u,v),v};return{render(t,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):p(t,u)}}},Na={disableNormalization:!1},Ma=(o,d,i,m)=>class Bn{constructor(e,l){const n=d(e),r=m({...Na,...l}),c=o(n,r);return i.add(c),c}static[Symbol.hasInstance](e){return e!==null&&typeof e=="object"&&Object.getPrototypeOf(e)===Bn.prototype||i.has(e)}},Ia=(o,d)=>(i,m,a)=>(o(m).replay(a),d(m,i,a)),Pa=(o,d,i)=>async(m,a,e)=>{const l=o(m);await Promise.all(l.activeInputs.map((n,r)=>Array.from(n).map(async([c,s])=>{const p=await d(c).render(c,a),t=m.context.destination;!i(c)&&(m!==t||!i(m))&&p.connect(e,s,r)})).reduce((n,r)=>[...n,...r],[]))},Aa=(o,d,i)=>async(m,a,e)=>{const l=d(m);await Promise.all(Array.from(l.activeInputs).map(async([n,r])=>{const s=await o(n).render(n,a);i(n)||s.connect(e,r)}))},Ta=(o,d,i,m)=>a=>o(Ye,()=>Ye(a))?Promise.resolve(o(m,m)).then(e=>{if(!e){const l=i(a,512,0,1);a.oncomplete=()=>{l.onaudioprocess=null,l.disconnect()},l.onaudioprocess=()=>a.currentTime,l.connect(a.destination)}return a.startRendering()}):new Promise(e=>{const l=d(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=n=>{l.disconnect(),e(n.renderedBuffer)},l.connect(a.destination),a.startRendering()}),Ea=o=>(d,i)=>{o.set(d,i)},Oa=o=>(d,i)=>o.set(d,i),Da=(o,d,i,m,a,e,l,n)=>(r,c)=>i(r).render(r,c).then(()=>Promise.all(Array.from(m(c)).map(s=>i(s).render(s,c)))).then(()=>a(c)).then(s=>(typeof s.copyFromChannel!="function"?(l(s),_t(s)):d(e,()=>e(s))||n(s),o.add(s),s)),Ra={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Fa=(o,d,i,m,a,e)=>class extends o{constructor(n,r){const c=a(n),s={...Ra,...r},h=i(c,s),p=e(c),t=p?m():null;super(n,!1,h,t),this._pan=d(this,p,h.pan)}get pan(){return this._pan}},ka=(o,d,i,m,a)=>()=>{const e=new WeakMap,l=async(n,r)=>{let c=i(n);const s=ue(c,r);if(!s){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=d(r,h)}return e.set(r,c),s?await o(r,n.pan,c.pan):await m(r,n.pan,c.pan),Ue(c)?await a(n,r,c.inputs[0]):await a(n,r,c),c};return{render(n,r){const c=e.get(r);return c!==void 0?Promise.resolve(c):l(n,r)}}},ba=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch{return!1}return!0},La=(o,d)=>async()=>{if(o===null)return!0;if(d===null)return!1;const i=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),m=new d(1,128,44100),a=URL.createObjectURL(i);let e=!1,l=!1;try{await m.audioWorklet.addModule(a);const n=new o(m,"a",{numberOfOutputs:0}),r=m.createOscillator();n.port.onmessage=()=>e=!0,n.onprocessorerror=()=>l=!0,r.connect(n),r.start(0),await m.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(a)}return e&&!l},Ba=(o,d)=>()=>{if(d===null)return Promise.resolve(!1);const i=new d(1,1,44100),m=o(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{i.oncomplete=()=>{m.disconnect(),a(i.currentTime!==0)},i.startRendering()})},Wa=()=>new DOMException("","UnknownError"),_a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Va=(o,d,i,m,a,e,l)=>class extends o{constructor(r,c){const s=a(r),h={..._a,...c},p=i(s,h),u=e(s)?m():null;super(r,!0,p,u),this._isCurveNullified=!1,this._nativeWaveShaperNode=p,l(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(r){if(r===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(r.length<2)throw d();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=r}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(r){this._nativeWaveShaperNode.oversample=r}},Ua=(o,d,i)=>()=>{const m=new WeakMap,a=async(e,l)=>{let n=d(e);if(!ue(n,l)){const c={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,curve:n.curve,oversample:n.oversample};n=o(l,c)}return m.set(l,n),Ue(n)?await i(e,l,n.inputs[0]):await i(e,l,n),n};return{render(e,l){const n=m.get(l);return n!==void 0?Promise.resolve(n):a(e,l)}}},Ga=()=>typeof window>"u"?null:window,Ha=(o,d)=>i=>{i.copyFromChannel=(m,a,e=0)=>{const l=o(e),n=o(a);if(n>=i.numberOfChannels)throw d();const r=i.length,c=i.getChannelData(n),s=m.length;for(let h=l<0?-l:0;h+l<r&&h<s;h+=1)m[h]=c[h+l]},i.copyToChannel=(m,a,e=0)=>{const l=o(e),n=o(a);if(n>=i.numberOfChannels)throw d();const r=i.length,c=i.getChannelData(n),s=m.length;for(let h=l<0?-l:0;h+l<r&&h<s;h+=1)c[h+l]=m[h]}},Za=o=>d=>{d.copyFromChannel=(i=>(m,a,e=0)=>{const l=o(e),n=o(a);if(l<d.length)return i.call(d,m,n,l)})(d.copyFromChannel),d.copyToChannel=(i=>(m,a,e=0)=>{const l=o(e),n=o(a);if(l<d.length)return i.call(d,m,n,l)})(d.copyToChannel)},za=o=>(d,i)=>{const m=i.createBuffer(1,1,44100);d.buffer===null&&(d.buffer=m),o(d,"buffer",a=>()=>{const e=a.call(d);return e===m?null:e},a=>e=>a.call(d,e===null?m:e))},Xa=(o,d)=>(i,m)=>{m.channelCount=1,m.channelCountMode="explicit",Object.defineProperty(m,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(m,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});const a=i.createBufferSource();d(m,()=>{const n=m.numberOfInputs;for(let r=0;r<n;r+=1)a.connect(m,0,r)},()=>a.disconnect(m))},Wn=(o,d,i)=>o.copyFromChannel===void 0?o.getChannelData(i)[0]:(o.copyFromChannel(d,i),d[0]),_n=o=>{if(o===null)return!1;const d=o.length;return d%2!==0?o[Math.floor(d/2)]!==0:o[d/2-1]+o[d/2]!==0},tt=(o,d,i,m)=>{let a=o;for(;!a.hasOwnProperty(d);)a=Object.getPrototypeOf(a);const{get:e,set:l}=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(o,d,{get:i(e),set:m(l)})},Ya=o=>({...o,outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)}),$a=o=>({...o,channelCount:o.numberOfOutputs}),ja=o=>{const{imag:d,real:i}=o;return d===void 0?i===void 0?{...o,imag:[0,0],real:[0,0]}:{...o,imag:Array.from(i,()=>0),real:i}:i===void 0?{...o,imag:d,real:Array.from(d,()=>0)}:{...o,imag:d,real:i}},Vn=(o,d,i)=>{try{o.setValueAtTime(d,i)}catch(m){if(m.code!==9)throw m;Vn(o,d,i+1e-7)}},qa=o=>{const d=o.createBufferSource();d.start();try{d.start()}catch{return!0}return!1},Qa=o=>{const d=o.createBufferSource(),i=o.createBuffer(1,1,44100);d.buffer=i;try{d.start(0,1)}catch{return!1}return!0},Ka=o=>{const d=o.createBufferSource();d.start();try{d.stop()}catch{return!1}return!0},Zt=o=>{const d=o.createOscillator();try{d.start(-1)}catch(i){return i instanceof RangeError}return!1},Un=o=>{const d=o.createBuffer(1,1,44100),i=o.createBufferSource();i.buffer=d,i.start(),i.stop();try{return i.stop(),!0}catch{return!1}},zt=o=>{const d=o.createOscillator();try{d.stop(-1)}catch(i){return i instanceof RangeError}return!1},Ja=o=>{const{port1:d,port2:i}=new MessageChannel;try{d.postMessage(o)}finally{d.close(),i.close()}},ei=o=>{o.start=(d=>(i=0,m=0,a)=>{const e=o.buffer,l=e===null?m:Math.min(e.duration,m);e!==null&&l>e.duration-.5/o.context.sampleRate?d.call(o,i,0,0):d.call(o,i,l,a)})(o.start)},Gn=(o,d)=>{const i=d.createGain();o.connect(i);const m=(a=>()=>{a.call(o,i),o.removeEventListener("ended",m)})(o.disconnect);o.addEventListener("ended",m),Ge(o,i),o.stop=(a=>{let e=!1;return(l=0)=>{if(e)try{a.call(o,l)}catch{i.gain.setValueAtTime(0,l)}else a.call(o,l),e=!0}})(o.stop)},He=(o,d)=>i=>{const m={value:o};return Object.defineProperties(i,{currentTarget:m,target:m}),typeof d=="function"?d.call(o,i):d.handleEvent.call(o,i)},ti=xr(ke),ni=Pr(ke),ri=_o(xt),Hn=new WeakMap,oi=rs(Hn),Ce=mo(new Map,new WeakMap),we=Ga(),Zn=Fs(Ce,Se),Xt=ns(de),ce=Pa(de,Xt,Fe),si=Dr(Zn,Q,ce),j=as(Ct),Ae=aa(we),X=Ns(Ae),zn=new WeakMap,Xn=jo(He),nt=Bs(we),Yt=Cs(nt),$t=xs(we),Yn=ws(we),$e=_s(we),re=no(wr(xn),Ir(ti,ni,pt,ri,mt,de,oi,je,Q,ke,Pe,Fe,ct),Ce,ps(Dt,mt,de,Q,Xe,Pe),Se,wt,he,bo(pt,Dt,de,Q,Xe,j,Pe,X),Go(zn,de,ye),Xn,j,Yt,$t,Yn,X,$e),ai=Or(re,si,Se,Zn,j,X),jt=new WeakSet,vn=ks(we),$n=To(new Uint32Array(1)),qt=Ha($n,Se),Qt=Za($n),ii=Fr(jt,Ce,he,vn,Ae,ba(vn),qt,Qt),St=Ar(me),jn=Aa(Xt,Qe,Fe),Ne=So(jn),Ze=Ls(St,Ce,qa,Qa,Ka,Zt,Un,zt,ei,za(tt),Gn),Me=Ia(os(Qe),jn),ci=Lr(Ne,Ze,Q,Me,ce),xe=ro(Sr(wn),zn,Wt,oo,pr,mr,vr,gr,yr,Tt,yn,nt,Vn),li=br(re,ci,xe,ae,Ze,j,X,He),ui=zr(re,Xr,Se,ae,Ws(me,tt),j,X,ce),fi=po(Ne,bn,Q,Me,ce),be=Oa(Hn),di=ho(re,xe,fi,wt,bn,j,X,be),De=Ds(ke,$t),hi=Xa(ae,De),Re=Xs(nt,hi),pi=yo(Re,Q,ce),mi=go(re,pi,Re,j,X),vi=wo(Je,Q,ce),gi=xo(re,vi,Je,j,X,$a),yi=js(St,Ze,me,De),ze=$s(St,Ce,yi,Zt,zt),Ci=Ao(Ne,ze,Q,Me,ce),xi=Po(re,xe,Ci,ze,j,X,He),qn=qs(he,tt),wi=Do(qn,Q,ce),Si=Oo(re,wi,qn,j,X,be),Ni=Wo(Ne,Ln,Q,Me,ce),Mi=Bo(re,xe,Ni,Ln,j,X,be),Qn=Qs(he),Ii=Xo(Ne,Qn,Q,Me,ce),Pi=zo(re,xe,Ii,Qn,he,j,X,be),Ai=es(Ne,me,Q,Me,ce),Ti=Jo(re,xe,Ai,me,j,X),Ei=ta(wt,ae,et,he),Nt=Ta(Ce,me,et,Ba(me,Ae)),Oi=hs(Ze,Q,Ae,ce,Nt),Di=Ks(Ei),Ri=fs(re,Di,Oi,j,X,be),Fi=Yr(xe,Re,ze,et,he,Wn,X,tt),Kn=new WeakMap,ki=Os(ui,Fi,Xn,X,Kn,He),Jn=ia(St,Ce,Zt,Un,zt,Gn),bi=Ca(Ne,Jn,Q,Me,ce),Li=ya(re,xe,Jn,bi,j,X,He),er=Mo(Ze),Bi=pa(er,ae,me,_n,De),Mt=ha(er,ae,Bi,_n,De,nt,tt),Wi=la(pt,ae,Re,me,et,Mt,he,mt,Wn,De),tr=ca(Wi),_i=Sa(Ne,Re,ze,me,tr,Q,Ae,Me,ce,Nt),Vi=wa(re,xe,tr,_i,j,X,be),Ui=ua(Se),Gi=Ma(Ui,j,new WeakSet,ja),Hi=da(Re,Je,me,Mt,he,De),nr=fa(Hi,he),Zi=ka(Ne,nr,Q,Me,ce),zi=Fa(re,xe,nr,Zi,j,X),Xi=Ua(Mt,Q,ce),Yi=Va(re,ae,Mt,Xi,j,X,be),rr=Ms(we),Kt=qo(we),or=new WeakMap,$i=is(or,Ae),ji=rr?Mr(Ce,he,$o(we),Kt,Qo(Cr),j,$i,X,$e,new WeakMap,new WeakMap,La($e,Ae),we):void 0,qi=Ss(Yt,X),Qi=ko(jt,Ce,Fo,Yo,new WeakSet,j,qi,dt,Ye,qt,Qt),sr=uo(ji,ai,ii,li,di,mi,gi,xi,Si,Qi,Mi,Pi,Ti,Ri,ki,Li,Vi,Gi,zi,Yi),Ki=Is(re,na,j,X),Ji=As(re,ra,j,X),ec=Ts(re,oa,j,X),tc=sa(ae,X),nc=Es(re,tc,j),Gc=Zr(sr,ae,he,Wa,Ki,Ji,ec,nc,nt),Jt=cs(Kn),rc=Tr(Jt),ar=No(Se),oc=Vo(Jt),ir=Ho(Se),cr=new WeakMap,sc=ts(cr,ye),ac=zs(ar,Se,ae,Re,Je,ze,me,et,he,ir,Kt,sc,De),ic=Us(ae,ac,me,he,De),cc=lo(Ne,ar,Ze,Re,Je,ze,me,oc,ir,Kt,Q,$e,Ae,Me,ce,Nt),lc=ss(or),uc=Ea(cr),Hc=rr?ao(rc,re,xe,cc,ic,de,lc,j,X,$e,Ya,uc,Ja,He):void 0,fc=Ro(he,Ae),dc=Da(jt,Ce,Xt,Jt,Nt,dt,qt,Qt),Zc=va(sr,Ce,ae,fc,dc),zc=ms(Ct,Yt),Xc=vs(Bt,$t),Yc=gs(Wt,Yn),$c=ys(Ct,X);function jc(o,d,i,m){var a=arguments.length,e=a<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,i):m,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(o,d,i,m);else for(var n=o.length-1;n>=0;n--)(l=o[n])&&(e=(a<3?l(e):a>3?l(d,i,e):l(d,i))||e);return a>3&&e&&Object.defineProperty(d,i,e),e}function qc(o,d,i,m){function a(e){return e instanceof i?e:new i(function(l){l(e)})}return new(i||(i=Promise))(function(e,l){function n(s){try{c(m.next(s))}catch(h){l(h)}}function r(s){try{c(m.throw(s))}catch(h){l(h)}}function c(s){s.done?e(s.value):a(s.value).then(n,r)}c((m=m.apply(o,d||[])).next())})}var lt={exports:{}};/*!
* matter-js 0.20.0 by @liabru
* http://brm.io/matter-js/
* License MIT
* 
* The MIT License (MIT)
* 
* Copyright (c) Liam Brummitt and contributors.
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/var hc=lt.exports,gn;function Qc(){return gn||(gn=1,(function(o,d){(function(m,a){o.exports=a()})(hc,function(){return(function(i){var m={};function a(e){if(m[e])return m[e].exports;var l=m[e]={i:e,l:!1,exports:{}};return i[e].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=i,a.c=m,a.d=function(e,l,n){a.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:n})},a.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,l){if(l&1&&(e=a(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var r in e)a.d(n,r,function(c){return e[c]}.bind(null,r));return n},a.n=function(e){var l=e&&e.__esModule?(function(){return e.default}):(function(){return e});return a.d(l,"a",l),l},a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},a.p="",a(a.s=20)})([(function(i,m){var a={};i.exports=a,(function(){a._baseDelta=1e3/60,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(l,n){var r,c;typeof n=="boolean"?(r=2,c=n):(r=1,c=!0);for(var s=r;s<arguments.length;s++){var h=arguments[s];if(h)for(var p in h)c&&h[p]&&h[p].constructor===Object&&(!l[p]||l[p].constructor===Object)?(l[p]=l[p]||{},a.extend(l[p],c,h[p])):l[p]=h[p]}return l},a.clone=function(l,n){return a.extend({},n,l)},a.keys=function(l){if(Object.keys)return Object.keys(l);var n=[];for(var r in l)n.push(r);return n},a.values=function(l){var n=[];if(Object.keys){for(var r=Object.keys(l),c=0;c<r.length;c++)n.push(l[r[c]]);return n}for(var s in l)n.push(l[s]);return n},a.get=function(l,n,r,c){n=n.split(".").slice(r,c);for(var s=0;s<n.length;s+=1)l=l[n[s]];return l},a.set=function(l,n,r,c,s){var h=n.split(".").slice(c,s);return a.get(l,n,0,-1)[h[h.length-1]]=r,r},a.shuffle=function(l){for(var n=l.length-1;n>0;n--){var r=Math.floor(a.random()*(n+1)),c=l[n];l[n]=l[r],l[r]=c}return l},a.choose=function(l){return l[Math.floor(a.random()*l.length)]},a.isElement=function(l){return typeof HTMLElement<"u"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},a.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},a.isFunction=function(l){return typeof l=="function"},a.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},a.isString=function(l){return toString.call(l)==="[object String]"},a.clamp=function(l,n,r){return l<n?n:l>r?r:l},a.sign=function(l){return l<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(l,n){return l=typeof l<"u"?l:0,n=typeof n<"u"?n:1,l+e()*(n-l)};var e=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[l]||(a.warn(l),a._warnedOnce[l]=!0)},a.deprecated=function(l,n,r){l[n]=a.chain(function(){a.warnOnce(" deprecated ",r)},l[n])},a.nextId=function(){return a._nextId++},a.indexOf=function(l,n){if(l.indexOf)return l.indexOf(n);for(var r=0;r<l.length;r++)if(l[r]===n)return r;return-1},a.map=function(l,n){if(l.map)return l.map(n);for(var r=[],c=0;c<l.length;c+=1)r.push(n(l[c]));return r},a.topologicalSort=function(l){var n=[],r=[],c=[];for(var s in l)!r[s]&&!c[s]&&a._topologicalSort(s,r,c,l,n);return n},a._topologicalSort=function(l,n,r,c,s){var h=c[l]||[];r[l]=!0;for(var p=0;p<h.length;p+=1){var t=h[p];r[t]||n[t]||a._topologicalSort(t,n,r,c,s)}r[l]=!1,n[l]=!0,s.push(l)},a.chain=function(){for(var l=[],n=0;n<arguments.length;n+=1){var r=arguments[n];r._chained?l.push.apply(l,r._chained):l.push(r)}var c=function(){for(var s,h=new Array(arguments.length),p=0,t=arguments.length;p<t;p++)h[p]=arguments[p];for(p=0;p<l.length;p+=1){var u=l[p].apply(s,h);typeof u<"u"&&(s=u)}return s};return c._chained=l,c},a.chainPathBefore=function(l,n,r){return a.set(l,n,a.chain(r,a.get(l,n)))},a.chainPathAfter=function(l,n,r){return a.set(l,n,a.chain(a.get(l,n),r))},a.setDecomp=function(l){a._decomp=l},a.getDecomp=function(){var l=a._decomp;try{!l&&typeof window<"u"&&(l=window.decomp),!l&&typeof globalThis<"u"&&(l=globalThis.decomp)}catch{l=null}return l}})()}),(function(i,m){var a={};i.exports=a,(function(){a.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&a.update(l,e),l},a.update=function(e,l,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<l.length;r++){var c=l[r];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},a.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},a.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},a.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},a.shift=function(e,l){var n=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+n,e.min.y=l.y,e.max.y=l.y+r}})()}),(function(i,m){var a={};i.exports=a,(function(){a.create=function(e,l){return{x:e||0,y:l||0}},a.clone=function(e){return{x:e.x,y:e.y}},a.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},a.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},a.rotate=function(e,l,n){var r=Math.cos(l),c=Math.sin(l);n||(n={});var s=e.x*r-e.y*c;return n.y=e.x*c+e.y*r,n.x=s,n},a.rotateAbout=function(e,l,n,r){var c=Math.cos(l),s=Math.sin(l);r||(r={});var h=n.x+((e.x-n.x)*c-(e.y-n.y)*s);return r.y=n.y+((e.x-n.x)*s+(e.y-n.y)*c),r.x=h,r},a.normalise=function(e){var l=a.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},a.dot=function(e,l){return e.x*l.x+e.y*l.y},a.cross=function(e,l){return e.x*l.y-e.y*l.x},a.cross3=function(e,l,n){return(l.x-e.x)*(n.y-e.y)-(l.y-e.y)*(n.x-e.x)},a.add=function(e,l,n){return n||(n={}),n.x=e.x+l.x,n.y=e.y+l.y,n},a.sub=function(e,l,n){return n||(n={}),n.x=e.x-l.x,n.y=e.y-l.y,n},a.mult=function(e,l){return{x:e.x*l,y:e.y*l}},a.div=function(e,l){return{x:e.x/l,y:e.y/l}},a.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},a.neg=function(e){return{x:-e.x,y:-e.y}},a.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},a._temp=[a.create(),a.create(),a.create(),a.create(),a.create(),a.create()]})()}),(function(i,m,a){var e={};i.exports=e;var l=a(2),n=a(0);(function(){e.create=function(r,c){for(var s=[],h=0;h<r.length;h++){var p=r[h],t={x:p.x,y:p.y,index:h,body:c,isInternal:!1};s.push(t)}return s},e.fromPath=function(r,c){var s=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return r.replace(s,function(p,t,u){h.push({x:parseFloat(t),y:parseFloat(u)})}),e.create(h,c)},e.centre=function(r){for(var c=e.area(r,!0),s={x:0,y:0},h,p,t,u=0;u<r.length;u++)t=(u+1)%r.length,h=l.cross(r[u],r[t]),p=l.mult(l.add(r[u],r[t]),h),s=l.add(s,p);return l.div(s,6*c)},e.mean=function(r){for(var c={x:0,y:0},s=0;s<r.length;s++)c.x+=r[s].x,c.y+=r[s].y;return l.div(c,r.length)},e.area=function(r,c){for(var s=0,h=r.length-1,p=0;p<r.length;p++)s+=(r[h].x-r[p].x)*(r[h].y+r[p].y),h=p;return c?s/2:Math.abs(s)/2},e.inertia=function(r,c){for(var s=0,h=0,p=r,t,u,f=0;f<p.length;f++)u=(f+1)%p.length,t=Math.abs(l.cross(p[u],p[f])),s+=t*(l.dot(p[u],p[u])+l.dot(p[u],p[f])+l.dot(p[f],p[f])),h+=t;return c/6*(s/h)},e.translate=function(r,c,s){s=typeof s<"u"?s:1;var h=r.length,p=c.x*s,t=c.y*s,u;for(u=0;u<h;u++)r[u].x+=p,r[u].y+=t;return r},e.rotate=function(r,c,s){if(c!==0){var h=Math.cos(c),p=Math.sin(c),t=s.x,u=s.y,f=r.length,v,y,S,M;for(M=0;M<f;M++)v=r[M],y=v.x-t,S=v.y-u,v.x=t+(y*h-S*p),v.y=u+(y*p+S*h);return r}},e.contains=function(r,c){for(var s=c.x,h=c.y,p=r.length,t=r[p-1],u,f=0;f<p;f++){if(u=r[f],(s-t.x)*(u.y-t.y)+(h-t.y)*(t.x-u.x)>0)return!1;t=u}return!0},e.scale=function(r,c,s,h){if(c===1&&s===1)return r;h=h||e.centre(r);for(var p,t,u=0;u<r.length;u++)p=r[u],t=l.sub(p,h),r[u].x=h.x+t.x*c,r[u].y=h.y+t.y*s;return r},e.chamfer=function(r,c,s,h,p){typeof c=="number"?c=[c]:c=c||[8],s=typeof s<"u"?s:-1,h=h||2,p=p||14;for(var t=[],u=0;u<r.length;u++){var f=r[u-1>=0?u-1:r.length-1],v=r[u],y=r[(u+1)%r.length],S=c[u<c.length?u:c.length-1];if(S===0){t.push(v);continue}var M=l.normalise({x:v.y-f.y,y:f.x-v.x}),T=l.normalise({x:y.y-v.y,y:v.x-y.x}),g=Math.sqrt(2*Math.pow(S,2)),x=l.mult(n.clone(M),S),w=l.normalise(l.mult(l.add(M,T),.5)),C=l.sub(v,l.mult(w,g)),I=s;s===-1&&(I=Math.pow(S,.32)*1.75),I=n.clamp(I,h,p),I%2===1&&(I+=1);for(var N=Math.acos(l.dot(M,T)),A=N/I,P=0;P<I;P++)t.push(l.add(l.rotate(x,A*P),C))}return t},e.clockwiseSort=function(r){var c=e.mean(r);return r.sort(function(s,h){return l.angle(c,s)-l.angle(c,h)}),r},e.isConvex=function(r){var c=0,s=r.length,h,p,t,u;if(s<3)return null;for(h=0;h<s;h++)if(p=(h+1)%s,t=(h+2)%s,u=(r[p].x-r[h].x)*(r[t].y-r[p].y),u-=(r[p].y-r[h].y)*(r[t].x-r[p].x),u<0?c|=1:u>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(r){var c=[],s=[],h,p;for(r=r.slice(0),r.sort(function(t,u){var f=t.x-u.x;return f!==0?f:t.y-u.y}),p=0;p<r.length;p+=1){for(h=r[p];s.length>=2&&l.cross3(s[s.length-2],s[s.length-1],h)<=0;)s.pop();s.push(h)}for(p=r.length-1;p>=0;p-=1){for(h=r[p];c.length>=2&&l.cross3(c[c.length-2],c[c.length-1],h)<=0;)c.pop();c.push(h)}return c.pop(),s.pop(),c.concat(s)}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(3),n=a(2),r=a(7),c=a(0),s=a(1),h=a(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var u={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},f=c.extend(u,t);return p(f,t),f},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var p=function(t,u){u=u||{},e.set(t,{bounds:t.bounds||s.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),h.rotate(t.axes,t.angle),s.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:u.axes||t.axes,area:u.area||t.area,mass:u.mass||t.mass,inertia:u.inertia||t.inertia});var f=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",y=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||f,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||y,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,u,f){var v;typeof u=="string"&&(v=u,u={},u[v]=f);for(v in u)if(Object.prototype.hasOwnProperty.call(u,v))switch(f=u[v],v){case"isStatic":e.setStatic(t,f);break;case"isSleeping":r.set(t,f);break;case"mass":e.setMass(t,f);break;case"density":e.setDensity(t,f);break;case"inertia":e.setInertia(t,f);break;case"vertices":e.setVertices(t,f);break;case"position":e.setPosition(t,f);break;case"angle":e.setAngle(t,f);break;case"velocity":e.setVelocity(t,f);break;case"angularVelocity":e.setAngularVelocity(t,f);break;case"speed":e.setSpeed(t,f);break;case"angularSpeed":e.setAngularSpeed(t,f);break;case"parts":e.setParts(t,f);break;case"centre":e.setCentre(t,f);break;default:t[v]=f}},e.setStatic=function(t,u){for(var f=0;f<t.parts.length;f++){var v=t.parts[f];u?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=u}},e.setMass=function(t,u){var f=t.inertia/(t.mass/6);t.inertia=f*(u/6),t.inverseInertia=1/t.inertia,t.mass=u,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,u){e.setMass(t,u*t.area),t.density=u},e.setInertia=function(t,u){t.inertia=u,t.inverseInertia=1/t.inertia},e.setVertices=function(t,u){u[0].body===t?t.vertices=u:t.vertices=l.create(u,t),t.axes=h.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var f=l.centre(t.vertices);l.translate(t.vertices,f,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),s.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,u,f){var v;for(u=u.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<u.length;v++){var y=u[v];y!==t&&(y.parent=t,t.parts.push(y))}if(t.parts.length!==1){if(f=typeof f<"u"?f:!0,f){var S=[];for(v=0;v<u.length;v++)S=S.concat(u[v].vertices);l.clockwiseSort(S);var M=l.hull(S),T=l.centre(M);e.setVertices(t,M),l.translate(t.vertices,T)}var g=e._totalProperties(t);t.area=g.area,t.parent=t,t.position.x=g.centre.x,t.position.y=g.centre.y,t.positionPrev.x=g.centre.x,t.positionPrev.y=g.centre.y,e.setMass(t,g.mass),e.setInertia(t,g.inertia),e.setPosition(t,g.centre)}},e.setCentre=function(t,u,f){f?(t.positionPrev.x+=u.x,t.positionPrev.y+=u.y,t.position.x+=u.x,t.position.y+=u.y):(t.positionPrev.x=u.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=u.y-(t.position.y-t.positionPrev.y),t.position.x=u.x,t.position.y=u.y)},e.setPosition=function(t,u,f){var v=n.sub(u,t.position);f?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=v.x,t.velocity.y=v.y,t.speed=n.magnitude(v)):(t.positionPrev.x+=v.x,t.positionPrev.y+=v.y);for(var y=0;y<t.parts.length;y++){var S=t.parts[y];S.position.x+=v.x,S.position.y+=v.y,l.translate(S.vertices,v),s.update(S.bounds,S.vertices,t.velocity)}},e.setAngle=function(t,u,f){var v=u-t.angle;f?(t.anglePrev=t.angle,t.angularVelocity=v,t.angularSpeed=Math.abs(v)):t.anglePrev+=v;for(var y=0;y<t.parts.length;y++){var S=t.parts[y];S.angle+=v,l.rotate(S.vertices,v,t.position),h.rotate(S.axes,v),s.update(S.bounds,S.vertices,t.velocity),y>0&&n.rotateAbout(S.position,v,t.position,S.position)}},e.setVelocity=function(t,u){var f=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-u.x*f,t.positionPrev.y=t.position.y-u.y*f,t.velocity.x=(t.position.x-t.positionPrev.x)/f,t.velocity.y=(t.position.y-t.positionPrev.y)/f,t.speed=n.magnitude(t.velocity)},e.getVelocity=function(t){var u=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*u,y:(t.position.y-t.positionPrev.y)*u}},e.getSpeed=function(t){return n.magnitude(e.getVelocity(t))},e.setSpeed=function(t,u){e.setVelocity(t,n.mult(n.normalise(e.getVelocity(t)),u))},e.setAngularVelocity=function(t,u){var f=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-u*f,t.angularVelocity=(t.angle-t.anglePrev)/f,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,u){e.setAngularVelocity(t,c.sign(e.getAngularVelocity(t))*u)},e.translate=function(t,u,f){e.setPosition(t,n.add(t.position,u),f)},e.rotate=function(t,u,f,v){if(!f)e.setAngle(t,t.angle+u,v);else{var y=Math.cos(u),S=Math.sin(u),M=t.position.x-f.x,T=t.position.y-f.y;e.setPosition(t,{x:f.x+(M*y-T*S),y:f.y+(M*S+T*y)},v),e.setAngle(t,t.angle+u,v)}},e.scale=function(t,u,f,v){var y=0,S=0;v=v||t.position;for(var M=0;M<t.parts.length;M++){var T=t.parts[M];l.scale(T.vertices,u,f,v),T.axes=h.fromVertices(T.vertices),T.area=l.area(T.vertices),e.setMass(T,t.density*T.area),l.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),e.setInertia(T,e._inertiaScale*l.inertia(T.vertices,T.mass)),l.translate(T.vertices,{x:T.position.x,y:T.position.y}),M>0&&(y+=T.area,S+=T.inertia),T.position.x=v.x+(T.position.x-v.x)*u,T.position.y=v.y+(T.position.y-v.y)*f,s.update(T.bounds,T.vertices,t.velocity)}t.parts.length>1&&(t.area=y,t.isStatic||(e.setMass(t,t.density*y),e.setInertia(t,S))),t.circleRadius&&(u===f?t.circleRadius*=u:t.circleRadius=null)},e.update=function(t,u){u=(typeof u<"u"?u:1e3/60)*t.timeScale;var f=u*u,v=e._timeCorrection?u/(t.deltaTime||u):1,y=1-t.frictionAir*(u/c._baseDelta),S=(t.position.x-t.positionPrev.x)*v,M=(t.position.y-t.positionPrev.y)*v;t.velocity.x=S*y+t.force.x/t.mass*f,t.velocity.y=M*y+t.force.y/t.mass*f,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=u,t.angularVelocity=(t.angle-t.anglePrev)*y*v+t.torque/t.inertia*f,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var T=0;T<t.parts.length;T++){var g=t.parts[T];l.translate(g.vertices,t.velocity),T>0&&(g.position.x+=t.velocity.x,g.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(g.vertices,t.angularVelocity,t.position),h.rotate(g.axes,t.angularVelocity),T>0&&n.rotateAbout(g.position,t.angularVelocity,t.position,g.position)),s.update(g.bounds,g.vertices,t.velocity)}},e.updateVelocities=function(t){var u=e._baseDelta/t.deltaTime,f=t.velocity;f.x=(t.position.x-t.positionPrev.x)*u,f.y=(t.position.y-t.positionPrev.y)*u,t.speed=Math.sqrt(f.x*f.x+f.y*f.y),t.angularVelocity=(t.angle-t.anglePrev)*u,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,u,f){var v={x:u.x-t.position.x,y:u.y-t.position.y};t.force.x+=f.x,t.force.y+=f.y,t.torque+=v.x*f.y-v.y*f.x},e._totalProperties=function(t){for(var u={mass:0,area:0,inertia:0,centre:{x:0,y:0}},f=t.parts.length===1?0:1;f<t.parts.length;f++){var v=t.parts[f],y=v.mass!==1/0?v.mass:1;u.mass+=y,u.area+=v.area,u.inertia+=v.inertia,u.centre=n.add(u.centre,n.mult(v.position,y))}return u.centre=n.div(u.centre,u.mass),u}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(0);(function(){e.on=function(n,r,c){for(var s=r.split(" "),h,p=0;p<s.length;p++)h=s[p],n.events=n.events||{},n.events[h]=n.events[h]||[],n.events[h].push(c);return c},e.off=function(n,r,c){if(!r){n.events={};return}typeof r=="function"&&(c=r,r=l.keys(n.events).join(" "));for(var s=r.split(" "),h=0;h<s.length;h++){var p=n.events[s[h]],t=[];if(c&&p)for(var u=0;u<p.length;u++)p[u]!==c&&t.push(p[u]);n.events[s[h]]=t}},e.trigger=function(n,r,c){var s,h,p,t,u=n.events;if(u&&l.keys(u).length>0){c||(c={}),s=r.split(" ");for(var f=0;f<s.length;f++)if(h=s[f],p=u[h],p){t=l.clone(c,!1),t.name=h,t.source=n;for(var v=0;v<p.length;v++)p[v].apply(n,[t])}}}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(5),n=a(0),r=a(1),c=a(4);(function(){e.create=function(s){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},s)},e.setModified=function(s,h,p,t){if(s.isModified=h,h&&s.cache&&(s.cache.allBodies=null,s.cache.allConstraints=null,s.cache.allComposites=null),p&&s.parent&&e.setModified(s.parent,h,p,t),t)for(var u=0;u<s.composites.length;u++){var f=s.composites[u];e.setModified(f,h,p,t)}},e.add=function(s,h){var p=[].concat(h);l.trigger(s,"beforeAdd",{object:h});for(var t=0;t<p.length;t++){var u=p[t];switch(u.type){case"body":if(u.parent!==u){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(s,u);break;case"constraint":e.addConstraint(s,u);break;case"composite":e.addComposite(s,u);break;case"mouseConstraint":e.addConstraint(s,u.constraint);break}}return l.trigger(s,"afterAdd",{object:h}),s},e.remove=function(s,h,p){var t=[].concat(h);l.trigger(s,"beforeRemove",{object:h});for(var u=0;u<t.length;u++){var f=t[u];switch(f.type){case"body":e.removeBody(s,f,p);break;case"constraint":e.removeConstraint(s,f,p);break;case"composite":e.removeComposite(s,f,p);break;case"mouseConstraint":e.removeConstraint(s,f.constraint);break}}return l.trigger(s,"afterRemove",{object:h}),s},e.addComposite=function(s,h){return s.composites.push(h),h.parent=s,e.setModified(s,!0,!0,!1),s},e.removeComposite=function(s,h,p){var t=n.indexOf(s.composites,h);if(t!==-1){var u=e.allBodies(h);e.removeCompositeAt(s,t);for(var f=0;f<u.length;f++)u[f].sleepCounter=0}if(p)for(var f=0;f<s.composites.length;f++)e.removeComposite(s.composites[f],h,!0);return s},e.removeCompositeAt=function(s,h){return s.composites.splice(h,1),e.setModified(s,!0,!0,!1),s},e.addBody=function(s,h){return s.bodies.push(h),e.setModified(s,!0,!0,!1),s},e.removeBody=function(s,h,p){var t=n.indexOf(s.bodies,h);if(t!==-1&&(e.removeBodyAt(s,t),h.sleepCounter=0),p)for(var u=0;u<s.composites.length;u++)e.removeBody(s.composites[u],h,!0);return s},e.removeBodyAt=function(s,h){return s.bodies.splice(h,1),e.setModified(s,!0,!0,!1),s},e.addConstraint=function(s,h){return s.constraints.push(h),e.setModified(s,!0,!0,!1),s},e.removeConstraint=function(s,h,p){var t=n.indexOf(s.constraints,h);if(t!==-1&&e.removeConstraintAt(s,t),p)for(var u=0;u<s.composites.length;u++)e.removeConstraint(s.composites[u],h,!0);return s},e.removeConstraintAt=function(s,h){return s.constraints.splice(h,1),e.setModified(s,!0,!0,!1),s},e.clear=function(s,h,p){if(p)for(var t=0;t<s.composites.length;t++)e.clear(s.composites[t],h,!0);return h?s.bodies=s.bodies.filter(function(u){return u.isStatic}):s.bodies.length=0,s.constraints.length=0,s.composites.length=0,e.setModified(s,!0,!0,!1),s},e.allBodies=function(s){if(s.cache&&s.cache.allBodies)return s.cache.allBodies;for(var h=[].concat(s.bodies),p=0;p<s.composites.length;p++)h=h.concat(e.allBodies(s.composites[p]));return s.cache&&(s.cache.allBodies=h),h},e.allConstraints=function(s){if(s.cache&&s.cache.allConstraints)return s.cache.allConstraints;for(var h=[].concat(s.constraints),p=0;p<s.composites.length;p++)h=h.concat(e.allConstraints(s.composites[p]));return s.cache&&(s.cache.allConstraints=h),h},e.allComposites=function(s){if(s.cache&&s.cache.allComposites)return s.cache.allComposites;for(var h=[].concat(s.composites),p=0;p<s.composites.length;p++)h=h.concat(e.allComposites(s.composites[p]));return s.cache&&(s.cache.allComposites=h),h},e.get=function(s,h,p){var t,u;switch(p){case"body":t=e.allBodies(s);break;case"constraint":t=e.allConstraints(s);break;case"composite":t=e.allComposites(s).concat(s);break}return t?(u=t.filter(function(f){return f.id.toString()===h.toString()}),u.length===0?null:u[0]):null},e.move=function(s,h,p){return e.remove(s,h),e.add(p,h),s},e.rebase=function(s){for(var h=e.allBodies(s).concat(e.allConstraints(s)).concat(e.allComposites(s)),p=0;p<h.length;p++)h[p].id=n.nextId();return s},e.translate=function(s,h,p){for(var t=p?e.allBodies(s):s.bodies,u=0;u<t.length;u++)c.translate(t[u],h);return s},e.rotate=function(s,h,p,t){for(var u=Math.cos(h),f=Math.sin(h),v=t?e.allBodies(s):s.bodies,y=0;y<v.length;y++){var S=v[y],M=S.position.x-p.x,T=S.position.y-p.y;c.setPosition(S,{x:p.x+(M*u-T*f),y:p.y+(M*f+T*u)}),c.rotate(S,h)}return s},e.scale=function(s,h,p,t,u){for(var f=u?e.allBodies(s):s.bodies,v=0;v<f.length;v++){var y=f[v],S=y.position.x-t.x,M=y.position.y-t.y;c.setPosition(y,{x:t.x+S*h,y:t.y+M*p}),c.scale(y,h,p)}return s},e.bounds=function(s){for(var h=e.allBodies(s),p=[],t=0;t<h.length;t+=1){var u=h[t];p.push(u.bounds.min,u.bounds.max)}return r.create(p)}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(4),n=a(5),r=a(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(c,s){for(var h=s/r._baseDelta,p=e._motionSleepThreshold,t=0;t<c.length;t++){var u=c[t],f=l.getSpeed(u),v=l.getAngularSpeed(u),y=f*f+v*v;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var S=Math.min(u.motion,y),M=Math.max(u.motion,y);u.motion=e._minBias*S+(1-e._minBias)*M,u.sleepThreshold>0&&u.motion<p?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold/h&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(c){for(var s=e._motionSleepThreshold,h=0;h<c.length;h++){var p=c[h];if(p.isActive){var t=p.collision,u=t.bodyA.parent,f=t.bodyB.parent;if(!(u.isSleeping&&f.isSleeping||u.isStatic||f.isStatic)&&(u.isSleeping||f.isSleeping)){var v=u.isSleeping&&!u.isStatic?u:f,y=v===u?f:u;!v.isStatic&&y.motion>s&&e.set(v,!1)}}}},e.set=function(c,s){var h=c.isSleeping;s?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,h||n.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,h&&n.trigger(c,"sleepEnd"))}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(3),n=a(9);(function(){var r=[],c={overlap:0,axis:null},s={overlap:0,axis:null};e.create=function(h,p){return{pair:null,collided:!1,bodyA:h,bodyB:p,parentA:h.parent,parentB:p.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(h,p,t){if(e._overlapAxes(c,h.vertices,p.vertices,h.axes),c.overlap<=0||(e._overlapAxes(s,p.vertices,h.vertices,p.axes),s.overlap<=0))return null;var u=t&&t.table[n.id(h,p)],f;u?f=u.collision:(f=e.create(h,p),f.collided=!0,f.bodyA=h.id<p.id?h:p,f.bodyB=h.id<p.id?p:h,f.parentA=f.bodyA.parent,f.parentB=f.bodyB.parent),h=f.bodyA,p=f.bodyB;var v;c.overlap<s.overlap?v=c:v=s;var y=f.normal,S=f.tangent,M=f.penetration,T=f.supports,g=v.overlap,x=v.axis,w=x.x,C=x.y,I=p.position.x-h.position.x,N=p.position.y-h.position.y;w*I+C*N>=0&&(w=-w,C=-C),y.x=w,y.y=C,S.x=-C,S.y=w,M.x=w*g,M.y=C*g,f.depth=g;var A=e._findSupports(h,p,y,1),P=0;if(l.contains(h.vertices,A[0])&&(T[P++]=A[0]),l.contains(h.vertices,A[1])&&(T[P++]=A[1]),P<2){var E=e._findSupports(p,h,y,-1);l.contains(p.vertices,E[0])&&(T[P++]=E[0]),P<2&&l.contains(p.vertices,E[1])&&(T[P++]=E[1])}return P===0&&(T[P++]=A[0]),f.supportCount=P,f},e._overlapAxes=function(h,p,t,u){var f=p.length,v=t.length,y=p[0].x,S=p[0].y,M=t[0].x,T=t[0].y,g=u.length,x=Number.MAX_VALUE,w=0,C,I,N,A,P,E;for(P=0;P<g;P++){var O=u[P],D=O.x,F=O.y,R=y*D+S*F,b=M*D+T*F,k=R,W=b;for(E=1;E<f;E+=1)A=p[E].x*D+p[E].y*F,A>k?k=A:A<R&&(R=A);for(E=1;E<v;E+=1)A=t[E].x*D+t[E].y*F,A>W?W=A:A<b&&(b=A);if(I=k-b,N=W-R,C=I<N?I:N,C<x&&(x=C,w=P,C<=0))break}h.axis=u[w],h.overlap=x},e._findSupports=function(h,p,t,u){var f=p.vertices,v=f.length,y=h.position.x,S=h.position.y,M=t.x*u,T=t.y*u,g=f[0],x=g,w=M*(y-x.x)+T*(S-x.y),C,I,N;for(N=1;N<v;N+=1)x=f[N],I=M*(y-x.x)+T*(S-x.y),I<w&&(w=I,g=x);return C=f[(v+g.index-1)%v],w=M*(y-C.x)+T*(S-C.y),x=f[(g.index+1)%v],M*(y-x.x)+T*(S-x.y)<w?(r[0]=g,r[1]=x,r):(r[0]=g,r[1]=C,r)}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(16);(function(){e.create=function(n,r){var c=n.bodyA,s=n.bodyB,h={id:e.id(c,s),bodyA:c,bodyB:s,collision:n,contacts:[l.create(),l.create()],contactCount:0,separation:0,isActive:!0,isSensor:c.isSensor||s.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(h,n,r),h},e.update=function(n,r,c){var s=r.supports,h=r.supportCount,p=n.contacts,t=r.parentA,u=r.parentB;n.isActive=!0,n.timeUpdated=c,n.collision=r,n.separation=r.depth,n.inverseMass=t.inverseMass+u.inverseMass,n.friction=t.friction<u.friction?t.friction:u.friction,n.frictionStatic=t.frictionStatic>u.frictionStatic?t.frictionStatic:u.frictionStatic,n.restitution=t.restitution>u.restitution?t.restitution:u.restitution,n.slop=t.slop>u.slop?t.slop:u.slop,n.contactCount=h,r.pair=n;var f=s[0],v=p[0],y=s[1],S=p[1];(S.vertex===f||v.vertex===y)&&(p[1]=v,p[0]=v=S,S=p[1]),v.vertex=f,S.vertex=y},e.setActive=function(n,r,c){r?(n.isActive=!0,n.timeUpdated=c):(n.isActive=!1,n.contactCount=0)},e.id=function(n,r){return n.id<r.id?n.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+n.id.toString(36)}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(3),n=a(2),r=a(7),c=a(1),s=a(11),h=a(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(p){var t=p;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var u=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,f=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,v=n.magnitude(n.sub(u,f));t.length=typeof t.length<"u"?t.length:v,t.id=t.id||h.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(y.type="pin",y.anchors=!1):t.stiffness<.9&&(y.type="spring"),t.render=h.extend(y,t.render),t},e.preSolveAll=function(p){for(var t=0;t<p.length;t+=1){var u=p[t],f=u.constraintImpulse;u.isStatic||f.x===0&&f.y===0&&f.angle===0||(u.position.x+=f.x,u.position.y+=f.y,u.angle+=f.angle)}},e.solveAll=function(p,t){for(var u=h.clamp(t/h._baseDelta,0,1),f=0;f<p.length;f+=1){var v=p[f],y=!v.bodyA||v.bodyA&&v.bodyA.isStatic,S=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(y||S)&&e.solve(p[f],u)}for(f=0;f<p.length;f+=1)v=p[f],y=!v.bodyA||v.bodyA&&v.bodyA.isStatic,S=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!y&&!S&&e.solve(p[f],u)},e.solve=function(p,t){var u=p.bodyA,f=p.bodyB,v=p.pointA,y=p.pointB;if(!(!u&&!f)){u&&!u.isStatic&&(n.rotate(v,u.angle-p.angleA,v),p.angleA=u.angle),f&&!f.isStatic&&(n.rotate(y,f.angle-p.angleB,y),p.angleB=f.angle);var S=v,M=y;if(u&&(S=n.add(u.position,v)),f&&(M=n.add(f.position,y)),!(!S||!M)){var T=n.sub(S,M),g=n.magnitude(T);g<e._minLength&&(g=e._minLength);var x=(g-p.length)/g,w=p.stiffness>=1||p.length===0,C=w?p.stiffness*t:p.stiffness*t*t,I=p.damping*t,N=n.mult(T,x*C),A=(u?u.inverseMass:0)+(f?f.inverseMass:0),P=(u?u.inverseInertia:0)+(f?f.inverseInertia:0),E=A+P,O,D,F,R,b;if(I>0){var k=n.create();F=n.div(T,g),b=n.sub(f&&n.sub(f.position,f.positionPrev)||k,u&&n.sub(u.position,u.positionPrev)||k),R=n.dot(F,b)}u&&!u.isStatic&&(D=u.inverseMass/A,u.constraintImpulse.x-=N.x*D,u.constraintImpulse.y-=N.y*D,u.position.x-=N.x*D,u.position.y-=N.y*D,I>0&&(u.positionPrev.x-=I*F.x*R*D,u.positionPrev.y-=I*F.y*R*D),O=n.cross(v,N)/E*e._torqueDampen*u.inverseInertia*(1-p.angularStiffness),u.constraintImpulse.angle-=O,u.angle-=O),f&&!f.isStatic&&(D=f.inverseMass/A,f.constraintImpulse.x+=N.x*D,f.constraintImpulse.y+=N.y*D,f.position.x+=N.x*D,f.position.y+=N.y*D,I>0&&(f.positionPrev.x+=I*F.x*R*D,f.positionPrev.y+=I*F.y*R*D),O=n.cross(y,N)/E*e._torqueDampen*f.inverseInertia*(1-p.angularStiffness),f.constraintImpulse.angle+=O,f.angle+=O)}}},e.postSolveAll=function(p){for(var t=0;t<p.length;t++){var u=p[t],f=u.constraintImpulse;if(!(u.isStatic||f.x===0&&f.y===0&&f.angle===0)){r.set(u,!1);for(var v=0;v<u.parts.length;v++){var y=u.parts[v];l.translate(y.vertices,f),v>0&&(y.position.x+=f.x,y.position.y+=f.y),f.angle!==0&&(l.rotate(y.vertices,f.angle,u.position),s.rotate(y.axes,f.angle),v>0&&n.rotateAbout(y.position,f.angle,u.position,y.position)),c.update(y.bounds,y.vertices,u.velocity)}f.angle*=e._warming,f.x*=e._warming,f.y*=e._warming}}},e.pointAWorld=function(p){return{x:(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),y:(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0)}},e.pointBWorld=function(p){return{x:(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y:(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0)}},e.currentLength=function(p){var t=(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),u=(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0),f=(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),v=(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0),y=t-f,S=u-v;return Math.sqrt(y*y+S*S)}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(2),n=a(0);(function(){e.fromVertices=function(r){for(var c={},s=0;s<r.length;s++){var h=(s+1)%r.length,p=l.normalise({x:r[h].y-r[s].y,y:r[s].x-r[h].x}),t=p.y===0?1/0:p.x/p.y;t=t.toFixed(3).toString(),c[t]=p}return n.values(c)},e.rotate=function(r,c){if(c!==0)for(var s=Math.cos(c),h=Math.sin(c),p=0;p<r.length;p++){var t=r[p],u;u=t.x*s-t.y*h,t.y=t.x*h+t.y*s,t.x=u}}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(3),n=a(0),r=a(4),c=a(1),s=a(2);(function(){e.rectangle=function(h,p,t,u,f){f=f||{};var v={label:"Rectangle Body",position:{x:h,y:p},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+u+" L 0 "+u)};if(f.chamfer){var y=f.chamfer;v.vertices=l.chamfer(v.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete f.chamfer}return r.create(n.extend({},v,f))},e.trapezoid=function(h,p,t,u,f,v){v=v||{},f>=1&&n.warn("Bodies.trapezoid: slope parameter must be < 1."),f*=.5;var y=(1-f*2)*t,S=t*f,M=S+y,T=M+S,g;f<.5?g="L 0 0 L "+S+" "+-u+" L "+M+" "+-u+" L "+T+" 0":g="L 0 0 L "+M+" "+-u+" L "+T+" 0";var x={label:"Trapezoid Body",position:{x:h,y:p},vertices:l.fromPath(g)};if(v.chamfer){var w=v.chamfer;x.vertices=l.chamfer(x.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete v.chamfer}return r.create(n.extend({},x,v))},e.circle=function(h,p,t,u,f){u=u||{};var v={label:"Circle Body",circleRadius:t};f=f||25;var y=Math.ceil(Math.max(10,Math.min(f,t)));return y%2===1&&(y+=1),e.polygon(h,p,y,t,n.extend({},v,u))},e.polygon=function(h,p,t,u,f){if(f=f||{},t<3)return e.circle(h,p,u,f);for(var v=2*Math.PI/t,y="",S=v*.5,M=0;M<t;M+=1){var T=S+M*v,g=Math.cos(T)*u,x=Math.sin(T)*u;y+="L "+g.toFixed(3)+" "+x.toFixed(3)+" "}var w={label:"Polygon Body",position:{x:h,y:p},vertices:l.fromPath(y)};if(f.chamfer){var C=f.chamfer;w.vertices=l.chamfer(w.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete f.chamfer}return r.create(n.extend({},w,f))},e.fromVertices=function(h,p,t,u,f,v,y,S){var M=n.getDecomp(),T,g,x,w,C,I,N,A,P,E,O;for(T=!!(M&&M.quickDecomp),u=u||{},x=[],f=typeof f<"u"?f:!1,v=typeof v<"u"?v:.01,y=typeof y<"u"?y:10,S=typeof S<"u"?S:.01,n.isArray(t[0])||(t=[t]),E=0;E<t.length;E+=1)if(I=t[E],w=l.isConvex(I),C=!w,C&&!T&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),w||!T)w?I=l.clockwiseSort(I):I=l.hull(I),x.push({position:{x:h,y:p},vertices:I});else{var D=I.map(function(V){return[V.x,V.y]});M.makeCCW(D),v!==!1&&M.removeCollinearPoints(D,v),S!==!1&&M.removeDuplicatePoints&&M.removeDuplicatePoints(D,S);var F=M.quickDecomp(D);for(N=0;N<F.length;N++){var R=F[N],b=R.map(function(V){return{x:V[0],y:V[1]}});y>0&&l.area(b)<y||x.push({position:l.centre(b),vertices:b})}}for(N=0;N<x.length;N++)x[N]=r.create(n.extend(x[N],u));if(f){var k=5;for(N=0;N<x.length;N++){var W=x[N];for(A=N+1;A<x.length;A++){var _=x[A];if(c.overlaps(W.bounds,_.bounds)){var H=W.vertices,z=_.vertices;for(P=0;P<W.vertices.length;P++)for(O=0;O<_.vertices.length;O++){var J=s.magnitudeSquared(s.sub(H[(P+1)%H.length],z[O])),G=s.magnitudeSquared(s.sub(H[P],z[(O+1)%z.length]));J<k&&G<k&&(H[P].isInternal=!0,z[O].isInternal=!0)}}}}}return x.length>1?(g=r.create(n.extend({parts:x.slice(0)},u)),r.setPosition(g,{x:h,y:p}),g):x[0]}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(0),n=a(8);(function(){e.create=function(r){var c={bodies:[],collisions:[],pairs:null};return l.extend(c,r)},e.setBodies=function(r,c){r.bodies=c.slice(0)},e.clear=function(r){r.bodies=[],r.collisions=[]},e.collisions=function(r){var c=r.pairs,s=r.bodies,h=s.length,p=e.canCollide,t=n.collides,u=r.collisions,f=0,v,y;for(s.sort(e._compareBoundsX),v=0;v<h;v++){var S=s[v],M=S.bounds,T=S.bounds.max.x,g=S.bounds.max.y,x=S.bounds.min.y,w=S.isStatic||S.isSleeping,C=S.parts.length,I=C===1;for(y=v+1;y<h;y++){var N=s[y],A=N.bounds;if(A.min.x>T)break;if(!(g<A.min.y||x>A.max.y)&&!(w&&(N.isStatic||N.isSleeping))&&p(S.collisionFilter,N.collisionFilter)){var P=N.parts.length;if(I&&P===1){var E=t(S,N,c);E&&(u[f++]=E)}else for(var O=C>1?1:0,D=P>1?1:0,F=O;F<C;F++)for(var R=S.parts[F],M=R.bounds,b=D;b<P;b++){var k=N.parts[b],A=k.bounds;if(!(M.min.x>A.max.x||M.max.x<A.min.x||M.max.y<A.min.y||M.min.y>A.max.y)){var E=t(R,k,c);E&&(u[f++]=E)}}}}}return u.length!==f&&(u.length=f),u},e.canCollide=function(r,c){return r.group===c.group&&r.group!==0?r.group>0:(r.mask&c.category)!==0&&(c.mask&r.category)!==0},e._compareBoundsX=function(r,c){return r.bounds.min.x-c.bounds.min.x}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(0);(function(){e.create=function(n){var r={};return n||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),r.element=n||document.body,r.absolute={x:0,y:0},r.position={x:0,y:0},r.mousedownPosition={x:0,y:0},r.mouseupPosition={x:0,y:0},r.offset={x:0,y:0},r.scale={x:1,y:1},r.wheelDelta=0,r.button=-1,r.pixelRatio=parseInt(r.element.getAttribute("data-pixel-ratio"),10)||1,r.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},r.mousemove=function(c){var s=e._getRelativeMousePosition(c,r.element,r.pixelRatio),h=c.changedTouches;h&&(r.button=0,c.preventDefault()),r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.sourceEvents.mousemove=c},r.mousedown=function(c){var s=e._getRelativeMousePosition(c,r.element,r.pixelRatio),h=c.changedTouches;h?(r.button=0,c.preventDefault()):r.button=c.button,r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mousedownPosition.x=r.position.x,r.mousedownPosition.y=r.position.y,r.sourceEvents.mousedown=c},r.mouseup=function(c){var s=e._getRelativeMousePosition(c,r.element,r.pixelRatio),h=c.changedTouches;h&&c.preventDefault(),r.button=-1,r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mouseupPosition.x=r.position.x,r.mouseupPosition.y=r.position.y,r.sourceEvents.mouseup=c},r.mousewheel=function(c){r.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault(),r.sourceEvents.mousewheel=c},e.setElement(r,r.element),r},e.setElement=function(n,r){n.element=r,r.addEventListener("mousemove",n.mousemove,{passive:!0}),r.addEventListener("mousedown",n.mousedown,{passive:!0}),r.addEventListener("mouseup",n.mouseup,{passive:!0}),r.addEventListener("wheel",n.mousewheel,{passive:!1}),r.addEventListener("touchmove",n.mousemove,{passive:!1}),r.addEventListener("touchstart",n.mousedown,{passive:!1}),r.addEventListener("touchend",n.mouseup,{passive:!1})},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,r){n.offset.x=r.x,n.offset.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,r){n.scale.x=r.x,n.scale.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,r,c){var s=r.getBoundingClientRect(),h=document.documentElement||document.body.parentNode||document.body,p=window.pageXOffset!==void 0?window.pageXOffset:h.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:h.scrollTop,u=n.changedTouches,f,v;return u?(f=u[0].pageX-s.left-p,v=u[0].pageY-s.top-t):(f=n.pageX-s.left-p,v=n.pageY-s.top-t),{x:f/(r.clientWidth/(r.width||r.clientWidth)*c),y:v/(r.clientHeight/(r.height||r.clientHeight)*c)}}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||l.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var r=e._registry[n.name],c=e.versionParse(n.version).number,s=e.versionParse(r.version).number;c>s?(l.warn("Plugin.register:",e.toString(r),"was upgraded to",e.toString(n)),e._registry[n.name]=n):c<s?l.warn("Plugin.register:",e.toString(r),"can not be downgraded to",e.toString(n)):n!==r&&l.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,r){return n.used.indexOf(r)>-1},e.isFor=function(n,r){var c=n.for&&e.dependencyParse(n.for);return!n.for||r.name===c.name&&e.versionSatisfies(r.version,c.range)},e.use=function(n,r){if(n.uses=(n.uses||[]).concat(r||[]),n.uses.length===0){l.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var c=e.dependencies(n),s=l.topologicalSort(c),h=[],p=0;p<s.length;p+=1)if(s[p]!==n.name){var t=e.resolve(s[p]);if(!t){h.push(" "+s[p]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(h.push(" "+e.toString(t)),delete t._warned):h.push(" "+e.toString(t)),n.used.push(t.name))}h.length>0&&l.info(h.join("  "))},e.dependencies=function(n,r){var c=e.dependencyParse(n),s=c.name;if(r=r||{},!(s in r)){n=e.resolve(n)||n,r[s]=l.map(n.uses||[],function(p){e.isPlugin(p)&&e.register(p);var t=e.dependencyParse(p),u=e.resolve(p);return u&&!e.versionSatisfies(u.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(u),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),u._warned=!0,n._warned=!0):u||(l.warn("Plugin.dependencies:",e.toString(p),"used by",e.toString(c),"could not be resolved."),n._warned=!0),t.name});for(var h=0;h<r[s].length;h+=1)e.dependencies(r[s][h],r);return r}},e.dependencyParse=function(n){if(l.isString(n)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(n)||l.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(n)||l.warn("Plugin.versionParse:",n,"is not a valid version or range.");var c=r.exec(n),s=Number(c[4]),h=Number(c[5]),p=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:n,operator:c[1]||c[2]||"",major:s,minor:h,patch:p,parts:[s,h,p],prerelease:c[7],number:s*1e8+h*1e4+p}},e.versionSatisfies=function(n,r){r=r||"*";var c=e.versionParse(r),s=e.versionParse(n);if(c.isRange){if(c.operator==="*"||n==="*")return!0;if(c.operator===">")return s.number>c.number;if(c.operator===">=")return s.number>=c.number;if(c.operator==="~")return s.major===c.major&&s.minor===c.minor&&s.patch>=c.patch;if(c.operator==="^")return c.major>0?s.major===c.major&&s.number>=c.number:c.minor>0?s.minor===c.minor&&s.patch>=c.patch:s.patch===c.patch}return n===r||n==="*"}})()}),(function(i,m){var a={};i.exports=a,(function(){a.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(7),n=a(18),r=a(13),c=a(19),s=a(5),h=a(6),p=a(10),t=a(0),u=a(4);(function(){e._deltaMax=1e3/60,e.create=function(f){f=f||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},y=t.extend(v,f);return y.world=f.world||h.create({label:"World"}),y.pairs=f.pairs||c.create(),y.detector=f.detector||r.create(),y.detector.pairs=y.pairs,y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},e.update=function(f,v){var y=t.now(),S=f.world,M=f.detector,T=f.pairs,g=f.timing,x=g.timestamp,w;v>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:t._baseDelta,v*=g.timeScale,g.timestamp+=v,g.lastDelta=v;var C={timestamp:g.timestamp,delta:v};s.trigger(f,"beforeUpdate",C);var I=h.allBodies(S),N=h.allConstraints(S);for(S.isModified&&(r.setBodies(M,I),h.setModified(S,!1,!1,!0)),f.enableSleeping&&l.update(I,v),e._bodiesApplyGravity(I,f.gravity),v>0&&e._bodiesUpdate(I,v),s.trigger(f,"beforeSolve",C),p.preSolveAll(I),w=0;w<f.constraintIterations;w++)p.solveAll(N,v);p.postSolveAll(I);var A=r.collisions(M);c.update(T,A,x),f.enableSleeping&&l.afterCollisions(T.list),T.collisionStart.length>0&&s.trigger(f,"collisionStart",{pairs:T.collisionStart,timestamp:g.timestamp,delta:v});var P=t.clamp(20/f.positionIterations,0,1);for(n.preSolvePosition(T.list),w=0;w<f.positionIterations;w++)n.solvePosition(T.list,v,P);for(n.postSolvePosition(I),p.preSolveAll(I),w=0;w<f.constraintIterations;w++)p.solveAll(N,v);for(p.postSolveAll(I),n.preSolveVelocity(T.list),w=0;w<f.velocityIterations;w++)n.solveVelocity(T.list,v);return e._bodiesUpdateVelocities(I),T.collisionActive.length>0&&s.trigger(f,"collisionActive",{pairs:T.collisionActive,timestamp:g.timestamp,delta:v}),T.collisionEnd.length>0&&s.trigger(f,"collisionEnd",{pairs:T.collisionEnd,timestamp:g.timestamp,delta:v}),e._bodiesClearForces(I),s.trigger(f,"afterUpdate",C),f.timing.lastElapsed=t.now()-y,f},e.merge=function(f,v){if(t.extend(f,v),v.world){f.world=v.world,e.clear(f);for(var y=h.allBodies(f.world),S=0;S<y.length;S++){var M=y[S];l.set(M,!1),M.id=t.nextId()}}},e.clear=function(f){c.clear(f.pairs),r.clear(f.detector)},e._bodiesClearForces=function(f){for(var v=f.length,y=0;y<v;y++){var S=f[y];S.force.x=0,S.force.y=0,S.torque=0}},e._bodiesApplyGravity=function(f,v){var y=typeof v.scale<"u"?v.scale:.001,S=f.length;if(!(v.x===0&&v.y===0||y===0))for(var M=0;M<S;M++){var T=f[M];T.isStatic||T.isSleeping||(T.force.y+=T.mass*v.y*y,T.force.x+=T.mass*v.x*y)}},e._bodiesUpdate=function(f,v){for(var y=f.length,S=0;S<y;S++){var M=f[S];M.isStatic||M.isSleeping||u.update(M,v)}},e._bodiesUpdateVelocities=function(f){for(var v=f.length,y=0;y<v;y++)u.updateVelocities(f[y])}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(3),n=a(0),r=a(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(c){var s,h,p,t=c.length;for(s=0;s<t;s++)h=c[s],h.isActive&&(p=h.contactCount,h.collision.parentA.totalContacts+=p,h.collision.parentB.totalContacts+=p)},e.solvePosition=function(c,s,h){var p,t,u,f,v,y,S,M,T=e._positionDampen*(h||1),g=n.clamp(s/n._baseDelta,0,1),x=c.length;for(p=0;p<x;p++)t=c[p],!(!t.isActive||t.isSensor)&&(u=t.collision,f=u.parentA,v=u.parentB,y=u.normal,t.separation=u.depth+y.x*(v.positionImpulse.x-f.positionImpulse.x)+y.y*(v.positionImpulse.y-f.positionImpulse.y));for(p=0;p<x;p++)t=c[p],!(!t.isActive||t.isSensor)&&(u=t.collision,f=u.parentA,v=u.parentB,y=u.normal,M=t.separation-t.slop*g,(f.isStatic||v.isStatic)&&(M*=2),f.isStatic||f.isSleeping||(S=T/f.totalContacts,f.positionImpulse.x+=y.x*M*S,f.positionImpulse.y+=y.y*M*S),v.isStatic||v.isSleeping||(S=T/v.totalContacts,v.positionImpulse.x-=y.x*M*S,v.positionImpulse.y-=y.y*M*S))},e.postSolvePosition=function(c){for(var s=e._positionWarming,h=c.length,p=l.translate,t=r.update,u=0;u<h;u++){var f=c[u],v=f.positionImpulse,y=v.x,S=v.y,M=f.velocity;if(f.totalContacts=0,y!==0||S!==0){for(var T=0;T<f.parts.length;T++){var g=f.parts[T];p(g.vertices,v),t(g.bounds,g.vertices,M),g.position.x+=y,g.position.y+=S}f.positionPrev.x+=y,f.positionPrev.y+=S,y*M.x+S*M.y<0?(v.x=0,v.y=0):(v.x*=s,v.y*=s)}}},e.preSolveVelocity=function(c){var s=c.length,h,p;for(h=0;h<s;h++){var t=c[h];if(!(!t.isActive||t.isSensor)){var u=t.contacts,f=t.contactCount,v=t.collision,y=v.parentA,S=v.parentB,M=v.normal,T=v.tangent;for(p=0;p<f;p++){var g=u[p],x=g.vertex,w=g.normalImpulse,C=g.tangentImpulse;if(w!==0||C!==0){var I=M.x*w+T.x*C,N=M.y*w+T.y*C;y.isStatic||y.isSleeping||(y.positionPrev.x+=I*y.inverseMass,y.positionPrev.y+=N*y.inverseMass,y.anglePrev+=y.inverseInertia*((x.x-y.position.x)*N-(x.y-y.position.y)*I)),S.isStatic||S.isSleeping||(S.positionPrev.x-=I*S.inverseMass,S.positionPrev.y-=N*S.inverseMass,S.anglePrev-=S.inverseInertia*((x.x-S.position.x)*N-(x.y-S.position.y)*I))}}}}},e.solveVelocity=function(c,s){var h=s/n._baseDelta,p=h*h,t=p*h,u=-e._restingThresh*h,f=e._restingThreshTangent,v=e._frictionNormalMultiplier*h,y=e._frictionMaxStatic,S=c.length,M,T,g,x;for(g=0;g<S;g++){var w=c[g];if(!(!w.isActive||w.isSensor)){var C=w.collision,I=C.parentA,N=C.parentB,A=C.normal.x,P=C.normal.y,E=C.tangent.x,O=C.tangent.y,D=w.inverseMass,F=w.friction*w.frictionStatic*v,R=w.contacts,b=w.contactCount,k=1/b,W=I.position.x-I.positionPrev.x,_=I.position.y-I.positionPrev.y,H=I.angle-I.anglePrev,z=N.position.x-N.positionPrev.x,J=N.position.y-N.positionPrev.y,G=N.angle-N.anglePrev;for(x=0;x<b;x++){var V=R[x],Y=V.vertex,L=Y.x-I.position.x,ve=Y.y-I.position.y,se=Y.x-N.position.x,ie=Y.y-N.position.y,ne=W-ve*H,It=_+L*H,Pt=z-ie*G,B=J+se*G,U=ne-Pt,ee=It-B,$=A*U+P*ee,Z=E*U+O*ee,q=w.separation+$,le=Math.min(q,1);le=q<0?0:le;var ge=le*F;Z<-ge||Z>ge?(T=Z>0?Z:-Z,M=w.friction*(Z>0?1:-1)*t,M<-T?M=-T:M>T&&(M=T)):(M=Z,T=y);var Te=L*P-ve*A,Le=se*P-ie*A,rt=k/(D+I.inverseInertia*Te*Te+N.inverseInertia*Le*Le),Be=(1+w.restitution)*$*rt;if(M*=rt,$<u)V.normalImpulse=0;else{var lr=V.normalImpulse;V.normalImpulse+=Be,V.normalImpulse>0&&(V.normalImpulse=0),Be=V.normalImpulse-lr}if(Z<-f||Z>f)V.tangentImpulse=0;else{var ur=V.tangentImpulse;V.tangentImpulse+=M,V.tangentImpulse<-T&&(V.tangentImpulse=-T),V.tangentImpulse>T&&(V.tangentImpulse=T),M=V.tangentImpulse-ur}var ot=A*Be+E*M,st=P*Be+O*M;I.isStatic||I.isSleeping||(I.positionPrev.x+=ot*I.inverseMass,I.positionPrev.y+=st*I.inverseMass,I.anglePrev+=(L*st-ve*ot)*I.inverseInertia),N.isStatic||N.isSleeping||(N.positionPrev.x-=ot*N.inverseMass,N.positionPrev.y-=st*N.inverseMass,N.anglePrev-=(se*st-ie*ot)*N.inverseInertia)}}}}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(9),n=a(0);(function(){e.create=function(r){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},e.update=function(r,c,s){var h=l.update,p=l.create,t=l.setActive,u=r.table,f=r.list,v=f.length,y=v,S=r.collisionStart,M=r.collisionEnd,T=r.collisionActive,g=c.length,x=0,w=0,C=0,I,N,A;for(A=0;A<g;A++)I=c[A],N=I.pair,N?(N.isActive&&(T[C++]=N),h(N,I,s)):(N=p(I,s),u[N.id]=N,S[x++]=N,f[y++]=N);for(y=0,v=f.length,A=0;A<v;A++)N=f[A],N.timeUpdated>=s?f[y++]=N:(t(N,!1,s),N.collision.bodyA.sleepCounter>0&&N.collision.bodyB.sleepCounter>0?f[y++]=N:(M[w++]=N,delete u[N.id]));f.length!==y&&(f.length=y),S.length!==x&&(S.length=x),M.length!==w&&(M.length=w),T.length!==C&&(T.length=C)},e.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()}),(function(i,m,a){var e=i.exports=a(21);e.Axes=a(11),e.Bodies=a(12),e.Body=a(4),e.Bounds=a(1),e.Collision=a(8),e.Common=a(0),e.Composite=a(6),e.Composites=a(22),e.Constraint=a(10),e.Contact=a(16),e.Detector=a(13),e.Engine=a(17),e.Events=a(5),e.Grid=a(23),e.Mouse=a(14),e.MouseConstraint=a(24),e.Pair=a(9),e.Pairs=a(19),e.Plugin=a(15),e.Query=a(25),e.Render=a(26),e.Resolver=a(18),e.Runner=a(27),e.SAT=a(28),e.Sleeping=a(7),e.Svg=a(29),e.Vector=a(2),e.Vertices=a(3),e.World=a(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")}),(function(i,m,a){var e={};i.exports=e;var l=a(15),n=a(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,c){return r=r.replace(/^Matter./,""),n.chainPathBefore(e,r,c)},e.after=function(r,c){return r=r.replace(/^Matter./,""),n.chainPathAfter(e,r,c)}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(6),n=a(10),r=a(0),c=a(4),s=a(12),h=r.deprecated;(function(){e.stack=function(p,t,u,f,v,y,S){for(var M=l.create({label:"Stack"}),T=p,g=t,x,w=0,C=0;C<f;C++){for(var I=0,N=0;N<u;N++){var A=S(T,g,N,C,x,w);if(A){var P=A.bounds.max.y-A.bounds.min.y,E=A.bounds.max.x-A.bounds.min.x;P>I&&(I=P),c.translate(A,{x:E*.5,y:P*.5}),T=A.bounds.max.x+v,l.addBody(M,A),x=A,w+=1}else T+=v}g+=I+y,T=p}return M},e.chain=function(p,t,u,f,v,y){for(var S=p.bodies,M=1;M<S.length;M++){var T=S[M-1],g=S[M],x=T.bounds.max.y-T.bounds.min.y,w=T.bounds.max.x-T.bounds.min.x,C=g.bounds.max.y-g.bounds.min.y,I=g.bounds.max.x-g.bounds.min.x,N={bodyA:T,pointA:{x:w*t,y:x*u},bodyB:g,pointB:{x:I*f,y:C*v}},A=r.extend(N,y);l.addConstraint(p,n.create(A))}return p.label+=" Chain",p},e.mesh=function(p,t,u,f,v){var y=p.bodies,S,M,T,g,x;for(S=0;S<u;S++){for(M=1;M<t;M++)T=y[M-1+S*t],g=y[M+S*t],l.addConstraint(p,n.create(r.extend({bodyA:T,bodyB:g},v)));if(S>0)for(M=0;M<t;M++)T=y[M+(S-1)*t],g=y[M+S*t],l.addConstraint(p,n.create(r.extend({bodyA:T,bodyB:g},v))),f&&M>0&&(x=y[M-1+(S-1)*t],l.addConstraint(p,n.create(r.extend({bodyA:x,bodyB:g},v)))),f&&M<t-1&&(x=y[M+1+(S-1)*t],l.addConstraint(p,n.create(r.extend({bodyA:x,bodyB:g},v))))}return p.label+=" Mesh",p},e.pyramid=function(p,t,u,f,v,y,S){return e.stack(p,t,u,f,v,y,function(M,T,g,x,w,C){var I=Math.min(f,Math.ceil(u/2)),N=w?w.bounds.max.x-w.bounds.min.x:0;if(!(x>I)){x=I-x;var A=x,P=u-1-x;if(!(g<A||g>P)){C===1&&c.translate(w,{x:(g+(u%2===1?1:-1))*N,y:0});var E=w?g*N:0;return S(p+E+g*v,T,g,x,w,C)}}})},e.newtonsCradle=function(p,t,u,f,v){for(var y=l.create({label:"Newtons Cradle"}),S=0;S<u;S++){var M=1.9,T=s.circle(p+S*(f*M),t+v,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=n.create({pointA:{x:p+S*(f*M),y:t},bodyB:T});l.addBody(y,T),l.addConstraint(y,g)}return y},h(e,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),e.car=function(p,t,u,f,v){var y=c.nextGroup(!0),S=20,M=-u*.5+S,T=u*.5-S,g=0,x=l.create({label:"Car"}),w=s.rectangle(p,t,u,f,{collisionFilter:{group:y},chamfer:{radius:f*.5},density:2e-4}),C=s.circle(p+M,t+g,v,{collisionFilter:{group:y},friction:.8}),I=s.circle(p+T,t+g,v,{collisionFilter:{group:y},friction:.8}),N=n.create({bodyB:w,pointB:{x:M,y:g},bodyA:C,stiffness:1,length:0}),A=n.create({bodyB:w,pointB:{x:T,y:g},bodyA:I,stiffness:1,length:0});return l.addBody(x,w),l.addBody(x,C),l.addBody(x,I),l.addConstraint(x,N),l.addConstraint(x,A),x},h(e,"car","Composites.car  moved to car example"),e.softBody=function(p,t,u,f,v,y,S,M,T,g){T=r.extend({inertia:1/0},T),g=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var x=e.stack(p,t,u,f,v,y,function(w,C){return s.circle(w,C,M,T)});return e.mesh(x,u,f,S,g),x.label="Soft Body",x},h(e,"softBody","Composites.softBody  moved to softBody and cloth examples")})()}),(function(i,m,a){var e={};i.exports=e;var l=a(9),n=a(0),r=n.deprecated;(function(){e.create=function(c){var s={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(s,c)},e.update=function(c,s,h,p){var t,u,f,v=h.world,y=c.buckets,S,M,T=!1;for(t=0;t<s.length;t++){var g=s[t];if(!(g.isSleeping&&!p)&&!(v.bounds&&(g.bounds.max.x<v.bounds.min.x||g.bounds.min.x>v.bounds.max.x||g.bounds.max.y<v.bounds.min.y||g.bounds.min.y>v.bounds.max.y))){var x=e._getRegion(c,g);if(!g.region||x.id!==g.region.id||p){(!g.region||p)&&(g.region=x);var w=e._regionUnion(x,g.region);for(u=w.startCol;u<=w.endCol;u++)for(f=w.startRow;f<=w.endRow;f++){M=e._getBucketId(u,f),S=y[M];var C=u>=x.startCol&&u<=x.endCol&&f>=x.startRow&&f<=x.endRow,I=u>=g.region.startCol&&u<=g.region.endCol&&f>=g.region.startRow&&f<=g.region.endRow;!C&&I&&I&&S&&e._bucketRemoveBody(c,S,g),(g.region===x||C&&!I||p)&&(S||(S=e._createBucket(y,M)),e._bucketAddBody(c,S,g))}g.region=x,T=!0}}}T&&(c.pairsList=e._createActivePairsList(c))},r(e,"update","Grid.update  replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},r(e,"clear","Grid.clear  replaced by Matter.Detector"),e._regionUnion=function(c,s){var h=Math.min(c.startCol,s.startCol),p=Math.max(c.endCol,s.endCol),t=Math.min(c.startRow,s.startRow),u=Math.max(c.endRow,s.endRow);return e._createRegion(h,p,t,u)},e._getRegion=function(c,s){var h=s.bounds,p=Math.floor(h.min.x/c.bucketWidth),t=Math.floor(h.max.x/c.bucketWidth),u=Math.floor(h.min.y/c.bucketHeight),f=Math.floor(h.max.y/c.bucketHeight);return e._createRegion(p,t,u,f)},e._createRegion=function(c,s,h,p){return{id:c+","+s+","+h+","+p,startCol:c,endCol:s,startRow:h,endRow:p}},e._getBucketId=function(c,s){return"C"+c+"R"+s},e._createBucket=function(c,s){var h=c[s]=[];return h},e._bucketAddBody=function(c,s,h){var p=c.pairs,t=l.id,u=s.length,f;for(f=0;f<u;f++){var v=s[f];if(!(h.id===v.id||h.isStatic&&v.isStatic)){var y=t(h,v),S=p[y];S?S[2]+=1:p[y]=[h,v,1]}}s.push(h)},e._bucketRemoveBody=function(c,s,h){var p=c.pairs,t=l.id,u;s.splice(n.indexOf(s,h),1);var f=s.length;for(u=0;u<f;u++){var v=p[t(h,s[u])];v&&(v[2]-=1)}},e._createActivePairsList=function(c){var s,h=c.pairs,p=n.keys(h),t=p.length,u=[],f;for(f=0;f<t;f++)s=h[p[f]],s[2]>0?u.push(s):delete h[p[f]];return u}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(3),n=a(7),r=a(14),c=a(5),s=a(13),h=a(10),p=a(6),t=a(0),u=a(1);(function(){e.create=function(f,v){var y=(f?f.mouse:null)||(v?v.mouse:null);y||(f&&f.render&&f.render.canvas?y=r.create(f.render.canvas):v&&v.element?y=r.create(v.element):(y=r.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var S=h.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),M={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:S,collisionFilter:{category:1,mask:4294967295,group:0}},T=t.extend(M,v);return c.on(f,"beforeUpdate",function(){var g=p.allBodies(f.world);e.update(T,g),e._triggerEvents(T)}),T},e.update=function(f,v){var y=f.mouse,S=f.constraint,M=f.body;if(y.button===0){if(S.bodyB)n.set(S.bodyB,!1),S.pointA=y.position;else for(var T=0;T<v.length;T++)if(M=v[T],u.contains(M.bounds,y.position)&&s.canCollide(M.collisionFilter,f.collisionFilter))for(var g=M.parts.length>1?1:0;g<M.parts.length;g++){var x=M.parts[g];if(l.contains(x.vertices,y.position)){S.pointA=y.position,S.bodyB=f.body=M,S.pointB={x:y.position.x-M.position.x,y:y.position.y-M.position.y},S.angleB=M.angle,n.set(M,!1),c.trigger(f,"startdrag",{mouse:y,body:M});break}}}else S.bodyB=f.body=null,S.pointB=null,M&&c.trigger(f,"enddrag",{mouse:y,body:M})},e._triggerEvents=function(f){var v=f.mouse,y=v.sourceEvents;y.mousemove&&c.trigger(f,"mousemove",{mouse:v}),y.mousedown&&c.trigger(f,"mousedown",{mouse:v}),y.mouseup&&c.trigger(f,"mouseup",{mouse:v}),r.clearSourceEvents(v)}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(2),n=a(8),r=a(1),c=a(12),s=a(3);(function(){e.collides=function(h,p){for(var t=[],u=p.length,f=h.bounds,v=n.collides,y=r.overlaps,S=0;S<u;S++){var M=p[S],T=M.parts.length,g=T===1?0:1;if(y(M.bounds,f))for(var x=g;x<T;x++){var w=M.parts[x];if(y(w.bounds,f)){var C=v(w,h);if(C){t.push(C);break}}}}return t},e.ray=function(h,p,t,u){u=u||1e-100;for(var f=l.angle(p,t),v=l.magnitude(l.sub(p,t)),y=(t.x+p.x)*.5,S=(t.y+p.y)*.5,M=c.rectangle(y,S,v,u,{angle:f}),T=e.collides(M,h),g=0;g<T.length;g+=1){var x=T[g];x.body=x.bodyB=x.bodyA}return T},e.region=function(h,p,t){for(var u=[],f=0;f<h.length;f++){var v=h[f],y=r.overlaps(v.bounds,p);(y&&!t||!y&&t)&&u.push(v)}return u},e.point=function(h,p){for(var t=[],u=0;u<h.length;u++){var f=h[u];if(r.contains(f.bounds,p))for(var v=f.parts.length===1?0:1;v<f.parts.length;v++){var y=f.parts[v];if(r.contains(y.bounds,p)&&s.contains(y.vertices,p)){t.push(f);break}}}return t}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(4),n=a(0),r=a(6),c=a(1),s=a(5),h=a(2),p=a(14);(function(){var t,u;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(n.now())},1e3/60)},u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(g){var x={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},w=n.extend(x,g);return w.canvas&&(w.canvas.width=w.options.width||w.canvas.width,w.canvas.height=w.options.height||w.canvas.height),w.mouse=g.mouse,w.engine=g.engine,w.canvas=w.canvas||y(w.options.width,w.options.height),w.context=w.canvas.getContext("2d"),w.textures={},w.bounds=w.bounds||{min:{x:0,y:0},max:{x:w.canvas.width,y:w.canvas.height}},w.controller=e,w.options.showBroadphase=!1,w.options.pixelRatio!==1&&e.setPixelRatio(w,w.options.pixelRatio),n.isElement(w.element)&&w.element.appendChild(w.canvas),w},e.run=function(g){(function x(w){g.frameRequestId=t(x),f(g,w),e.world(g,w),g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0),(g.options.showStats||g.options.showDebug)&&e.stats(g,g.context,w),(g.options.showPerformance||g.options.showDebug)&&e.performance(g,g.context,w),g.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(g){u(g.frameRequestId)},e.setPixelRatio=function(g,x){var w=g.options,C=g.canvas;x==="auto"&&(x=S(C)),w.pixelRatio=x,C.setAttribute("data-pixel-ratio",x),C.width=w.width*x,C.height=w.height*x,C.style.width=w.width+"px",C.style.height=w.height+"px"},e.setSize=function(g,x,w){g.options.width=x,g.options.height=w,g.bounds.max.x=g.bounds.min.x+x,g.bounds.max.y=g.bounds.min.y+w,g.options.pixelRatio!==1?e.setPixelRatio(g,g.options.pixelRatio):(g.canvas.width=x,g.canvas.height=w)},e.lookAt=function(g,x,w,C){C=typeof C<"u"?C:!0,x=n.isArray(x)?x:[x],w=w||{x:0,y:0};for(var I={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},N=0;N<x.length;N+=1){var A=x[N],P=A.bounds?A.bounds.min:A.min||A.position||A,E=A.bounds?A.bounds.max:A.max||A.position||A;P&&E&&(P.x<I.min.x&&(I.min.x=P.x),E.x>I.max.x&&(I.max.x=E.x),P.y<I.min.y&&(I.min.y=P.y),E.y>I.max.y&&(I.max.y=E.y))}var O=I.max.x-I.min.x+2*w.x,D=I.max.y-I.min.y+2*w.y,F=g.canvas.height,R=g.canvas.width,b=R/F,k=O/D,W=1,_=1;k>b?_=k/b:W=b/k,g.options.hasBounds=!0,g.bounds.min.x=I.min.x,g.bounds.max.x=I.min.x+O*W,g.bounds.min.y=I.min.y,g.bounds.max.y=I.min.y+D*_,C&&(g.bounds.min.x+=O*.5-O*W*.5,g.bounds.max.x+=O*.5-O*W*.5,g.bounds.min.y+=D*.5-D*_*.5,g.bounds.max.y+=D*.5-D*_*.5),g.bounds.min.x-=w.x,g.bounds.max.x-=w.x,g.bounds.min.y-=w.y,g.bounds.max.y-=w.y,g.mouse&&(p.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),p.setOffset(g.mouse,g.bounds.min))},e.startViewTransform=function(g){var x=g.bounds.max.x-g.bounds.min.x,w=g.bounds.max.y-g.bounds.min.y,C=x/g.options.width,I=w/g.options.height;g.context.setTransform(g.options.pixelRatio/C,0,0,g.options.pixelRatio/I,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},e.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},e.world=function(g,x){var w=n.now(),C=g.engine,I=C.world,N=g.canvas,A=g.context,P=g.options,E=g.timing,O=r.allBodies(I),D=r.allConstraints(I),F=P.wireframes?P.wireframeBackground:P.background,R=[],b=[],k,W={timestamp:C.timing.timestamp};if(s.trigger(g,"beforeRender",W),g.currentBackground!==F&&T(g,F),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,N.width,N.height),A.globalCompositeOperation="source-over",P.hasBounds){for(k=0;k<O.length;k++){var _=O[k];c.overlaps(_.bounds,g.bounds)&&R.push(_)}for(k=0;k<D.length;k++){var H=D[k],z=H.bodyA,J=H.bodyB,G=H.pointA,V=H.pointB;z&&(G=h.add(z.position,H.pointA)),J&&(V=h.add(J.position,H.pointB)),!(!G||!V)&&(c.contains(g.bounds,G)||c.contains(g.bounds,V))&&b.push(H)}e.startViewTransform(g),g.mouse&&(p.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),p.setOffset(g.mouse,g.bounds.min))}else b=D,R=O,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!P.wireframes||C.enableSleeping&&P.showSleeping?e.bodies(g,R,A):(P.showConvexHulls&&e.bodyConvexHulls(g,R,A),e.bodyWireframes(g,R,A)),P.showBounds&&e.bodyBounds(g,R,A),(P.showAxes||P.showAngleIndicator)&&e.bodyAxes(g,R,A),P.showPositions&&e.bodyPositions(g,R,A),P.showVelocity&&e.bodyVelocity(g,R,A),P.showIds&&e.bodyIds(g,R,A),P.showSeparations&&e.separations(g,C.pairs.list,A),P.showCollisions&&e.collisions(g,C.pairs.list,A),P.showVertexNumbers&&e.vertexNumbers(g,R,A),P.showMousePosition&&e.mousePosition(g,g.mouse,A),e.constraints(b,A),P.hasBounds&&e.endViewTransform(g),s.trigger(g,"afterRender",W),E.lastElapsed=n.now()-w},e.stats=function(g,x,w){for(var C=g.engine,I=C.world,N=r.allBodies(I),A=0,P=55,E=44,O=0,D=0,F=0;F<N.length;F+=1)A+=N[F].parts.length;var R={Part:A,Body:N.length,Cons:r.allConstraints(I).length,Comp:r.allComposites(I).length,Pair:C.pairs.list.length};x.fillStyle="#0e0f19",x.fillRect(O,D,P*5.5,E),x.font="12px Arial",x.textBaseline="top",x.textAlign="right";for(var b in R){var k=R[b];x.fillStyle="#aaa",x.fillText(b,O+P,D+8),x.fillStyle="#eee",x.fillText(k,O+P,D+26),O+=P}},e.performance=function(g,x){var w=g.engine,C=g.timing,I=C.deltaHistory,N=C.elapsedHistory,A=C.timestampElapsedHistory,P=C.engineDeltaHistory,E=C.engineUpdatesHistory,O=C.engineElapsedHistory,D=w.timing.lastUpdatesPerFrame,F=w.timing.lastDelta,R=v(I),b=v(N),k=v(P),W=v(E),_=v(O),H=v(A),z=H/R||0,J=Math.round(R/F),G=1e3/R||0,V=4,Y=12,L=60,ve=34,se=10,ie=69;x.fillStyle="#0e0f19",x.fillRect(0,50,Y*5+L*6+22,ve),e.status(x,se,ie,L,V,I.length,Math.round(G)+" fps",G/e._goodFps,function(ne){return I[ne]/R-1}),e.status(x,se+Y+L,ie,L,V,P.length,F.toFixed(2)+" dt",e._goodDelta/F,function(ne){return P[ne]/k-1}),e.status(x,se+(Y+L)*2,ie,L,V,E.length,D+" upf",Math.pow(n.clamp(W/J||1,0,1),4),function(ne){return E[ne]/W-1}),e.status(x,se+(Y+L)*3,ie,L,V,O.length,_.toFixed(2)+" ut",1-D*_/e._goodFps,function(ne){return O[ne]/_-1}),e.status(x,se+(Y+L)*4,ie,L,V,N.length,b.toFixed(2)+" rt",1-b/e._goodFps,function(ne){return N[ne]/b-1}),e.status(x,se+(Y+L)*5,ie,L,V,A.length,z.toFixed(2)+" x",z*z*z,function(ne){return(A[ne]/I[ne]/z||0)-1})},e.status=function(g,x,w,C,I,N,A,P,E){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(x,w+7,C,1),g.beginPath(),g.moveTo(x,w+7-I*n.clamp(.4*E(0),-2,2));for(var O=0;O<C;O+=1)g.lineTo(x+O,w+7-(O<N?I*n.clamp(.4*E(O),-2,2):0));g.stroke(),g.fillStyle="hsl("+n.clamp(25+95*P,0,120)+",100%,60%)",g.fillRect(x,w-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(A,x+C,w-5)},e.constraints=function(g,x){for(var w=x,C=0;C<g.length;C++){var I=g[C];if(!(!I.render.visible||!I.pointA||!I.pointB)){var N=I.bodyA,A=I.bodyB,P,E;if(N?P=h.add(N.position,I.pointA):P=I.pointA,I.render.type==="pin")w.beginPath(),w.arc(P.x,P.y,3,0,2*Math.PI),w.closePath();else{if(A?E=h.add(A.position,I.pointB):E=I.pointB,w.beginPath(),w.moveTo(P.x,P.y),I.render.type==="spring")for(var O=h.sub(E,P),D=h.perp(h.normalise(O)),F=Math.ceil(n.clamp(I.length/5,12,20)),R,b=1;b<F;b+=1)R=b%2===0?1:-1,w.lineTo(P.x+O.x*(b/F)+D.x*R*4,P.y+O.y*(b/F)+D.y*R*4);w.lineTo(E.x,E.y)}I.render.lineWidth&&(w.lineWidth=I.render.lineWidth,w.strokeStyle=I.render.strokeStyle,w.stroke()),I.render.anchors&&(w.fillStyle=I.render.strokeStyle,w.beginPath(),w.arc(P.x,P.y,3,0,2*Math.PI),w.arc(E.x,E.y,3,0,2*Math.PI),w.closePath(),w.fill())}}},e.bodies=function(g,x,w){var C=w;g.engine;var I=g.options,N=I.showInternalEdges||!I.wireframes,A,P,E,O;for(E=0;E<x.length;E++)if(A=x[E],!!A.render.visible){for(O=A.parts.length>1?1:0;O<A.parts.length;O++)if(P=A.parts[O],!!P.render.visible){if(I.showSleeping&&A.isSleeping?C.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(C.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!I.wireframes){var D=P.render.sprite,F=M(g,D.texture);C.translate(P.position.x,P.position.y),C.rotate(P.angle),C.drawImage(F,F.width*-D.xOffset*D.xScale,F.height*-D.yOffset*D.yScale,F.width*D.xScale,F.height*D.yScale),C.rotate(-P.angle),C.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)C.beginPath(),C.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{C.beginPath(),C.moveTo(P.vertices[0].x,P.vertices[0].y);for(var R=1;R<P.vertices.length;R++)!P.vertices[R-1].isInternal||N?C.lineTo(P.vertices[R].x,P.vertices[R].y):C.moveTo(P.vertices[R].x,P.vertices[R].y),P.vertices[R].isInternal&&!N&&C.moveTo(P.vertices[(R+1)%P.vertices.length].x,P.vertices[(R+1)%P.vertices.length].y);C.lineTo(P.vertices[0].x,P.vertices[0].y),C.closePath()}I.wireframes?(C.lineWidth=1,C.strokeStyle=g.options.wireframeStrokeStyle,C.stroke()):(C.fillStyle=P.render.fillStyle,P.render.lineWidth&&(C.lineWidth=P.render.lineWidth,C.strokeStyle=P.render.strokeStyle,C.stroke()),C.fill())}C.globalAlpha=1}}},e.bodyWireframes=function(g,x,w){var C=w,I=g.options.showInternalEdges,N,A,P,E,O;for(C.beginPath(),P=0;P<x.length;P++)if(N=x[P],!!N.render.visible)for(O=N.parts.length>1?1:0;O<N.parts.length;O++){for(A=N.parts[O],C.moveTo(A.vertices[0].x,A.vertices[0].y),E=1;E<A.vertices.length;E++)!A.vertices[E-1].isInternal||I?C.lineTo(A.vertices[E].x,A.vertices[E].y):C.moveTo(A.vertices[E].x,A.vertices[E].y),A.vertices[E].isInternal&&!I&&C.moveTo(A.vertices[(E+1)%A.vertices.length].x,A.vertices[(E+1)%A.vertices.length].y);C.lineTo(A.vertices[0].x,A.vertices[0].y)}C.lineWidth=1,C.strokeStyle=g.options.wireframeStrokeStyle,C.stroke()},e.bodyConvexHulls=function(g,x,w){var C=w,I,N,A;for(C.beginPath(),N=0;N<x.length;N++)if(I=x[N],!(!I.render.visible||I.parts.length===1)){for(C.moveTo(I.vertices[0].x,I.vertices[0].y),A=1;A<I.vertices.length;A++)C.lineTo(I.vertices[A].x,I.vertices[A].y);C.lineTo(I.vertices[0].x,I.vertices[0].y)}C.lineWidth=1,C.strokeStyle="rgba(255,255,255,0.2)",C.stroke()},e.vertexNumbers=function(g,x,w){var C=w,I,N,A;for(I=0;I<x.length;I++){var P=x[I].parts;for(A=P.length>1?1:0;A<P.length;A++){var E=P[A];for(N=0;N<E.vertices.length;N++)C.fillStyle="rgba(255,255,255,0.2)",C.fillText(I+"_"+N,E.position.x+(E.vertices[N].x-E.position.x)*.8,E.position.y+(E.vertices[N].y-E.position.y)*.8)}}},e.mousePosition=function(g,x,w){var C=w;C.fillStyle="rgba(255,255,255,0.8)",C.fillText(x.position.x+"  "+x.position.y,x.position.x+5,x.position.y-5)},e.bodyBounds=function(g,x,w){var C=w;g.engine;var I=g.options;C.beginPath();for(var N=0;N<x.length;N++){var A=x[N];if(A.render.visible)for(var P=x[N].parts,E=P.length>1?1:0;E<P.length;E++){var O=P[E];C.rect(O.bounds.min.x,O.bounds.min.y,O.bounds.max.x-O.bounds.min.x,O.bounds.max.y-O.bounds.min.y)}}I.wireframes?C.strokeStyle="rgba(255,255,255,0.08)":C.strokeStyle="rgba(0,0,0,0.1)",C.lineWidth=1,C.stroke()},e.bodyAxes=function(g,x,w){var C=w;g.engine;var I=g.options,N,A,P,E;for(C.beginPath(),A=0;A<x.length;A++){var O=x[A],D=O.parts;if(O.render.visible)if(I.showAxes)for(P=D.length>1?1:0;P<D.length;P++)for(N=D[P],E=0;E<N.axes.length;E++){var F=N.axes[E];C.moveTo(N.position.x,N.position.y),C.lineTo(N.position.x+F.x*20,N.position.y+F.y*20)}else for(P=D.length>1?1:0;P<D.length;P++)for(N=D[P],E=0;E<N.axes.length;E++)C.moveTo(N.position.x,N.position.y),C.lineTo((N.vertices[0].x+N.vertices[N.vertices.length-1].x)/2,(N.vertices[0].y+N.vertices[N.vertices.length-1].y)/2)}I.wireframes?(C.strokeStyle="indianred",C.lineWidth=1):(C.strokeStyle="rgba(255, 255, 255, 0.4)",C.globalCompositeOperation="overlay",C.lineWidth=2),C.stroke(),C.globalCompositeOperation="source-over"},e.bodyPositions=function(g,x,w){var C=w;g.engine;var I=g.options,N,A,P,E;for(C.beginPath(),P=0;P<x.length;P++)if(N=x[P],!!N.render.visible)for(E=0;E<N.parts.length;E++)A=N.parts[E],C.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),C.closePath();for(I.wireframes?C.fillStyle="indianred":C.fillStyle="rgba(0,0,0,0.5)",C.fill(),C.beginPath(),P=0;P<x.length;P++)N=x[P],N.render.visible&&(C.arc(N.positionPrev.x,N.positionPrev.y,2,0,2*Math.PI,!1),C.closePath());C.fillStyle="rgba(255,165,0,0.8)",C.fill()},e.bodyVelocity=function(g,x,w){var C=w;C.beginPath();for(var I=0;I<x.length;I++){var N=x[I];if(N.render.visible){var A=l.getVelocity(N);C.moveTo(N.position.x,N.position.y),C.lineTo(N.position.x+A.x,N.position.y+A.y)}}C.lineWidth=3,C.strokeStyle="cornflowerblue",C.stroke()},e.bodyIds=function(g,x,w){var C=w,I,N;for(I=0;I<x.length;I++)if(x[I].render.visible){var A=x[I].parts;for(N=A.length>1?1:0;N<A.length;N++){var P=A[N];C.font="12px Arial",C.fillStyle="rgba(255,255,255,0.5)",C.fillText(P.id,P.position.x+10,P.position.y-10)}}},e.collisions=function(g,x,w){var C=w,I=g.options,N,A,P,E;for(C.beginPath(),P=0;P<x.length;P++)if(N=x[P],!!N.isActive)for(A=N.collision,E=0;E<N.contactCount;E++){var O=N.contacts[E],D=O.vertex;C.rect(D.x-1.5,D.y-1.5,3.5,3.5)}for(I.wireframes?C.fillStyle="rgba(255,255,255,0.7)":C.fillStyle="orange",C.fill(),C.beginPath(),P=0;P<x.length;P++)if(N=x[P],!!N.isActive&&(A=N.collision,N.contactCount>0)){var F=N.contacts[0].vertex.x,R=N.contacts[0].vertex.y;N.contactCount===2&&(F=(N.contacts[0].vertex.x+N.contacts[1].vertex.x)/2,R=(N.contacts[0].vertex.y+N.contacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?C.moveTo(F-A.normal.x*8,R-A.normal.y*8):C.moveTo(F+A.normal.x*8,R+A.normal.y*8),C.lineTo(F,R)}I.wireframes?C.strokeStyle="rgba(255,165,0,0.7)":C.strokeStyle="orange",C.lineWidth=1,C.stroke()},e.separations=function(g,x,w){var C=w,I=g.options,N,A,P,E,O;for(C.beginPath(),O=0;O<x.length;O++)if(N=x[O],!!N.isActive){A=N.collision,P=A.bodyA,E=A.bodyB;var D=1;!E.isStatic&&!P.isStatic&&(D=.5),E.isStatic&&(D=0),C.moveTo(E.position.x,E.position.y),C.lineTo(E.position.x-A.penetration.x*D,E.position.y-A.penetration.y*D),D=1,!E.isStatic&&!P.isStatic&&(D=.5),P.isStatic&&(D=0),C.moveTo(P.position.x,P.position.y),C.lineTo(P.position.x+A.penetration.x*D,P.position.y+A.penetration.y*D)}I.wireframes?C.strokeStyle="rgba(255,165,0,0.5)":C.strokeStyle="orange",C.stroke()},e.inspector=function(g,x){g.engine;var w=g.selected,C=g.render,I=C.options,N;if(I.hasBounds){var A=C.bounds.max.x-C.bounds.min.x,P=C.bounds.max.y-C.bounds.min.y,E=A/C.options.width,O=P/C.options.height;x.scale(1/E,1/O),x.translate(-C.bounds.min.x,-C.bounds.min.y)}for(var D=0;D<w.length;D++){var F=w[D].data;switch(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.9)",x.setLineDash([1,2]),F.type){case"body":N=F.bounds,x.beginPath(),x.rect(Math.floor(N.min.x-3),Math.floor(N.min.y-3),Math.floor(N.max.x-N.min.x+6),Math.floor(N.max.y-N.min.y+6)),x.closePath(),x.stroke();break;case"constraint":var R=F.pointA;F.bodyA&&(R=F.pointB),x.beginPath(),x.arc(R.x,R.y,10,0,2*Math.PI),x.closePath(),x.stroke();break}x.setLineDash([]),x.translate(-.5,-.5)}g.selectStart!==null&&(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.6)",x.fillStyle="rgba(255,165,0,0.1)",N=g.selectBounds,x.beginPath(),x.rect(Math.floor(N.min.x),Math.floor(N.min.y),Math.floor(N.max.x-N.min.x),Math.floor(N.max.y-N.min.y)),x.closePath(),x.stroke(),x.fill(),x.translate(-.5,-.5)),I.hasBounds&&x.setTransform(1,0,0,1,0,0)};var f=function(g,x){var w=g.engine,C=g.timing,I=C.historySize,N=w.timing.timestamp;C.delta=x-C.lastTime||e._goodDelta,C.lastTime=x,C.timestampElapsed=N-C.lastTimestamp||0,C.lastTimestamp=N,C.deltaHistory.unshift(C.delta),C.deltaHistory.length=Math.min(C.deltaHistory.length,I),C.engineDeltaHistory.unshift(w.timing.lastDelta),C.engineDeltaHistory.length=Math.min(C.engineDeltaHistory.length,I),C.timestampElapsedHistory.unshift(C.timestampElapsed),C.timestampElapsedHistory.length=Math.min(C.timestampElapsedHistory.length,I),C.engineUpdatesHistory.unshift(w.timing.lastUpdatesPerFrame),C.engineUpdatesHistory.length=Math.min(C.engineUpdatesHistory.length,I),C.engineElapsedHistory.unshift(w.timing.lastElapsed),C.engineElapsedHistory.length=Math.min(C.engineElapsedHistory.length,I),C.elapsedHistory.unshift(C.lastElapsed),C.elapsedHistory.length=Math.min(C.elapsedHistory.length,I)},v=function(g){for(var x=0,w=0;w<g.length;w+=1)x+=g[w];return x/g.length||0},y=function(g,x){var w=document.createElement("canvas");return w.width=g,w.height=x,w.oncontextmenu=function(){return!1},w.onselectstart=function(){return!1},w},S=function(g){var x=g.getContext("2d"),w=window.devicePixelRatio||1,C=x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1;return w/C},M=function(g,x){var w=g.textures[x];return w||(w=g.textures[x]=new Image,w.src=x,w)},T=function(g,x){var w=x;/(jpg|gif|png)$/.test(x)&&(w="url("+x+")"),g.canvas.style.background=w,g.canvas.style.backgroundSize="contain",g.currentBackground=x}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(5),n=a(17),r=a(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(s){var h={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},p=r.extend(h,s);return p.fps=0,p},e.run=function(s,h){return s.timeBuffer=e._frameDeltaFallback,(function p(t){s.frameRequestId=e._onNextFrame(s,p),t&&s.enabled&&e.tick(s,h,t)})(),s},e.tick=function(s,h,p){var t=r.now(),u=s.delta,f=0,v=p-s.timeLastTick;if((!v||!s.timeLastTick||v>Math.max(e._maxFrameDelta,s.maxFrameTime))&&(v=s.frameDelta||e._frameDeltaFallback),s.frameDeltaSmoothing){s.frameDeltaHistory.push(v),s.frameDeltaHistory=s.frameDeltaHistory.slice(-s.frameDeltaHistorySize);var y=s.frameDeltaHistory.slice(0).sort(),S=s.frameDeltaHistory.slice(y.length*e._smoothingLowerBound,y.length*e._smoothingUpperBound),M=c(S);v=M||v}s.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),s.frameDelta=v,s.timeLastTick=p,s.timeBuffer+=s.frameDelta,s.timeBuffer=r.clamp(s.timeBuffer,0,s.frameDelta+u*e._timeBufferMargin),s.lastUpdatesDeferred=0;var T=s.maxUpdates||Math.ceil(s.maxFrameTime/u),g={timestamp:h.timing.timestamp};l.trigger(s,"beforeTick",g),l.trigger(s,"tick",g);for(var x=r.now();u>0&&s.timeBuffer>=u*e._timeBufferMargin;){l.trigger(s,"beforeUpdate",g),n.update(h,u),l.trigger(s,"afterUpdate",g),s.timeBuffer-=u,f+=1;var w=r.now()-t,C=r.now()-x,I=w+e._elapsedNextEstimate*C/f;if(f>=T||I>s.maxFrameTime){s.lastUpdatesDeferred=Math.round(Math.max(0,s.timeBuffer/u-e._timeBufferMargin));break}}h.timing.lastUpdatesPerFrame=f,l.trigger(s,"afterTick",g),s.frameDeltaHistory.length>=100&&(s.lastUpdatesDeferred&&Math.round(s.frameDelta/u)>T?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):s.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof s.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(s.deltaMin||s.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),s.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(s){e._cancelNextFrame(s)},e._onNextFrame=function(s,h){if(typeof window<"u"&&window.requestAnimationFrame)s.frameRequestId=window.requestAnimationFrame(h);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return s.frameRequestId},e._cancelNextFrame=function(s){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(s.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var c=function(s){for(var h=0,p=s.length,t=0;t<p;t+=1)h+=s[t];return h/p||0}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(8),n=a(0),r=n.deprecated;(function(){e.collides=function(c,s){return l.collides(c,s)},r(e,"collides","SAT.collides  replaced by Collision.collides")})()}),(function(i,m,a){var e={};i.exports=e,a(1);var l=a(0);(function(){e.pathToVertices=function(n,r){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,s,h,p,t,u,f,v,y,S,M=[],T,g,x=0,w=0,C=0;r=r||15;var I=function(A,P,E){var O=E%2===1&&E>1;if(!y||A!=y.x||P!=y.y){y&&O?(T=y.x,g=y.y):(T=0,g=0);var D={x:T+A,y:g+P};(O||!y)&&(y=D),M.push(D),w=T+A,C=g+P}},N=function(A){var P=A.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":w=A.x,C=A.y;break;case"H":w=A.x;break;case"V":C=A.y;break}I(w,C,A.pathSegType)}};for(e._svgPathToAbsolute(n),h=n.getTotalLength(),u=[],c=0;c<n.pathSegList.numberOfItems;c+=1)u.push(n.pathSegList.getItem(c));for(f=u.concat();x<h;){if(S=n.getPathSegAtLength(x),t=u[S],t!=v){for(;f.length&&f[0]!=t;)N(f.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":p=n.getPointAtLength(x),I(p.x,p.y,0);break}x+=r}for(c=0,s=f.length;c<s;++c)N(f[c]);return M},e._svgPathToAbsolute=function(n){for(var r,c,s,h,p,t,u=n.pathSegList,f=0,v=0,y=u.numberOfItems,S=0;S<y;++S){var M=u.getItem(S),T=M.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in M&&(f=M.x),"y"in M&&(v=M.y);else switch("x1"in M&&(s=f+M.x1),"x2"in M&&(p=f+M.x2),"y1"in M&&(h=v+M.y1),"y2"in M&&(t=v+M.y2),"x"in M&&(f+=M.x),"y"in M&&(v+=M.y),T){case"m":u.replaceItem(n.createSVGPathSegMovetoAbs(f,v),S);break;case"l":u.replaceItem(n.createSVGPathSegLinetoAbs(f,v),S);break;case"h":u.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(f),S);break;case"v":u.replaceItem(n.createSVGPathSegLinetoVerticalAbs(v),S);break;case"c":u.replaceItem(n.createSVGPathSegCurvetoCubicAbs(f,v,s,h,p,t),S);break;case"s":u.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(f,v,p,t),S);break;case"q":u.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(f,v,s,h),S);break;case"t":u.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(f,v),S);break;case"a":u.replaceItem(n.createSVGPathSegArcAbs(f,v,M.r1,M.r2,M.angle,M.largeArcFlag,M.sweepFlag),S);break;case"z":case"Z":f=r,v=c;break}(T=="M"||T=="m")&&(r=f,c=v)}}})()}),(function(i,m,a){var e={};i.exports=e;var l=a(6);a(0),(function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint})()})])})})(lt)),lt.exports}export{qc as _,Gc as a,Hc as b,$c as c,Yc as d,Xc as e,ii as f,jc as g,zc as i,Zc as o,Qc as r};
