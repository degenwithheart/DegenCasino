import{R as l,j as t}from"./three-DV31HySq.js";import{aC as Se,G as R,aH as Pe,aI as je,aJ as Te,aK as Ce,an as Re,aL as ve,T as Z,aM as Me,aN as we,aO as ke,aP as Ie,B as We}from"./index-BarUt2o_.js";import{u as Ge}from"./useGameMeta-C4Hfe5lB.js";import{G as Ae}from"./GameStatsHeader-DfbFCrGS.js";import{G as Ne}from"./GameRecentPlaysHorizontal-CmiF3H-Z.js";import{G as De}from"./GameControlsSection-BZ3LzTmM.js";import"./react-vendor-faCf7XlP.js";import"./blockchain-C0nfa7Sw.js";import"./physics-audio-Bm3pLP40.js";const Ee="data:audio/mpeg;base64,",Fe="data:audio/mpeg;base64,",Oe="data:audio/mpeg;base64,",ze="data:audio/mpeg;base64,",_e="data:audio/mpeg;base64,",b=1200,P=800,G=1e3,S=600,ee=50,A=8,He=2,Le=.03,u={gold:"#d4a574",background:"#0a0511",light:"#f4e9e1"},x={bullish:"#00ff55",bearish:"#ff4444",grid:"#2e2e2e",target:"#ffd700",sparkline:"#00ff55"},n={basePrice:180,minPrice:180,maxPrice:1e9,volatility:.02,trendStrength:.1},h={min:1.1,max:100,default:2,step:.1};function tt(){const te=Se({gameName:"Crypto Chart",description:"Predict if crypto goes up or down! Trade virtual crypto charts and predict price movements for big wins",rtp:98,maxWin:"1000x"}),B=R.useGame(),oe=Pe(),j=je(),[m,ae]=Te(),{settings:Be}=Ce(),N=l.useRef(null),{mobile:g}=Re(),D=ve({win:Oe,lose:Ee,play:Fe,moon:ze,rug:_e}),U=l.useRef(null),f=l.useRef(),[s,Y]=l.useState(h.default),[T,E]=l.useState(0),[Ue,ie]=l.useState(0),[v,F]=l.useState(0),[y,M]=l.useState("idle"),[w,O]=l.useState([]),[re,k]=l.useState(!1),[$,I]=l.useState(null),[ne,V]=l.useState(0),[se,q]=l.useState(0),[le,X]=l.useState(0),[Ye,z]=l.useState(0);l.useMemo(()=>j?.liquidity?Number(j.liquidity):0,[j]);const de=e=>{const o=e.createRadialGradient(b/2,P/2,0,b/2,P/2,b/2);o.addColorStop(0,u.background),o.addColorStop(.7,"#1a0520"),o.addColorStop(1,"#0a0511"),e.fillStyle=o,e.fillRect(0,0,b,P),e.strokeStyle="rgba(212, 165, 116, 0.1)",e.lineWidth=1;for(let a=0;a<b;a+=50)e.beginPath(),e.moveTo(a,0),e.lineTo(a,P),e.stroke();for(let a=0;a<P;a+=50)e.beginPath(),e.moveTo(0,a),e.lineTo(b,a),e.stroke()},ce=e=>{const o=ee,a=ee,d=o+G,i=a+S;e.fillStyle="rgba(0, 0, 0, 0.8)",e.fillRect(o,a,G,S),e.strokeStyle=x.grid,e.lineWidth=1;for(let r=1;r<5;r++){const c=a+S/5*r;e.beginPath(),e.moveTo(o,c),e.lineTo(d,c),e.stroke()}for(let r=1;r<10;r++){const c=o+G/10*r;e.beginPath(),e.moveTo(c,a),e.lineTo(c,i),e.stroke()}if(w.length>0){const r=G-40,c=Math.min(A+He,r/Math.max(1,w.length));w.forEach((p,L)=>{const C=o+20+L*c,W=n.maxPrice-n.minPrice,K=i-(p.open-n.minPrice)/W*S,Q=i-(p.close-n.minPrice)/W*S,be=i-(p.high-n.minPrice)/W*S,fe=i-(p.low-n.minPrice)/W*S;e.strokeStyle=p.isRed?x.bearish:x.bullish,e.lineWidth=1,e.beginPath(),e.moveTo(C+A/2,be),e.lineTo(C+A/2,fe),e.stroke(),e.fillStyle=p.isRed?x.bearish:x.bullish;const ye=Math.abs(Q-K);e.fillRect(C,Math.min(K,Q),A,Math.max(2,ye))})}if(T>0){const r=n.basePrice*T,c=n.maxPrice-n.minPrice,p=i-(r-n.minPrice)/c*S;e.strokeStyle=x.target,e.lineWidth=2,e.setLineDash([5,5]),e.beginPath(),e.moveTo(o,p),e.lineTo(d,p),e.stroke(),e.setLineDash([]),e.fillStyle=x.target,e.font="bold 14px Arial",e.fillText(`$${r.toFixed(2)}`,d+10,p+5)}if(s>0){const r=n.basePrice*s,c=n.maxPrice-n.minPrice,p=i-(r-n.minPrice)/c*S;e.strokeStyle=u.gold,e.lineWidth=2,e.setLineDash([10,5]),e.beginPath(),e.moveTo(o,p),e.lineTo(d,p),e.stroke(),e.setLineDash([]),e.fillStyle=u.gold,e.font="bold 16px Arial",e.fillText(`Target: ${s.toFixed(2)}x`,o+10,p-10)}},pe=e=>{let o="",a=u.light;switch(y){case"playing":o=`Trading... ${T.toFixed(2)}x`,a=x.sparkline;break;case"win":o=`MOON! ðŸš€ ${v.toFixed(2)}x`,a=x.bullish;break;case"crash":o=`RUGGED! ðŸ’¥ ${v.toFixed(2)}x`,a=x.bearish;break;default:o="Ready to Trade";break}const d=e.measureText(o).width;e.fillStyle="rgba(0, 0, 0, 0.8)",e.fillRect(b/2-d/2-20,20,d+40,50),e.fillStyle=a,e.font="bold 24px Arial",e.textAlign="center",e.fillText(o,b/2,50),e.textAlign="left"},ge=()=>{const e=U.current;if(!e)return;const o=e.getContext("2d");o&&(o.clearRect(0,0,b,P),de(o),ce(o),pe(o))};l.useEffect(()=>{ge()},[w,T,s,y,v]);const ue=e=>{const o=n.volatility,a=(Math.random()-.5)*o*2,d=Math.random()*n.trendStrength,i=e;let r=e+d+a,c=!1;Math.random()<.35&&(r=Math.max(1,e-Math.random()*2),c=!0);const p=Math.max(i,r)+Math.random()*.5,L=Math.min(i,r)-Math.random()*.5,C=Math.random()*100;return{open:i,close:r,high:p,low:L,volume:C,isRed:c}},J=(e,o,a)=>{if(ie(T),E(e),O(d=>{const i=d[d.length-1]||{close:n.basePrice},r=ue(i.close);return[...d.slice(-50),r]}),e>=o){M(a?"win":"crash"),F(o),k(!1),a?(D.play("moon"),N.current?.triggerWin()):(D.play("rug"),N.current?.triggerLoss());return}f.current=window.setTimeout(()=>J(e+Le,o,a),100)},_=l.useMemo(()=>{if(!j?.maxPayout||!m||m===0)return h.max;const e=j.maxPayout/m;return Math.min(e*.9,h.max)},[j?.maxPayout,m]);Ge("cryptochartgame-v2");const xe=async()=>{f.current!==void 0&&(clearTimeout(f.current),f.current=void 0),k(!0),M("playing"),E(0),F(0),O([{open:n.basePrice,close:n.basePrice,high:n.basePrice,low:n.basePrice,volume:50,isRed:!1}]);try{D.play("play");const e=We["cryptochartgame-v2"].calculateBetArray(s);await B.play({wager:m,bet:e});const o=await B.result(),a=o.payout>0;I(a?o.payout:null),V(i=>i+1),a?(q(i=>i+1),z(i=>i+(o.payout-m))):(X(i=>i+1),z(i=>i-m));let d;if(a){const i=o.resultIndex%1e3/1e3;d=i<.5?s+i*s*2:s}else{const i=o.resultIndex%1e3/1e3,r=Math.min(s,12),c=i>.95?2.8:s>10?5:6;d=1+Math.pow(i,c)*(r-1)}J(0,d,a)}catch(e){console.error("Game error:",e),M("idle"),k(!1),I(null)}},he=()=>{f.current&&(clearTimeout(f.current),f.current=void 0),M("idle"),E(0),F(0),k(!1),I(null),O([])};l.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const H=re||oe.isPlaying,me=!H&&m>0&&s>=h.min;return t.jsxs(t.Fragment,{children:[te,t.jsx(R.Portal,{target:"recentplays",children:t.jsx(Ne,{gameId:"cryptochartgame-v2"})}),t.jsx(R.Portal,{target:"stats",children:t.jsx(Ae,{gameName:"Crypto Chart",gameMode:"V2",rtp:"95",stats:{gamesPlayed:ne,wins:se,losses:le},onReset:()=>{V(0),q(0),X(0),z(0),I(0)},isMobile:g})}),t.jsx(R.Portal,{target:"screen",children:t.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",background:u.background,perspective:"100px"},children:[t.jsx("canvas",{ref:U,width:b,height:P,style:{position:"absolute",top:"20px",left:"20px",right:"20px",bottom:"140px",width:"calc(100% - 40px)",height:"calc(100% - 160px)",objectFit:"contain",background:u.background,borderRadius:"12px",border:"2px solid rgba(212, 165, 116, 0.4)",zIndex:0}}),(y==="win"||y==="crash")&&!H&&t.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",borderRadius:"16px",padding:"32px",textAlign:"center",color:y==="win"?x.bullish:x.bearish,border:`2px solid ${y==="win"?x.bullish:x.bearish}`,backdropFilter:"blur(10px)",zIndex:100},children:[t.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",marginBottom:"16px"},children:y==="win"?"ðŸš€ MOON!":"ðŸ’¥ RUGGED!"}),t.jsxs("div",{style:{fontSize:"20px",color:u.light,marginBottom:"8px"},children:["Target: ",s.toFixed(2),"x"]}),t.jsxs("div",{style:{fontSize:"20px",color:u.light,marginBottom:"16px"},children:["Result: ",v.toFixed(2),"x"]}),$&&t.jsxs("div",{style:{fontSize:"18px",color:u.gold,fontWeight:"bold"},children:["Won: ",t.jsx(Z,{amount:$})]})]}),t.jsxs(De,{children:[t.jsxs("div",{style:{flex:g?"1":"0 0 140px",height:"100%",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.15) 0%, rgba(46, 125, 50, 0.25) 50%, rgba(76, 175, 80, 0.15) 100%)",borderRadius:"12px",border:"2px solid rgba(76, 175, 80, 0.4)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 16px rgba(76, 175, 80, 0.2), inset 0 1px 0 rgba(76, 175, 80, 0.3)",backdropFilter:"blur(8px)"},children:[t.jsx("div",{style:{fontSize:g?"11px":"14px",fontWeight:"bold",color:"#4caf50",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"4px"},children:"TARGET"}),t.jsxs("div",{style:{fontSize:g?"16px":"18px",color:"rgba(76, 175, 80, 0.9)",fontWeight:"600"},children:[s.toFixed(2),"x"]})]}),t.jsxs("div",{style:{flex:g?"1":"0 0 140px",height:"100%",background:"linear-gradient(135deg, rgba(255, 152, 0, 0.15) 0%, rgba(245, 124, 0, 0.25) 50%, rgba(255, 152, 0, 0.15) 100%)",borderRadius:"12px",border:"2px solid rgba(255, 152, 0, 0.4)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 16px rgba(255, 152, 0, 0.2), inset 0 1px 0 rgba(255, 152, 0, 0.3)",backdropFilter:"blur(8px)"},children:[t.jsx("div",{style:{fontSize:g?"11px":"14px",fontWeight:"bold",color:"#ff9800",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"4px"},children:"CURRENT"}),t.jsxs("div",{style:{fontSize:g?"16px":"18px",color:"rgba(255, 152, 0, 0.9)",fontWeight:"600"},children:[T.toFixed(2),"x"]})]}),t.jsxs("div",{style:{flex:g?"1":"0 0 140px",height:"100%",background:"linear-gradient(135deg, rgba(184, 51, 106, 0.15) 0%, rgba(136, 14, 79, 0.25) 50%, rgba(184, 51, 106, 0.15) 100%)",borderRadius:"12px",border:"2px solid rgba(184, 51, 106, 0.4)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 16px rgba(184, 51, 106, 0.2), inset 0 1px 0 rgba(184, 51, 106, 0.3)",backdropFilter:"blur(8px)"},children:[t.jsx("div",{style:{fontSize:g?"11px":"14px",fontWeight:"bold",color:"#b8336a",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"4px"},children:"WIN CHANCE"}),t.jsx("div",{style:{fontSize:g?"16px":"18px",color:"rgba(184, 51, 106, 0.9)",fontWeight:"600"},children:y==="idle"?"-":`${(100/s).toFixed(1)}%`})]}),t.jsxs("div",{style:{flex:g?"1":"0 0 140px",height:"100%",background:"linear-gradient(135deg, rgba(139, 90, 158, 0.15) 0%, rgba(106, 27, 154, 0.25) 50%, rgba(139, 90, 158, 0.15) 100%)",borderRadius:"12px",border:"2px solid rgba(139, 90, 158, 0.4)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 16px rgba(139, 90, 158, 0.2), inset 0 1px 0 rgba(139, 90, 158, 0.3)",backdropFilter:"blur(8px)"},children:[t.jsx("div",{style:{fontSize:g?"11px":"14px",fontWeight:"bold",color:"#8b5a9e",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"4px"},children:"POTENTIAL"}),t.jsx("div",{style:{fontSize:g?"16px":"18px",color:"rgba(139, 90, 158, 0.9)",fontWeight:"600"},children:t.jsx(Z,{amount:m*s})})]})]}),t.jsx(Me,{ref:N,style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:1e3}})]})}),t.jsx(R.Portal,{target:"controls",children:g?t.jsx(we,{wager:m,setWager:ae,onPlay:xe,playDisabled:!me,playText:H?"Trading...":"Trade",children:t.jsxs("div",{style:{background:"rgba(212, 165, 116, 0.1)",borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[t.jsx("span",{style:{color:u.light,fontWeight:"bold"},children:"Target Multiplier"}),t.jsxs("span",{style:{color:u.gold,fontSize:"18px",fontWeight:"bold"},children:[s.toFixed(1),"x"]})]}),t.jsx("input",{type:"range",min:h.min,max:Math.min(_,h.max),step:h.step,value:s,onChange:e=>Y(Number(e.target.value)),style:{width:"100%"}}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:u.light,marginTop:"4px"},children:[t.jsxs("span",{children:[h.min,"x"]}),t.jsxs("span",{children:[Math.min(_,h.max).toFixed(0),"x"]})]})]})}):t.jsx(ke,{children:t.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[t.jsxs("div",{style:{background:"rgba(212, 165, 116, 0.1)",borderRadius:"8px",padding:"12px",minWidth:"200px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[t.jsx("span",{style:{color:u.light,fontSize:"14px",fontWeight:"bold"},children:"Target"}),t.jsxs("span",{style:{color:u.gold,fontSize:"16px",fontWeight:"bold"},children:[s.toFixed(1),"x"]})]}),t.jsx("input",{type:"range",min:h.min,max:Math.min(_,h.max),step:h.step,value:s,onChange:e=>Y(Number(e.target.value)),style:{width:"100%"}})]}),y!=="idle"&&t.jsx(Ie,{onClick:he,children:"Reset"})]})})})]})}export{tt as default};
