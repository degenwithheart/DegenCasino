import{r,j as e}from"./three-DV31HySq.js";import{aH as F,aJ as L,aI as _,G as n,bf as H,an as V,aK as $,aL as X,bl as b,T as K,aM as J,aN as q,aO as Q,aV as Z,B as ee}from"./index-BarUt2o_.js";import{G as te}from"./GameStatsHeader-DfbFCrGS.js";import{O as s}from"./constants-sF6ISFPH.js";import{u as y}from"./useGameMeta-C4Hfe5lB.js";import{S as ae,a as ie,b as le,c as se}from"./win-BKYOjMDH.js";import{G as pe}from"./GameRecentPlaysHorizontal-CmiF3H-Z.js";import{G as re}from"./GameControlsSection-BZ3LzTmM.js";import"./react-vendor-faCf7XlP.js";import"./blockchain-C0nfa7Sw.js";import"./physics-audio-Bm3pLP40.js";const be=()=>{const j=F(),[p,S]=L(),z=_(),R=n.useGame(),g=H("dice-v2"),{mobile:O}=V(),[t,M]=r.useState(50),[a,B]=r.useState(!0),[i,d]=r.useState(!1),[m,x]=r.useState(-1),[C,c]=r.useState(null),{settings:k}=$(),W=k.enableEffects;k.enableMotion;const o=r.useRef(null),u=X({win:se,play:le,lose:ie,tick:ae}),v=a?t/s:(s-t-1)/s,T=v>0?1/v*b["dice-v2"]:0,E=T*p,G=E>z.maxPayout,I=async()=>{try{if(p<=0){console.error("❌ BLOCKED: Cannot play with zero wager");return}d(!1),x(-1),c(null),u.play("play");const l=ee["dice-v2"];let f;if(a)f=l.calculateBetArray(t);else{f=Array(s).fill(0);const D=(s-t-1)/s;if(D>0){const Y=1/D*b["dice-v2"];for(let w=t+1;w<s;w++)f[w]=Y}}await R.play({wager:p,bet:f});const h=await R.result(),A=h.payout>0;c(A?"win":"lose");const N=h.resultIndex;x(N);const U=h.payout-p;g.updateStats(U),setTimeout(()=>{d(!0),A?(u.play("win"),W&&(o.current?.winFlash("#00ff00",1.5),o.current?.screenShake(1,600))):(u.play("lose"),W&&(o.current?.loseFlash("#ff4444",.8),o.current?.screenShake(.5,400)))},100)}catch(l){console.error("🎲 PLAY FUNCTION ERROR:",l),d(!1),x(-1),c(null)}},P=()=>{d(!1),x(-1),c(null)};return e.jsxs(e.Fragment,{children:[e.jsx(n.Portal,{target:"recentplays",children:e.jsx(pe,{gameId:"dice-v2"})}),e.jsx(n.Portal,{target:"stats",children:e.jsx(te,{gameName:"Dice",gameMode:"2D",rtp:(b["dice-v2"]*100).toFixed(0),stats:g.stats,onReset:g.resetStats,isMobile:O})}),e.jsx(n.Portal,{target:"screen",children:e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 25%, #4a5568 50%, #2d3748 75%, #1a202c 100%)",perspective:"100px"},children:[e.jsxs("div",{style:{position:"absolute",top:"clamp(10px, 3vw, 20px)",left:"clamp(10px, 3vw, 20px)",right:"clamp(10px, 3vw, 20px)",bottom:"clamp(100px, 20vw, 120px)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"clamp(20px, 5vw, 30px)",padding:"10px"},children:[e.jsx("div",{style:{fontSize:"clamp(14px, 4vw, 18px)",color:i&&m>=0?C==="win"?"#48bb78":"#e53e3e":"#a0aec0",textAlign:"center",lineHeight:"1.4",fontWeight:i?"bold":"normal"},children:i&&m>=0?`Roll Result: ${m} - ${C==="win"?"WIN!":"LOSE"}`:"Games Results Will Be Displayed Here"}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"clamp(32px, 8vw, 48px)",fontWeight:"bold",marginBottom:"8px",lineHeight:"1.2"},children:e.jsx("span",{style:{color:"#48bb78"},children:e.jsx(K,{exact:!0,amount:E})})}),e.jsx("div",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",color:"#a0aec0"},children:"Possible Winning"})]}),e.jsxs("div",{style:{width:"clamp(280px, 80vw, 600px)",maxWidth:"95%",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"clamp(8px, 2vw, 10px)",fontSize:"clamp(12px, 3vw, 14px)",color:"#a0aec0"},children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"25"}),e.jsx("span",{children:"50"}),e.jsx("span",{children:"75"}),e.jsx("span",{children:"100"})]}),e.jsxs("div",{style:{position:"relative",height:"clamp(36px, 8vw, 40px)",background:"rgba(45, 55, 72, 0.8)",borderRadius:"20px",padding:"4px"},children:[e.jsx("div",{style:{position:"absolute",left:a?"4px":"auto",right:a?"auto":"4px",top:"4px",bottom:"4px",width:`${a?t:100-t}%`,background:"linear-gradient(90deg, #48bb78, #38a169)",borderRadius:"16px"}}),e.jsx("div",{style:{position:"absolute",right:a?"4px":"auto",left:a?"auto":"4px",top:"4px",bottom:"4px",width:`${a?100-t:t}%`,background:"linear-gradient(90deg, #e53e3e, #c53030)",borderRadius:"16px"}}),e.jsx("div",{style:{position:"absolute",left:`${t}%`,top:"50%",transform:"translate(-50%, -50%)",width:"clamp(28px, 6vw, 32px)",height:"clamp(28px, 6vw, 32px)",background:"linear-gradient(135deg, #e2e8f0, #cbd5e0)",borderRadius:"50%",border:"2px solid #4a5568",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",touchAction:"manipulation"}}),e.jsx("input",{type:"range",min:"1",max:"99",value:t,onChange:l=>M(parseInt(l.target.value)),style:{position:"absolute",width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]})]}),e.jsxs("div",{style:{position:"absolute",top:"clamp(20px, 5vw, 40px)",left:"clamp(20px, 8vw, 60px)",width:"clamp(60px, 12vw, 80px)",height:"clamp(60px, 12vw, 80px)",background:"linear-gradient(135deg, #4a5568 0%, #2d3748 50%, #1a202c 100%)",borderRadius:"clamp(8px, 2vw, 12px)",transform:"rotate(-15deg) perspective(100px) rotateX(15deg) rotateY(-15deg)",boxShadow:"0 8px 16px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.1)",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridTemplateRows:"1fr 1fr 1fr",padding:"clamp(8px, 2vw, 12px)",opacity:.7,pointerEvents:"none"},children:[e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"start"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"start"}}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"end"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"end"}})]}),e.jsxs("div",{style:{position:"absolute",top:"clamp(20px, 5vw, 40px)",right:"clamp(20px, 8vw, 60px)",width:"clamp(60px, 12vw, 80px)",height:"clamp(60px, 12vw, 80px)",background:"linear-gradient(135deg, #4a5568 0%, #2d3748 50%, #1a202c 100%)",borderRadius:"clamp(8px, 2vw, 12px)",transform:"rotate(15deg) perspective(100px) rotateX(15deg) rotateY(15deg)",boxShadow:"0 8px 16px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.1)",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridTemplateRows:"1fr 1fr 1fr",padding:"clamp(8px, 2vw, 12px)",opacity:.7,pointerEvents:"none"},children:[e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"start"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"start"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"center",alignSelf:"center"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"end"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"end"}})]}),e.jsxs("div",{style:{position:"absolute",bottom:"clamp(80px, 15vw, 120px)",left:"clamp(20px, 8vw, 60px)",width:"clamp(60px, 12vw, 80px)",height:"clamp(60px, 12vw, 80px)",background:"linear-gradient(135deg, #4a5568 0%, #2d3748 50%, #1a202c 100%)",borderRadius:"clamp(8px, 2vw, 12px)",transform:"rotate(25deg) perspective(100px) rotateX(-15deg) rotateY(-25deg)",boxShadow:"0 8px 16px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.1)",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridTemplateRows:"1fr 1fr 1fr",padding:"clamp(8px, 2vw, 12px)",opacity:.7,pointerEvents:"none"},children:[e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"start"}}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"center",alignSelf:"center"}}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"end"}})]}),e.jsxs("div",{style:{position:"absolute",bottom:"clamp(80px, 15vw, 120px)",right:"clamp(20px, 8vw, 60px)",width:"clamp(60px, 12vw, 80px)",height:"clamp(60px, 12vw, 80px)",background:"linear-gradient(135deg, #4a5568 0%, #2d3748 50%, #1a202c 100%)",borderRadius:"clamp(8px, 2vw, 12px)",transform:"rotate(-25deg) perspective(100px) rotateX(-15deg) rotateY(25deg)",boxShadow:"0 8px 16px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.1)",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridTemplateRows:"1fr 1fr 1fr",padding:"clamp(8px, 2vw, 12px)",opacity:.7,pointerEvents:"none"},children:[e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"start"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"start"}}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"center"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"center"}}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"start",alignSelf:"end"}}),e.jsx("div",{}),e.jsx("div",{style:{width:"clamp(4px, 1.2vw, 8px)",height:"clamp(4px, 1.2vw, 8px)",backgroundColor:"#fff",borderRadius:"50%",justifySelf:"end",alignSelf:"end"}})]})]}),e.jsx(re,{children:e.jsxs("div",{style:{display:"flex",gap:"min(20px, 4vw)",alignItems:"center",width:"100%",justifyContent:"center",flexWrap:"wrap",padding:"0 10px"},children:[e.jsxs("div",{style:{background:"rgba(26, 32, 44, 0.9)",borderRadius:"12px",padding:"clamp(12px, 3vw, 16px)",textAlign:"center",minWidth:"clamp(100px, 25vw, 120px)",flex:"1 1 auto",maxWidth:"150px",border:"2px solid rgba(74, 85, 104, 0.5)",boxShadow:"0 4px 16px rgba(26, 32, 44, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{fontSize:"clamp(12px, 2.5vw, 14px)",marginBottom:"8px",color:"#a0aec0"},children:"Multiplier"}),e.jsxs("div",{style:{fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"bold",color:"#fff"},children:[T.toFixed(2),"x"]})]}),e.jsxs("div",{style:{background:"rgba(26, 32, 44, 0.9)",borderRadius:"12px",padding:"clamp(12px, 3vw, 16px)",textAlign:"center",cursor:"pointer",minWidth:"clamp(100px, 25vw, 120px)",flex:"1 1 auto",maxWidth:"150px",border:"2px solid rgba(74, 85, 104, 0.5)",boxShadow:"0 4px 16px rgba(26, 32, 44, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease"},onClick:()=>B(!a),onMouseEnter:l=>{window.innerWidth>768&&(l.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:l=>{window.innerWidth>768&&(l.currentTarget.style.transform="translateY(0px)")},children:[e.jsxs("div",{style:{fontSize:"clamp(12px, 2.5vw, 14px)",marginBottom:"8px",color:"#a0aec0",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e.jsx("span",{children:a?"Roll Under":"Roll Over"}),e.jsx("span",{style:{fontSize:"clamp(14px, 3vw, 16px)",opacity:.7,display:"inline-block"},children:"↻"})]}),e.jsx("div",{style:{fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"bold",color:"#fff"},children:t})]}),e.jsxs("div",{style:{background:"rgba(26, 32, 44, 0.9)",borderRadius:"12px",padding:"clamp(12px, 3vw, 16px)",textAlign:"center",minWidth:"clamp(100px, 25vw, 120px)",flex:"1 1 auto",maxWidth:"150px",border:"2px solid rgba(74, 85, 104, 0.5)",boxShadow:"0 4px 16px rgba(26, 32, 44, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{fontSize:"clamp(12px, 2.5vw, 14px)",marginBottom:"8px",color:"#a0aec0"},children:"Win Chance"}),e.jsxs("div",{style:{fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"bold",color:"#fff"},children:[(v*100).toFixed(0),"%"]})]})]})}),e.jsx(J,{ref:o,style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:1e3},...y("dice-v2")&&{title:y("dice-v2").name,description:y("dice-v2").description}})]})}),e.jsxs(n.Portal,{target:"controls",children:[e.jsx(q,{wager:p,setWager:S,onPlay:i?P:I,playDisabled:j.isPlaying||!i&&G,playText:i?"Roll Again":"Roll Dice"}),e.jsx(Q,{onPlay:i?P:I,playDisabled:j.isPlaying||!i&&G,playText:i?"Roll Again":"Roll Dice",children:e.jsx(Z,{value:p,onChange:S})})]})]})};export{be as default};
